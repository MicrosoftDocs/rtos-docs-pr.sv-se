---
title: Kapitel 1 – Introduktion till Azure återställnings tider NetX Duo DHCPv6 server
description: Det här dokumentet beskriver i detalj hur NetX Duo DHCPv6-servern tilldelar IPv6-adresser till DHCPv6-klienter.
author: philmea
ms.author: philmea
ms.date: 06/08/2020
ms.topic: article
ms.service: rtos
ms.openlocfilehash: 6cf7baa91b1804876b97b1d75d1872d1120ad028
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 03/22/2021
ms.locfileid: "104826043"
---
# <a name="chapter-1---introduction-to-azure-rtos-netx-duo-dhcpv6-server"></a><span data-ttu-id="b0058-103">Kapitel 1 – Introduktion till Azure återställnings tider NetX Duo DHCPv6 server</span><span class="sxs-lookup"><span data-stu-id="b0058-103">Chapter 1 - Introduction to Azure RTOS NetX Duo DHCPv6 server</span></span>

<span data-ttu-id="b0058-104">I IPv6-nätverk krävs DHCPv6 för klienter för att hämta IPv6-adresser.</span><span class="sxs-lookup"><span data-stu-id="b0058-104">In IPv6 networks, DHCPv6is required for Clients to obtain IPv6 addresses.</span></span> <span data-ttu-id="b0058-105">Den ersätter inte DHCP som är begränsad till IPv4-och som inte erbjuder IPv4-adresser.</span><span class="sxs-lookup"><span data-stu-id="b0058-105">It does not replace DHCP which is limited to IPv4in that it does not offer IPv4 addresses.</span></span> <span data-ttu-id="b0058-106">DHCPv6 har liknande funktioner som både DHCP och många förbättringar.</span><span class="sxs-lookup"><span data-stu-id="b0058-106">DHCPv6 has similar features to DHCP as well as many enhancements.</span></span> <span data-ttu-id="b0058-107">En klient som inte eller kan använda automatisk konfiguration av IPv6-tillstånd kan använda DHCPv6 för att tilldela en unik global IPv6-adress från en DHCPv6-server.</span><span class="sxs-lookup"><span data-stu-id="b0058-107">A Client who does not or cannot use IPv6 stateless address auto-configuration can use DHCPv6 to be assigned a unique global IPv6 address from a DHCPv6 Server.</span></span>

<span data-ttu-id="b0058-108">NetX Duo utvecklades för att stödja IPv6-nätverksbaserade program och nätverks protokoll som DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="b0058-108">NetX Duo was developed to support IPv6 network based applications and network protocols such as DHCPv6.</span></span> <span data-ttu-id="b0058-109">Det här dokumentet beskriver i detalj hur NetX Duo DHCPv6-servern tilldelar IPv6-adresser till DHCPv6-klienter.</span><span class="sxs-lookup"><span data-stu-id="b0058-109">This document will explain in detail how the NetX Duo DHCPv6 Server assigns IPv6 addresses to DHCPv6 Clients.</span></span>

## <a name="dhcpv6-communication"></a><span data-ttu-id="b0058-110">DHCPv6-kommunikation</span><span class="sxs-lookup"><span data-stu-id="b0058-110">DHCPv6 Communication</span></span>

<span data-ttu-id="b0058-111">**DHCPv6-meddelande struktur**</span><span class="sxs-lookup"><span data-stu-id="b0058-111">**DHCPv6 Message structure**</span></span>

<span data-ttu-id="b0058-112">Meddelande innehållet är i grunden en meddelande rubrik följt av ett eller flera (oftast fler) alternativ block.</span><span class="sxs-lookup"><span data-stu-id="b0058-112">Message content is basically a message header followed by one or more (usually more) option blocks.</span></span> <span data-ttu-id="b0058-113">Nedan visas den grundläggande strukturen där varje block representerar en byte:</span><span class="sxs-lookup"><span data-stu-id="b0058-113">Below is the basic structure where each block represents one byte:</span></span>

![Diagram som visar en block struktur för DHCPv6-meddelanden och alternativ.](media/image2.jpg)

<span data-ttu-id="b0058-115">**Bild 1. DHCPv6-meddelande och alternativ block struktur**</span><span class="sxs-lookup"><span data-stu-id="b0058-115">**Figure 1. DHCPv6 message and option block structure**</span></span>

<span data-ttu-id="b0058-116">I fältet 1-byte Msg-Type anges typen av DHCPv6-meddelande.</span><span class="sxs-lookup"><span data-stu-id="b0058-116">The 1-byte Msg-Type field indicates the type of DHCPv6 message.</span></span> <span data-ttu-id="b0058-117">Fältet 3 byte Transaction-ID anges av klienten.</span><span class="sxs-lookup"><span data-stu-id="b0058-117">The 3-byte Transaction-ID field is set by the Client.</span></span> <span data-ttu-id="b0058-118">Den kan innehålla en sekvens med tecken, men måste vara unik för varje klient meddelande till servern (bevaras i duplicerade meddelanden som skickas av klienten).</span><span class="sxs-lookup"><span data-stu-id="b0058-118">It can by any sequence of characters but must be unique for each Client message to the Server (conserved across duplicate messages sent by the Client).</span></span> <span data-ttu-id="b0058-119">Servern använder det transaktions-ID: t för varje svar på klienten för att låta klienten matcha Server meddelanden i händelse av paket som är fördröjda eller nedbrutna i nätverket.</span><span class="sxs-lookup"><span data-stu-id="b0058-119">The Server uses that Transaction-ID for each response to the Client to enable the Client to match up Server messages in the event of packets that are delayed or dropped on the network.</span></span> <span data-ttu-id="b0058-120">Efter fältet transaktions-ID är ett eller flera DHCPv6-alternativ som används för att ange vad klienten begär.</span><span class="sxs-lookup"><span data-stu-id="b0058-120">Following the Transaction-ID field, are one or more DHCPv6 options used to indicate what the Client is requesting.</span></span>

<span data-ttu-id="b0058-121">Alternativ strukturen för DHCPv6 består av en alternativ kod, fältet alternativ längd, som inte innehåller fälten längd eller kod, och slutligen alternativ data som är ett eller flera alternativ kod fält i 2 byte för de data som klienten begär.</span><span class="sxs-lookup"><span data-stu-id="b0058-121">The DHCPv6 option structure is composed of an option code, an option length field, which does not include the length or code fields, and finally the option data itself which is one or more 2 byte option code fields for the data the Client is requesting.</span></span>

<span data-ttu-id="b0058-122">Vissa alternativ block har kapslade alternativ.</span><span class="sxs-lookup"><span data-stu-id="b0058-122">Some option blocks have nested options.</span></span> <span data-ttu-id="b0058-123">Till exempel innehåller en *identitets koppling för alternativet ej tillfällig adress (IANA)* ett eller flera alternativ för *identitets associationer (AI)* för att begära IPv6-adresser.</span><span class="sxs-lookup"><span data-stu-id="b0058-123">For example, an *Identity Association for Non Temporary Address (IANA)* option contains one or more *Identity Association (IA)* options to request IPv6 addresses.</span></span> <span data-ttu-id="b0058-124">Det *IANA* -alternativ som returnerades i Server svars meddelandet innehåller samma *IA* -alternativ med IPv6-adressen och de låne tider som har beviljats av servern, samt ett *status* alternativ som anger om det finns ett fel med klient adress förfrågan.</span><span class="sxs-lookup"><span data-stu-id="b0058-124">The *IANA* option returned in the Server Reply message contains the same *IA* option(s) with the IPv6 address and lease times granted by the Server, as well as a *Status* option indicating if there is an error with the Client address request.</span></span>

<span data-ttu-id="b0058-125">En lista över alla alternativ block och deras beskrivning anges i **bilaga A**.</span><span class="sxs-lookup"><span data-stu-id="b0058-125">A list of all option blocks and their description is provided in **Appendix A**.</span></span>

<span data-ttu-id="b0058-126">**DHCPv6-meddelande typer**</span><span class="sxs-lookup"><span data-stu-id="b0058-126">**DHCPv6 Message Types**</span></span>

<span data-ttu-id="b0058-127">Även om DHCPv6 avsevärt förbättrar funktionerna i DHCP, används samma antal meddelanden som DHCP och stöder samma leverantörs alternativ som DHCP.</span><span class="sxs-lookup"><span data-stu-id="b0058-127">Although DHCPv6 greatly enhances the functionality of DHCP, it uses the same number of messages as DHCP and supports the same vendor options as DHCP.</span></span> <span data-ttu-id="b0058-128">Listan över DHCPv6-meddelanden är följande:</span><span class="sxs-lookup"><span data-stu-id="b0058-128">The list of DHCPv6 messages are as follows:</span></span>

- <span data-ttu-id="b0058-129">SOLICT (1) (skickas av klienten)</span><span class="sxs-lookup"><span data-stu-id="b0058-129">SOLICT (1) (sent by Client)</span></span>
- <span data-ttu-id="b0058-130">Annonsera (2) (skickas av servern)</span><span class="sxs-lookup"><span data-stu-id="b0058-130">ADVERTISE (2) (sent by Server)</span></span>
- <span data-ttu-id="b0058-131">BEGÄRAN (3) (skickas av klienten)</span><span class="sxs-lookup"><span data-stu-id="b0058-131">REQUEST (3) (sent by Client)</span></span>
- <span data-ttu-id="b0058-132">SVAR (7) (skickat av servern)</span><span class="sxs-lookup"><span data-stu-id="b0058-132">REPLY (7) (sent by Server)</span></span>
- <span data-ttu-id="b0058-133">BEKRÄFTA (4) (skickas av klienten)</span><span class="sxs-lookup"><span data-stu-id="b0058-133">CONFIRM (4) (sent by Client)</span></span>
- <span data-ttu-id="b0058-134">FÖRNYA (5) (skickas av klienten)</span><span class="sxs-lookup"><span data-stu-id="b0058-134">RENEW (5) (sent by Client)</span></span>
- <span data-ttu-id="b0058-135">BIND (6) (skickas av klienten)</span><span class="sxs-lookup"><span data-stu-id="b0058-135">REBIND (6) (sent by Client)</span></span>
- <span data-ttu-id="b0058-136">VERSION (8) (skickas av klienten)</span><span class="sxs-lookup"><span data-stu-id="b0058-136">RELEASE (8) (sent by Client)</span></span>
- <span data-ttu-id="b0058-137">NEKA (9) (skickas av klienten)</span><span class="sxs-lookup"><span data-stu-id="b0058-137">DECLINE (9) (sent by Client)</span></span>
- <span data-ttu-id="b0058-138">INFORM_REQUEST (11) (skickas av klienten)</span><span class="sxs-lookup"><span data-stu-id="b0058-138">INFORM_REQUEST (11) (sent by Client)</span></span>
- <span data-ttu-id="b0058-139">Konfigurera om \* (10) (skickas av servern)</span><span class="sxs-lookup"><span data-stu-id="b0058-139">RECONFIGURE\* (10) (sent by Server)</span></span>

<span data-ttu-id="b0058-140">\* Omkonfiguration stöds inte av NetX Duo DHCPv6-servern.</span><span class="sxs-lookup"><span data-stu-id="b0058-140">\*RECONFIGURE is not supported by the NetX Duo DHCPv6 Server.</span></span>

<span data-ttu-id="b0058-141">Den grundläggande DHCPv6-sekvensen för begäran, med motsvarande DHCPv4-meddelande typ inom parentes, är följande:</span><span class="sxs-lookup"><span data-stu-id="b0058-141">The basic DHCPv6 request sequence, with the equivalent DHCPv4 message type in parenthesis, is as follows:</span></span>

<span data-ttu-id="b0058-142">Client \***solicit** _ (_Discovery *) Server **annonsering** (* erbjudande *)-  klientbegäran*(begäran *) (* DHCPACK \*)</span><span class="sxs-lookup"><span data-stu-id="b0058-142">Client ***Solicit** _ (_Discovery *) Server **Advertisement** (* Offer *) Client **Request** (* Request *) Server **Reply** (* DHCPAck*)</span></span>

<span data-ttu-id="b0058-143">Klient **förnyelse**(samma) Server **svar** (*DHCPACK*)</span><span class="sxs-lookup"><span data-stu-id="b0058-143">Client **Renew**(same) Server **Reply** (*DHCPAck*)</span></span>

## <a name="dhcpv6-message-validation"></a><span data-ttu-id="b0058-144">DHCPv6-meddelande validering</span><span class="sxs-lookup"><span data-stu-id="b0058-144">DHCPv6 Message Validation</span></span>

<span data-ttu-id="b0058-145">Transaktions-ID: klienten måste generera ett transaktions-ID för varje meddelande som skickas till servern.</span><span class="sxs-lookup"><span data-stu-id="b0058-145">Transaction ID: The Client must generate a transaction ID for each message it sends to the Server.</span></span> <span data-ttu-id="b0058-146">DHCPv6-servern avvisar alla meddelanden från klienten som inte matchar detta transaktions-ID.</span><span class="sxs-lookup"><span data-stu-id="b0058-146">The DHCPv6 Server will reject any message from the Client not matching this transaction ID.</span></span> <span data-ttu-id="b0058-147">Servern måste i sin tur använda samma transaktions-ID i sina svar till klienten.</span><span class="sxs-lookup"><span data-stu-id="b0058-147">The Server in turn must use the same transaction ID in its responses back to the Client.</span></span>

<span data-ttu-id="b0058-148">**DHCPv6 unika identifierare (DUIDs)**</span><span class="sxs-lookup"><span data-stu-id="b0058-148">**DHCPv6 unique Identifiers (DUIDs)**</span></span>

<span data-ttu-id="b0058-149">Alla Server meddelanden måste också innehålla en GUID (DHCPv6 Unique Identifier) i varje meddelande, annars bör DHCPv6-klienten inte acceptera meddelandet.</span><span class="sxs-lookup"><span data-stu-id="b0058-149">All Server messages must also include a DHCPv6 unique Identifier (DUID) in each message or the DHCPv6 Client should not accept the message.</span></span> <span data-ttu-id="b0058-150">Ett länk lager (lla) DUID är ett kontroll block som innehåller klientens MAC-adress, maskin varu typ och DUID-typ.</span><span class="sxs-lookup"><span data-stu-id="b0058-150">A Link Layer (LL) DUID is a control block containing client MAC address, hardware type, and DUID type.</span></span> <span data-ttu-id="b0058-151">Ett LLT-DUID (Link Layer Time) innehåller även ett Time-fält som minskar risken för att DUID inte är unikt i värd nätverket.</span><span class="sxs-lookup"><span data-stu-id="b0058-151">A Link Layer Time (LLT) DUID additionally contains a time field which decreases the chances the DUID will not be unique on the host network.</span></span> <span data-ttu-id="b0058-152">Av den anledningen rekommenderar RFC 3315 LLT DUIDs över lla DUIDs.</span><span class="sxs-lookup"><span data-stu-id="b0058-152">For that reason RFC 3315 recommends LLT DUIDs over LL DUIDs.</span></span> <span data-ttu-id="b0058-153">Om värd programmet inte skapar något eget unikt tids värde, kommer NetX Duo DHCPv6 att tillhandahålla ett standardvärde.</span><span class="sxs-lookup"><span data-stu-id="b0058-153">If the host application does not create its own unique time value, NetX Duo DHCPv6 will provide a default one.</span></span> <span data-ttu-id="b0058-154">DUID-typen är företagets (tilldelad) DUID som innehåller ett registrerat företags-ID (som i registrerade med IANA) och privata data som är variabel i typ och längd, t. ex. beroende på minnes storlek, typ av operativ system för annan maskin varu konfiguration.</span><span class="sxs-lookup"><span data-stu-id="b0058-154">The third type of DUID is the Enterprise (Vendor assigned) DUID which contains a registered Enterprise ID (as in registered with IANA) and private data that is variable in type and length e.g. based on memory size, operating system type of other hardware configuration.</span></span> <span data-ttu-id="b0058-155">Se listan över konfigurations alternativ någon annan stans i det här dokumentet för att konfigurera server leverantörens tilldelade och privata ID-värden.</span><span class="sxs-lookup"><span data-stu-id="b0058-155">See the list of Configuration Options elsewhere in this document for setting up the Server vendor assigned and private ID values.</span></span>

<span data-ttu-id="b0058-156">Klienten måste även inkludera sitt DUID i sina meddelanden till servern, med undantag för INFORM_REQUEST, eller så kommer servern att avvisa dem.</span><span class="sxs-lookup"><span data-stu-id="b0058-156">The Client must also include its DUID in its messages to the Server except for INFORM_REQUEST, or the Server will reject them.</span></span>

<span data-ttu-id="b0058-157">**DHCPv6 klient server sessioner**</span><span class="sxs-lookup"><span data-stu-id="b0058-157">**DHCPv6 Client Server Sessions**</span></span>

<span data-ttu-id="b0058-158">DHCPv6-klienter och-servrar utbyter meddelanden över UDP.</span><span class="sxs-lookup"><span data-stu-id="b0058-158">DHCPv6 Clients and Servers exchange messages over UDP.</span></span> <span data-ttu-id="b0058-159">Klienten använder port 546 för att skicka och ta emot DHCPv6-meddelanden och servern använder port 547.</span><span class="sxs-lookup"><span data-stu-id="b0058-159">The Client uses port 546 to send and receive DHCPv6 messages and the Server uses port 547.</span></span> <span data-ttu-id="b0058-160">Klienten använder den länk lokala adressen för att överföra och ta emot DHCPv6-meddelanden.</span><span class="sxs-lookup"><span data-stu-id="b0058-160">The Client initially uses its link-local address for transmitting and receiving DHCPv6 messages.</span></span> <span data-ttu-id="b0058-161">Den skickar alla meddelanden till DHCPv6-servrar med hjälp av en reserverad, länkad multicast-adress som kallas *All_DHCP_Relay_Agents_and_Servers* multicast-adress *(FF02:: 01:02)*.</span><span class="sxs-lookup"><span data-stu-id="b0058-161">It sends all messages to DHCPv6 servers using a reserved, link-scoped multicast address known as the *All_DHCP_Relay_Agents_and_Servers* multicast address *(FF02::01:02)*.</span></span>

<span data-ttu-id="b0058-162">ForIPv6 adress tilldelnings begär Anden, DHCPv6-servern lyssnar efter *värvnings* meddelanden som skickas till *All_DHCP_Relay_Agents_and_Servers* -adressen.</span><span class="sxs-lookup"><span data-stu-id="b0058-162">ForIPv6 address assignment requests, the DHCPv6 Server listens for *Solicit* messages sent to the *All_DHCP_Relay_Agents_and_Servers* address.</span></span> <span data-ttu-id="b0058-163">Klienten kan begära tilldelningen av en speciell IPv6-adress i *begär ande förfrågan* eller låta servern välja en.</span><span class="sxs-lookup"><span data-stu-id="b0058-163">In the *Solicit* request, the Client can request the assignment of specific IPv6 address or let the Server choose one.</span></span> <span data-ttu-id="b0058-164">Den kan också begära annan information om nätverks konfigurationen från servern.</span><span class="sxs-lookup"><span data-stu-id="b0058-164">It can also request other network configuration information from the Server.</span></span>

<span data-ttu-id="b0058-165">Om DHCPv6Server extraherar ett giltigt *värvnings* meddelande och kan tilldela en IPv6-adress till klienten, svarar den med ett *annonserings* meddelande som innehåller den IPv6-adress som den ska ge klienten, IPv6-adressens låne tid och eventuell ytterligare information som begärs av klienten.</span><span class="sxs-lookup"><span data-stu-id="b0058-165">If the DHCPv6Server extracts a valid *Solicit* message and can assign an IPv6 address to the Client, it responds with an *Advertise* message containing the IPv6 address it will grant to the Client, the IPv6 address lease time and any additional information requested by the Client.</span></span> <span data-ttu-id="b0058-166">Om klienten accepterar Server erbjudandet svarar den *med ett meddelande* om att servern vet att den accepterar IPv6-adressen.</span><span class="sxs-lookup"><span data-stu-id="b0058-166">If the Client accepts the Server offer it responds with a *Request* message letting the Server know it will accept the IPv6 address.</span></span> <span data-ttu-id="b0058-167">Servern bekräftar att klienten är kopplad till IPv6-adressen med ett *svarsmeddelande* .</span><span class="sxs-lookup"><span data-stu-id="b0058-167">The Server confirms the Client is bound to the IPv6 address with a *Reply* message.</span></span>

<span data-ttu-id="b0058-168">Om klienten DHCPv6-meddelandet är ogiltig, kommer servern att ignorera meddelandet tyst.</span><span class="sxs-lookup"><span data-stu-id="b0058-168">If the Client DHCPv6 message is invalid, the Server will discard the message silently.</span></span> <span data-ttu-id="b0058-169">Om servern inte kan tilldela begäran kommer den att skicka ett *svarsmeddelande* med en indikation på problemet i fältet status för alternativet IP-adress-IANA.</span><span class="sxs-lookup"><span data-stu-id="b0058-169">If the Server is unable to grant the request it will send a *Reply* message with an indication of the problem in the status field of the IP address IANA option.</span></span> <span data-ttu-id="b0058-170">Om duplicerade klient begär Anden tas emot, skickar servern om sitt tidigare DHCPv6-svar, förutsatt att klienten inte bara tog emot paketet.</span><span class="sxs-lookup"><span data-stu-id="b0058-170">If duplicate Client requests are received the Server resends its previous DHCPv6 response, assuming the Client simply did not receive the packet.</span></span>

<span data-ttu-id="b0058-171">Det är upp till klienten som kontrollerar att den tilldelade IPv6-adressen från servern inte är tilldelad till en annan värd i systemet med hjälp av olika IPv6-protokoll som dubblettidentifiering av dubbletter.</span><span class="sxs-lookup"><span data-stu-id="b0058-171">It is up to the Client to verify that its assigned IPv6 address from the Server is not assigned to another host on the system by using various IPv6 protocols such as Duplicate Address Detection.</span></span> <span data-ttu-id="b0058-172">Om adressen inte är unik skickar klienten servern ett meddelande om att *neka* .</span><span class="sxs-lookup"><span data-stu-id="b0058-172">If the address is not unique, the Client will send the Server a *Decline* message.</span></span> <span data-ttu-id="b0058-173">Servern uppdaterar sin IP-adresslån med den här informationen och registrerar att adressen redan har tilldelats.</span><span class="sxs-lookup"><span data-stu-id="b0058-173">The Server updates its IP lease table with this information, recording that the address is already assigned.</span></span> <span data-ttu-id="b0058-174">Under tiden måste klienten starta om DHCPv6-begäran med ett annat *Inbjudnings* meddelande.</span><span class="sxs-lookup"><span data-stu-id="b0058-174">Meanwhile the Client must restart the DHCPv6 request process with another *Solicit* message.</span></span>

<span data-ttu-id="b0058-175">Förutom en IPv6-adress måste även en klient känna till DNS-servern och eventuellt annan nätverks information, till exempel nätverks domänens namn.</span><span class="sxs-lookup"><span data-stu-id="b0058-175">In addition to an IPv6 address, a Client will likely also need to know the DNS server and possibly other network information such as the network domain name.</span></span> <span data-ttu-id="b0058-176">DHCPv6 ger möjlighet att begära den här informationen med hjälp av alternativ begär Anden *i begär Anden och* *begär* Anden, eller separat i meddelanden om *informations begär* Anden.</span><span class="sxs-lookup"><span data-stu-id="b0058-176">DHCPv6 provides the means to request this information using either the use of Option Requests in the *Solicit* and *Request* messages, or separately in *Information Request* messages.</span></span> <span data-ttu-id="b0058-177">DHCPv6-alternativen beskrivs senare i det här kapitlet.</span><span class="sxs-lookup"><span data-stu-id="b0058-177">DHCPv6 options are explained later in this chapter.</span></span>

<span data-ttu-id="b0058-178">**Varaktighet för IPv6-lån**</span><span class="sxs-lookup"><span data-stu-id="b0058-178">**IPv6 Lease Duration**</span></span>

<span data-ttu-id="b0058-179">När servern beviljar en IPv6-adress till en klient tilldelar den också låne tiden (livs längd) i alternativet IANA för när den rekommenderar att klienten startar förnyelse (T1) eller OMBINDNING (T2) dess IPv6-adress med hjälp av *förnya* och *BIND* meddelanden.</span><span class="sxs-lookup"><span data-stu-id="b0058-179">When the Server grants an IPv6 address to a Client, it also assigns the lease duration (lifetime)in the IANA option for when it recommends the Client to start renewing (T1) or rebinding (T2) its IPv6 address using *Renew* and *Rebind* messages.</span></span> <span data-ttu-id="b0058-180">Skillnaden mellan de två är att klienten dirigerar *förnyelse* meddelandet till servern genom att inkludera serverns DUID i *förnyelse* förfrågan.</span><span class="sxs-lookup"><span data-stu-id="b0058-180">The difference between the two is the Client directs the *Renew* message to the Server by including the Server DUID in the *Renew* request.</span></span> <span data-ttu-id="b0058-181">Den anger dock ingen server och tar därför inte med en server-DUID, i *återbind* -meddelandet till *All_DHCP_Relay_Agents_and_Servers* -adressen.</span><span class="sxs-lookup"><span data-stu-id="b0058-181">However, it does not specify any server, and hence does not include a Server DUID, in the *Rebind* message to the *All_DHCP_Relay_Agents_and_Servers* address.</span></span> <span data-ttu-id="b0058-182">Alternativet IA som innehåller den faktiska IPv6-adressen som servern beviljar klienten, innehåller även de önskade och giltiga livs längderna när den lånade IPv6-adressen blir föråldrad eller föråldrad (ogiltig).</span><span class="sxs-lookup"><span data-stu-id="b0058-182">The IA option which contains the actual IPv6 address the Server grants the Client also contains the preferred and valid lifetimes when the leased IPv6 address becomes deprecated or obsolete (invalid), respectively.</span></span>

<span data-ttu-id="b0058-183">NetX Duo DHCPv6-servern har en tids gräns för sessioner för varje klient att spåra tiden mellan klient meddelanden.</span><span class="sxs-lookup"><span data-stu-id="b0058-183">The NetX Duo DHCPv6 Server maintains a session timeout for each Client to track the time between Client messages.</span></span> <span data-ttu-id="b0058-184">Detta är nödvändigt om en klient värd förlorar anslutning eller nätverket fungerar.</span><span class="sxs-lookup"><span data-stu-id="b0058-184">This is necessary in the event of a Client host losing connectivity or the network doing down.</span></span> <span data-ttu-id="b0058-185">När tids gränsen för sessionen upphör att gälla, antas det att klienten inte längre är intresse rad eller kan göra DHCPv6-begäranden på servern.</span><span class="sxs-lookup"><span data-stu-id="b0058-185">When the session timeout expires, it is assumed the Client is either no longer interested or able to make DHCPv6 requests of the Server.</span></span> <span data-ttu-id="b0058-186">Servern tar bort klient posten och returnerar alla preliminärt tilldelade IPv6-adresser tillbaka till den tillgängliga poolen.</span><span class="sxs-lookup"><span data-stu-id="b0058-186">The Server deletes the Client record and returns any tentatively assigned IPv6 address back to the available pool.</span></span> <span data-ttu-id="b0058-187">Timeout för session är ett alternativ för användare som kan konfigureras.</span><span class="sxs-lookup"><span data-stu-id="b0058-187">The session timeout wait is a user configurable option.</span></span>

<span data-ttu-id="b0058-188">Om klienten vill frigöra sin IPv6-adress eller upptäcker att den IPv6-adress som tilldelats den av DHCPv6-servern redan används, skickar den en *version* eller *avböjer* meddelandet.</span><span class="sxs-lookup"><span data-stu-id="b0058-188">If the Client wishes to release its IPv6 address, or discovers that the IPv6 address assigned to it by the DHCPv6 Server is already in use, it send a *Release* or *Decline* message respectively.</span></span> <span data-ttu-id="b0058-189">Om det finns ett *release* -meddelande, returnerar servern att IPv6-adressens status tillbaka till den tillgängliga poolen.</span><span class="sxs-lookup"><span data-stu-id="b0058-189">In the case of a *Release* message, the Server returns that IPv6 address status back to the available pool.</span></span> <span data-ttu-id="b0058-190">Om meddelandet *nekas* uppdaterar den IP-adresslån för att indikera att denna IPv6-adress inte är tillgänglig (ägs av en annan entitet någon annan stans i nätverket).</span><span class="sxs-lookup"><span data-stu-id="b0058-190">In the case of the *Decline* message, it updates its IP lease table to indicate this IPv6 address is not available (owned by another entity elsewhere on the network).</span></span>

<span data-ttu-id="b0058-191">**IPv6-låne-och klient post data**</span><span class="sxs-lookup"><span data-stu-id="b0058-191">**IPv6 Lease and Client Record Data**</span></span>

<span data-ttu-id="b0058-192">När DHCPv6-servern börjar acceptera klient begär Anden, upprätthålls en lista över aktiva klienter som begär eller har tilldelats IPv6-adresser.</span><span class="sxs-lookup"><span data-stu-id="b0058-192">When the DHCPv6 Server starts accepting Client requests it maintains a list of active Clients who are requesting or have been assigned IPv6 addresses.</span></span> <span data-ttu-id="b0058-193">Servern kontrollerar att IP-lånet upphör att gälla med en låne timer som regelbundet uppdaterar klientens låne tid.</span><span class="sxs-lookup"><span data-stu-id="b0058-193">The Server checks for IP lease expiration by means of a lease timer that periodically updates the Client lease duration.</span></span> <span data-ttu-id="b0058-194">När giltighets tiden överskrider den giltiga livs längden rensar servern klient posten och returnerar IPv6-adressen tillbaka till den tillgängliga poolen.</span><span class="sxs-lookup"><span data-stu-id="b0058-194">When the duration exceeds the valid lifetime, the Server clears the Client record and returns its IPv6 address back to the available pool.</span></span> <span data-ttu-id="b0058-195">Det är upp till klienten som startar förnyelse/OMBINDNINGS processen innan detta händer!</span><span class="sxs-lookup"><span data-stu-id="b0058-195">It is up to the Client to start the renewal/rebinding process before this happens!</span></span>

<span data-ttu-id="b0058-196">NetX Duo DHCPv6 server Client Record-tabellen innehåller information för att identifiera klienter och "State"-information för att verifiera DHCPv6-klient begär Anden och tilldela eller omtilldela IPv6-adresser.</span><span class="sxs-lookup"><span data-stu-id="b0058-196">The NetX Duo DHCPv6 Server client record table contains information to identify Clients, and ‘state’ information for validating DHCPv6 Client requests and assigning or re-assigning IPv6 addresses.</span></span> <span data-ttu-id="b0058-197">Sådan information omfattar:</span><span class="sxs-lookup"><span data-stu-id="b0058-197">Such information includes:</span></span>

- <span data-ttu-id="b0058-198">Klientens DHCPv6-unika identifierare (DUID) som unikt definierar varje klient värd i ett nätverk.</span><span class="sxs-lookup"><span data-stu-id="b0058-198">The Client DHCPv6 Unique Identifier (DUID) which uniquely defines each Client host on a network.</span></span> <span data-ttu-id="b0058-199">Klienten måste alltid använda samma DUID för alla DHCPv6-meddelanden.</span><span class="sxs-lookup"><span data-stu-id="b0058-199">The Client must always use this same DUID for all its DHCPv6 messages.</span></span>

- <span data-ttu-id="b0058-200">Klient identitets associationen för icke-temporära adresser (IANA) och identitets associationens IPv6-adress (IA) ackumuleras i ackumulerad, som definierar parametrar för klientens IPv6-adress tilldelning.</span><span class="sxs-lookup"><span data-stu-id="b0058-200">The Client Identity Association for Non Temporary Addresses (IANA) and Identity Association IPv6 address (IA) cumulatively which define the Client IPv6 address assignment parameters.</span></span>

- <span data-ttu-id="b0058-201">Klient alternativ begär Anden (DNS-server, domän namn osv.).</span><span class="sxs-lookup"><span data-stu-id="b0058-201">Client option requests (DNS server, domain name, etc).</span></span>

- <span data-ttu-id="b0058-202">Klientens IPv6-källkod (om den är angiven) och mål adress (om inte multicast) av den senaste DHCPv6-begäran.</span><span class="sxs-lookup"><span data-stu-id="b0058-202">The Client IPv6 source address (if set) and destination address (if not multicast) of its most recent DHCPv6 request.</span></span>

- <span data-ttu-id="b0058-203">Klientens senaste meddelande typ och DHCPv6 ' State '.</span><span class="sxs-lookup"><span data-stu-id="b0058-203">The Client’s most recent message type and DHCPv6 ‘state’.</span></span>

## <a name="netx-duo-dhcpv6-server-requirements-and-constraints"></a><span data-ttu-id="b0058-204">NetX Duo DHCPv6-server krav och begränsningar</span><span class="sxs-lookup"><span data-stu-id="b0058-204">NetX Duo DHCPv6 Server Requirements and Constraints</span></span>

<span data-ttu-id="b0058-205">NetX Duo DHCPv6 server-API kräver ThreadX 5,1 eller senare, och NetX Duo 5,5 eller senare.</span><span class="sxs-lookup"><span data-stu-id="b0058-205">The NetX Duo DHCPv6 Server API requires ThreadX 5.1 or later, and NetX Duo 5.5 or later.</span></span>

<span data-ttu-id="b0058-206">**Krav**</span><span class="sxs-lookup"><span data-stu-id="b0058-206">**Requirements**</span></span>

<span data-ttu-id="b0058-207">***Konfiguration av IP-tråds aktivitet***</span><span class="sxs-lookup"><span data-stu-id="b0058-207">***IP Thread Task Setup***</span></span>

<span data-ttu-id="b0058-208">NetX Duo DHCPv6-servern kräver att en IP-instans skapas för att skicka och ta emot meddelanden till DHCPv6 på dess nätverks länk.</span><span class="sxs-lookup"><span data-stu-id="b0058-208">The NetX Duo DHCPv6 Server requires a creation of an IP instance for sending and receiving messages to DHCPv6 on its network link.</span></span> <span data-ttu-id="b0058-209">Detta görs med hjälp av tjänsten *nx_ip_create* .</span><span class="sxs-lookup"><span data-stu-id="b0058-209">This is done using the *nx_ip_create* service.</span></span> <span data-ttu-id="b0058-210">Du måste skapa en NetX Duo DHCPv6-server.</span><span class="sxs-lookup"><span data-stu-id="b0058-210">The NetX Duo DHCPv6 Server itself must be created.</span></span> <span data-ttu-id="b0058-211">Detta görs med hjälp av tjänsten *nx_dhcpv6_server_create* .</span><span class="sxs-lookup"><span data-stu-id="b0058-211">This is done using the *nx_dhcpv6_server_create* service.</span></span>

<span data-ttu-id="b0058-212">DHCPv6 använder NetX Duo, ICMPv6 och UDP.</span><span class="sxs-lookup"><span data-stu-id="b0058-212">DHCPv6 utilizes NetX Duo, ICMPv6 and UDP.</span></span> <span data-ttu-id="b0058-213">Därför måste IPv6 först aktive ras innan du använder DHCPv6-servern genom att anropa följande NetX Duo-tjänster:</span><span class="sxs-lookup"><span data-stu-id="b0058-213">Therefore IPv6 must first be enabled prior to using DHCPv6 Server by calling the following NetX Duo services:</span></span>

- <span data-ttu-id="b0058-214">*nx_udp_enable*</span><span class="sxs-lookup"><span data-stu-id="b0058-214">*nx_udp_enable*</span></span>
- <span data-ttu-id="b0058-215">*nxd_ipv6_enable*</span><span class="sxs-lookup"><span data-stu-id="b0058-215">*nxd_ipv6_enable*</span></span>
- <span data-ttu-id="b0058-216">*nxd_icmp_enable*</span><span class="sxs-lookup"><span data-stu-id="b0058-216">*nxd_icmp_enable*</span></span>

<span data-ttu-id="b0058-217">Innan DHCPv6-servern kan startas finns det ett antal konfigurations åtgärder som du kan utföra:</span><span class="sxs-lookup"><span data-stu-id="b0058-217">Further, before the DHCPv6 Server can be started, it has a number of set up tasks to perform:</span></span>

- <span data-ttu-id="b0058-218">Skapa och verifiera dess globala och globala IPv6-adresser.</span><span class="sxs-lookup"><span data-stu-id="b0058-218">Create and validate its link local and IPv6 global addresses.</span></span> <span data-ttu-id="b0058-219">Adress verifiering utförs automatiskt av NetX Duo med hjälp av dubblettidentifiering om den är aktive rad.</span><span class="sxs-lookup"><span data-stu-id="b0058-219">Address validation is performed automatically by NetX Duo using Duplicate Address Detection if it is enabled.</span></span> <span data-ttu-id="b0058-220">I *användar handboken för netx Duo* finns mer information om hur du länkar lokala och globala IP-adresser verifierar.</span><span class="sxs-lookup"><span data-stu-id="b0058-220">See the *NetX Duo User Manual* for details on link local and global IP address validation.</span></span>

- <span data-ttu-id="b0058-221">Ange Nätverks gränssnittets index för DHCPv6-gränssnittet.</span><span class="sxs-lookup"><span data-stu-id="b0058-221">Set the network interface index for its DHCPv6 interface.</span></span>

- <span data-ttu-id="b0058-222">Skapa ett IP-adressintervall för tilldelnings bara IPv6-adresser.</span><span class="sxs-lookup"><span data-stu-id="b0058-222">Create an IP address range for assignable IPv6 addresses.</span></span> <span data-ttu-id="b0058-223">Eller, om det finns data från en tidigare Server-DHCPv6-session, måste IPv6-låne tabell och klient poster från den sessionen laddas upp från icke-flyktigt minne till DHCPv6-servern.</span><span class="sxs-lookup"><span data-stu-id="b0058-223">Or, if data exists from a previous Server DHCPv6 session, IPv6 lease table and client records from that session must be uploaded from non volatile memory to the DHCPv6 Server.</span></span> <span data-ttu-id="b0058-224">Det lilla exempel systemet i det här dokumentet visar DHCPv6-server tjänsterna för att uppnå detta krav.</span><span class="sxs-lookup"><span data-stu-id="b0058-224">The small example system elsewhere in this document will demonstrate the DHCPv6 Server services for accomplishing this requirement.</span></span>

- <span data-ttu-id="b0058-225">Ange serverns DUID.</span><span class="sxs-lookup"><span data-stu-id="b0058-225">Set the Server DUID.</span></span> <span data-ttu-id="b0058-226">Om servern har skapat ett DUID i en tidigare session måste den använda samma data för att skapa samma DUID för meddelanden till sina klienter.</span><span class="sxs-lookup"><span data-stu-id="b0058-226">If the Server has created its DUID in a previous session it must use the same data to create the same DUID for messages to its Clients.</span></span> <span data-ttu-id="b0058-227">Det lilla exempel systemet i det här dokumentet visar hur detta krav uppnås.</span><span class="sxs-lookup"><span data-stu-id="b0058-227">The small example system elsewhere in this document will demonstrate how this requirement is accomplished.</span></span>

<span data-ttu-id="b0058-228">DHCPv6-servern är nu klar att köras.</span><span class="sxs-lookup"><span data-stu-id="b0058-228">At this point the DHCPv6 Server is ready to run.</span></span> <span data-ttu-id="b0058-229">Internt NetX Duo DHCPv6-servern skapar en UDP-socket som är kopplad till port 547 och börjar lyssna efter klient begär Anden.</span><span class="sxs-lookup"><span data-stu-id="b0058-229">Internally the NetX Duo DHCPv6 Server will create a UDP socket bound to port 547, and starts listening for Client requests.</span></span>

<span data-ttu-id="b0058-230">***Krav för paket pool***</span><span class="sxs-lookup"><span data-stu-id="b0058-230">***Packet Pool Requirements***</span></span>

<span data-ttu-id="b0058-231">NetX Duo DHCPv6-servern kräver en modempool för att skicka DHCPv6-meddelanden.</span><span class="sxs-lookup"><span data-stu-id="b0058-231">NetX Duo DHCPv6 Server requires a packet pool for sending DHCPv6 messages.</span></span> <span data-ttu-id="b0058-232">Storleken på modempoolen när det gäller paketets nytto last och antalet tillgängliga paket är att användaren kan konfigureras och är beroende av den förväntade volymen av DHCPv6-meddelanden och andra sändningar som värd programmet kommer att skicka.</span><span class="sxs-lookup"><span data-stu-id="b0058-232">The size of the packet pool in terms of packet payload and number of packets available is user configurable, and depends on the anticipated volume of DHCPv6 messages and other transmissions the host application will be sending.</span></span>

<span data-ttu-id="b0058-233">Ett typiskt DHCPv6-meddelande är ungefär 200-300 byte beroende på antalet ytterligare alternativ som begärs av klienten och information som är tillgänglig från servern.</span><span class="sxs-lookup"><span data-stu-id="b0058-233">A typical DHCPv6 message is about 200-300 bytes depending on the number of additional options requested by the Client, and information available from the Server.</span></span>

<span data-ttu-id="b0058-234">***Ange DHCPv6-server gränssnittet***</span><span class="sxs-lookup"><span data-stu-id="b0058-234">***Setting the DHCPv6 Server interface***</span></span>

<span data-ttu-id="b0058-235">DHCPv6-servern som standard är det primära nätverks gränssnittet som gränssnitt som tar emot klient begär Anden på.</span><span class="sxs-lookup"><span data-stu-id="b0058-235">The DHCPv6 Server defaults to the primary network interface as the interface it will accept Client requests on.</span></span> <span data-ttu-id="b0058-236">Värd programmet måste dock fortfarande ange det globala adress index som det använde för att skapa serverns globala adress.</span><span class="sxs-lookup"><span data-stu-id="b0058-236">However, the host application must still set the global address index which it used to create the Server global address.</span></span> <span data-ttu-id="b0058-237">DHCPv6-gränssnittets index och globala adress index anges med tjänsten *nx_dhcpv6_server_interface_set* .</span><span class="sxs-lookup"><span data-stu-id="b0058-237">The DHCPv6 interface index and global address index are set using the *nx_dhcpv6_server_interface_set* service.</span></span> <span data-ttu-id="b0058-238">Detta visas också i det "små exemplet" i det här dokumentet.</span><span class="sxs-lookup"><span data-stu-id="b0058-238">This is also demonstrated in the “small example” in this document.</span></span>

<span data-ttu-id="b0058-239">***Spara DHCPv6 DUID för omstart av Server***</span><span class="sxs-lookup"><span data-stu-id="b0058-239">***Saving DHCPv6 DUID across Server Reboots***</span></span>

<span data-ttu-id="b0058-240">DHCPv6-protokollet kräver att servern använder samma DUID i flera omstarter.</span><span class="sxs-lookup"><span data-stu-id="b0058-240">The DHCPv6 protocol requires the Server to use the same DUID across multiple reboots.</span></span> <span data-ttu-id="b0058-241">Alla data som används för att skapa DUID måste därför lagras och hämtas från ej beständigt minne för detta krav.</span><span class="sxs-lookup"><span data-stu-id="b0058-241">Any data used to create the DUID must therefore be stored and retrieved from nonvolatile memory for this requirement.</span></span> <span data-ttu-id="b0058-242">För värdar som använder länk skiktet plus tids DUID som kräver åtkomst till en real tids klocka.</span><span class="sxs-lookup"><span data-stu-id="b0058-242">For hosts that use the Link Layer Plus Time DUID which requires access to a real time clock.</span></span> <span data-ttu-id="b0058-243">NetX Duo DHCPv6-värd programmet ska innehålla real tids data åtkomst för att generera ett tids värde för att skapa ett tids värde för den första servern för att skapa DUID och lagra dessa data för åter användning på efterföljande Server sessioner.</span><span class="sxs-lookup"><span data-stu-id="b0058-243">The NetX Duo DHCPv6 host application should include real time data access for generating a time value for the initial Server DUID creation, and store that data for reuse on subsequent Server sessions.</span></span> <span data-ttu-id="b0058-244">*Nx_dhcpv6_set_server_duid* tar sedan DUID-data som argument, samt konfigurations alternativ beroende på DUID-typ, för att producera (eller återskapa) sitt eget DUID.</span><span class="sxs-lookup"><span data-stu-id="b0058-244">The *nx_dhcpv6_set_server_duid* then takes DUID data as its arguments, as well as configuration options depending on DUID type, to produce (or reproduce) its own DUID.</span></span>

<span data-ttu-id="b0058-245">***Skapa tilldelnings bara IPv6-adress lista***</span><span class="sxs-lookup"><span data-stu-id="b0058-245">***Assignable IPv6 Address List Creation***</span></span>

<span data-ttu-id="b0058-246">När DHCPv6-servern har skapats måste Server värd programmet skapa ett intervall med globala IPv6-adresser för tilldelning om det inte finns några tidigare lagrade IP-adress list data.</span><span class="sxs-lookup"><span data-stu-id="b0058-246">After creation of the DHCPv6 Server, the Server host application must create a range of assignable IPv6 global addresses if there is no previously stored IP address list data.</span></span> <span data-ttu-id="b0058-247">Detta görs med hjälp av tjänsten *nx_dhcpv6_create_ip_address_range* som tar sig in som en inledande och avslutande IPv6-adress.</span><span class="sxs-lookup"><span data-stu-id="b0058-247">This is done using the *nx_dhcpv6_create_ip_address_range* service which takes as input a starting and ending IPv6 address.</span></span>

<span data-ttu-id="b0058-248">***Sparar DHCPv6 tilldelnings bara adresser och klient data***</span><span class="sxs-lookup"><span data-stu-id="b0058-248">***Saving DHCPv6 Assignable Address and Client data***</span></span>

<span data-ttu-id="b0058-249">DHCPv6-protokollet kräver att DHCPv6-servern sparar sina klient-och IPv6-Datadata i beständigt lagrings utrymme i händelse av omstart av servern.</span><span class="sxs-lookup"><span data-stu-id="b0058-249">The DHCPv6 protocol requires that the DHCPv6 Server save its Client and IPv6 address data in nonvolatile storage in the event of rebooting the server.</span></span> <span data-ttu-id="b0058-250">NetX Duo DHCPv6-servern har flera API: er för att ladda upp och ladda ned klient-och IPv6-adress data till och från DHCPv6-servern:</span><span class="sxs-lookup"><span data-stu-id="b0058-250">The NetX Duo DHCPv6 Server has several API for uploading and downloading Client and IPv6 address data to and from the DHCPv6 Server, respectively:</span></span>

<span data-ttu-id="b0058-251">*nx_dhcpv6_add_client_record*</span><span class="sxs-lookup"><span data-stu-id="b0058-251">*nx_dhcpv6_add_client_record*</span></span>

<span data-ttu-id="b0058-252">*nx_dhcpv6_add_ip_address_lease*</span><span class="sxs-lookup"><span data-stu-id="b0058-252">*nx_dhcpv6_add_ip_address_lease*</span></span>

<span data-ttu-id="b0058-253">*nx_dhcpv6_retrieve_client_record*</span><span class="sxs-lookup"><span data-stu-id="b0058-253">*nx_dhcpv6_retrieve_client_record*</span></span>

<span data-ttu-id="b0058-254">*nx_dhcpv6_retrieve_ip_address_lease*</span><span class="sxs-lookup"><span data-stu-id="b0058-254">*nx_dhcpv6_retrieve_ip_address_lease*</span></span>

<span data-ttu-id="b0058-255">Överföring av data till servern måste göras innan servern startas om.</span><span class="sxs-lookup"><span data-stu-id="b0058-255">Uploading data to the Server must be done before restarting the Server.</span></span> <span data-ttu-id="b0058-256">Hämtning av data bör bara utföras efter att DHCPv6-servern har stoppats (eller skjutits upp).</span><span class="sxs-lookup"><span data-stu-id="b0058-256">Downloading the data should be done only after the DHCPv6 Server is stopped (or suspended).</span></span> <span data-ttu-id="b0058-257">Tjänsterna för att göra detta beskrivs i detalj senare i det här dokumentet.</span><span class="sxs-lookup"><span data-stu-id="b0058-257">The services for doing so are described in detail later in this document.</span></span> <span data-ttu-id="b0058-258">Men NetX Duo DHCPv6 ger ingen åtkomst till icke-flyktig lagring.</span><span class="sxs-lookup"><span data-stu-id="b0058-258">However, the NetX Duo DHCPv6 provides does not define an access to nonvolatile storage.</span></span> <span data-ttu-id="b0058-259">Detta måste hanteras av värd programmet.</span><span class="sxs-lookup"><span data-stu-id="b0058-259">This must be handled by the host application.</span></span> <span data-ttu-id="b0058-260">Det lilla exemplet visar hur värd programmet gör detta.</span><span class="sxs-lookup"><span data-stu-id="b0058-260">The small example demonstrates how the host application does this.</span></span>

<span data-ttu-id="b0058-261">***Serverns DHCP-unika identifierare (DUID)***</span><span class="sxs-lookup"><span data-stu-id="b0058-261">***Server DHCP Unique Identifier (DUID)***</span></span>

<span data-ttu-id="b0058-262">Serverns DUID definierar unikt DHCPv6-server värden i nätverket.</span><span class="sxs-lookup"><span data-stu-id="b0058-262">The Server DUID uniquely defines the DHCPv6 Server host on the network.</span></span> <span data-ttu-id="b0058-263">Om en server inte har skapat sitt DUID tidigare kan den använda *nx_dhcpv6_server_set_duid* för att skapa en.</span><span class="sxs-lookup"><span data-stu-id="b0058-263">If a Server has not previously created its DUID, it can use the *nx_dhcpv6_server_set_duid* to create one.</span></span> <span data-ttu-id="b0058-264">Som enligt RFC 3315 måste DHCPv6-servern Spara DUID till ett beständigt minne för att kunna hämta det efter att servern har startats om.</span><span class="sxs-lookup"><span data-stu-id="b0058-264">As per RFC 3315, the DHCPv6 Server must save this DUID to nonvolatile memory to be able to retrieve it after Server reboots.</span></span> <span data-ttu-id="b0058-265">DHCPv6-servern har stöd för länk skiktet, länk skikt tid och företags (tilldelad) DUID-typer.</span><span class="sxs-lookup"><span data-stu-id="b0058-265">The DHCPv6 Server supports the Link Layer, Link Layer Time and Enterprise (Vendor assigned) DUID types.</span></span> <span data-ttu-id="b0058-266">Observera att klienten måste skicka ett DUID för leverantörs typ direkt.</span><span class="sxs-lookup"><span data-stu-id="b0058-266">Note that the Client must send in the Vendor type DUID directly.</span></span> <span data-ttu-id="b0058-267">Alternativet för leverantörs typen DUIDs (17) stöds inte direkt av NetX Duo DHPv6-servern.</span><span class="sxs-lookup"><span data-stu-id="b0058-267">The option for Vendor type DUIDs (17) is not directly supported by the NetX Duo DHPv6 Server.</span></span>

<span data-ttu-id="b0058-268">DHCPv6-serverns värd program har standardvärden för IPv6-adress tilldelning, inklusive låne tids gräns.</span><span class="sxs-lookup"><span data-stu-id="b0058-268">The DHCPv6 Server host application has default values for IPv6 address assignment including lease timeout.</span></span> <span data-ttu-id="b0058-269">Mer information om hur du ställer in dessa alternativ finns i alternativ för att konfigurera senare i det här dokumentet.</span><span class="sxs-lookup"><span data-stu-id="b0058-269">See Configurable Options later in this document for how to set these options.</span></span> <span data-ttu-id="b0058-270">:</span><span class="sxs-lookup"><span data-stu-id="b0058-270">:</span></span>

<span data-ttu-id="b0058-271">*IANA* -kontroll blocket innehåller T1-och T2-fälten.</span><span class="sxs-lookup"><span data-stu-id="b0058-271">The *IANA* control block contains the T1 and T2 fields.</span></span> <span data-ttu-id="b0058-272">*IA* -blocket i *IANA* -kontroll blocket innehåller de önskade och giltiga livstids fälten.</span><span class="sxs-lookup"><span data-stu-id="b0058-272">The *IA* block in the *IANA* control block contains the preferred and valid lifetime fields.</span></span> <span data-ttu-id="b0058-273">Värd programmet har konfigurerbara alternativ som definierats någon annan stans i det här dokumentet för att ställa in dessa alternativ.</span><span class="sxs-lookup"><span data-stu-id="b0058-273">The host application has configurable options defined elsewhere in this document for setting these options.</span></span> <span data-ttu-id="b0058-274">De tilldelas alla klienters IPv6-adress begär Anden.</span><span class="sxs-lookup"><span data-stu-id="b0058-274">They are assigned to all Client IPv6 address requests.</span></span>

<span data-ttu-id="b0058-275">Dessa parametrar för DHCPv6 IP-leasing definieras nedan.</span><span class="sxs-lookup"><span data-stu-id="b0058-275">These DHCPv6 IP lease parameters are defined below.</span></span>

<span data-ttu-id="b0058-276">T1 – tid i sekunder när klienten måste påbörja förnyelse av sin IPv6-adress från den server som tilldelade den.</span><span class="sxs-lookup"><span data-stu-id="b0058-276">T1 – time in seconds when the Client must start renewing its IPv6 address from the Server that assigned it.</span></span>

<span data-ttu-id="b0058-277">T2 – tiden i sekunder när klienten måste starta ombindningen av IPv6-adressen, om förnyelsen misslyckades, med valfri server på dess länk.</span><span class="sxs-lookup"><span data-stu-id="b0058-277">T2 – time in seconds when the Client must start rebinding the IPv6 address, if renewal failed, with any Server on its link.</span></span>

<span data-ttu-id="b0058-278">Önskad livs längd – tiden i sekunder då klient adressen blir föråldrad om klienten inte har förnyat eller kopplat från den.</span><span class="sxs-lookup"><span data-stu-id="b0058-278">Preferred lifetime – time in seconds when the Client address becomes deprecated if the Client has not renewed or rebound it.</span></span> <span data-ttu-id="b0058-279">Klienten kan fortfarande använda den här adressen.</span><span class="sxs-lookup"><span data-stu-id="b0058-279">The Client can still use this address.</span></span>

<span data-ttu-id="b0058-280">Giltig livstid – tiden i sekunder när klientens IP-adress har upphört att gälla och får inte använda den här adressen i dess nätverks överföring.</span><span class="sxs-lookup"><span data-stu-id="b0058-280">Valid lifetime – time in seconds when the Client IP address is expired and MUST not use this address in its network transmissions.</span></span>

<span data-ttu-id="b0058-281">RFC rekommenderar T1-och T2-tider som är 0,5 respektive 0,8 för den önskade livs längden i alternativet klient- *IANA* .</span><span class="sxs-lookup"><span data-stu-id="b0058-281">The RFC recommends T1 and T2 times that are 0.5 and 0.8, respectively, of the preferred lifetime in the Client *IANA* option.</span></span> <span data-ttu-id="b0058-282">Om servern inte har någon inställning bör den ställa in dessa tider på noll.</span><span class="sxs-lookup"><span data-stu-id="b0058-282">If the Server has no preference, it should set these times to zero.</span></span> <span data-ttu-id="b0058-283">Om ett Server svar innehåller T1 och T2-tider har angetts till noll, låter klienten ange sina egna T1-och T2-tider.</span><span class="sxs-lookup"><span data-stu-id="b0058-283">If a Server reply contains T1 and T2 times set to zero, it is letting the Client set its own T1 and T2 times.</span></span>

<span data-ttu-id="b0058-284">**Restriktioner**</span><span class="sxs-lookup"><span data-stu-id="b0058-284">**Constraints**</span></span>

<span data-ttu-id="b0058-285">NetX Duo DHCPv6-servern stöder inte följande DHCPv6-alternativ:</span><span class="sxs-lookup"><span data-stu-id="b0058-285">NetX Duo DHCPv6 Server does not support the following DHCPv6 options:</span></span>

  - <span data-ttu-id="b0058-286">Snabbt inchecknings alternativ som optimerar DHCPv6-adressens begär ande process till enbart Inbjudnings-och svars meddelande utbytet</span><span class="sxs-lookup"><span data-stu-id="b0058-286">Rapid Commit option which optimizes the DHCPv6 address request process to just the Solicit and Reply message exchange</span></span>

  - <span data-ttu-id="b0058-287">Konfigurera om alternativet som gör att servern kan initiera ändringar i klientens IP-adress status.</span><span class="sxs-lookup"><span data-stu-id="b0058-287">Reconfigure option which allows the Server can initiate changes to the Client’s IP address status.</span></span>

  - <span data-ttu-id="b0058-288">Unicast-alternativ; alla klient meddelanden måste skickas till *All_DHCP_Relay_Agents_and_Servers* multicast-adress i stället för till DHCPv6-servern direkt.</span><span class="sxs-lookup"><span data-stu-id="b0058-288">Unicast option; all Client messages must be sent to the *All_DHCP_Relay_Agents_and_Servers* multicast address rather than to the DHCPv6 Server directly.</span></span>

  - <span data-ttu-id="b0058-289">Identitets Association för alternativet temporära adresser (IA_TA) som är en tillfällig IP-adress som beviljas till en klient.</span><span class="sxs-lookup"><span data-stu-id="b0058-289">Identity Association for the Temporary Addresses(IA_TA)option which is a temporary IP address granted to a Client.</span></span>

  - <span data-ttu-id="b0058-290">Alternativ för flera IA (IPv6-adresser) per klient förfrågan</span><span class="sxs-lookup"><span data-stu-id="b0058-290">Multiple IA (IPv6 addresses) options per Client Request</span></span>

  - <span data-ttu-id="b0058-291">Relä värden mellan DHCPv6-klienten och-servern, t. ex. klienten och servern måste finnas i samma nätverk.</span><span class="sxs-lookup"><span data-stu-id="b0058-291">Relay host between DHCPv6 Client and Server e.g. Client and Server must be on the same network.</span></span>

  - <span data-ttu-id="b0058-292">IPSec och autentisering stöds inte i DHCPv6-meddelanden.</span><span class="sxs-lookup"><span data-stu-id="b0058-292">IPSec and Authentication are not supported in DHCPv6 messaging.</span></span> <span data-ttu-id="b0058-293">IP-instansen kan dock vara IPSec-aktiverad beroende på vilken version av NetX Duo som används.</span><span class="sxs-lookup"><span data-stu-id="b0058-293">However, the IP instance may be IPSec enabled depending on the version of NetX Duo in use.</span></span>

  - <span data-ttu-id="b0058-294">NetX Duo DHCPv6-servern stöder direkt endast DNS-Server Option-begäran.</span><span class="sxs-lookup"><span data-stu-id="b0058-294">The NetX Duo DHCPv6 Server directly supports only the DNS server option request.</span></span> <span data-ttu-id="b0058-295">Detta kan ändras i framtida versioner.</span><span class="sxs-lookup"><span data-stu-id="b0058-295">This may change in future releases.</span></span>

  - <span data-ttu-id="b0058-296">Alternativet för att delegera prefix stöds inte.</span><span class="sxs-lookup"><span data-stu-id="b0058-296">The Prefix Delegation option is not supported.</span></span>

  - <span data-ttu-id="b0058-297">Autentisering av DHCPv6-meddelanden även om IPSec kan aktive ras i den underliggande NetX Duo-miljön.</span><span class="sxs-lookup"><span data-stu-id="b0058-297">Authentication of DHCPv6 messages although IPSec can be enabled in the underlying NetX Duo environment.</span></span> <span data-ttu-id="b0058-298">Varken NetX Duo DHCPv6-servern stöder relä anslutningar till klienterna.</span><span class="sxs-lookup"><span data-stu-id="b0058-298">Neither does the NetX Duo DHCPv6 Server support relay connections to the Clients.</span></span> <span data-ttu-id="b0058-299">Det förutsätts att alla klient begär Anden kommer från värdar i Server nätverket.</span><span class="sxs-lookup"><span data-stu-id="b0058-299">It is assumed all Client requests originate from hosts on the Server network.</span></span>

## <a name="netx-duo-dhcpv6-server-callback-functions"></a><span data-ttu-id="b0058-300">NetX Duo DHCPv6-serverns återanrops funktioner</span><span class="sxs-lookup"><span data-stu-id="b0058-300">NetX Duo DHCPv6 Server Callback Functions</span></span>

<span data-ttu-id="b0058-301">*nx_dhcpv6_IP_address_declined_handler*</span><span class="sxs-lookup"><span data-stu-id="b0058-301">*nx_dhcpv6_IP_address_declined_handler*</span></span>

<span data-ttu-id="b0058-302">När DHCPv6-klienten skickar ett neka-meddelande, markerar NetX Duo DHCPv6-servern adressen som inte tillgänglig i dess IPv6-adress tabeller.</span><span class="sxs-lookup"><span data-stu-id="b0058-302">When the DHCPv6 Client sends a Decline message, the NetX Duo DHCPv6 Server marks the address as not available in its IPv6 address tables.</span></span> <span data-ttu-id="b0058-303">För att kunna anpassa Server hanteringen av det här meddelandet tillhandahålls *nx_dhcpv6_IP_address_declined_handler* *.*</span><span class="sxs-lookup"><span data-stu-id="b0058-303">To have the ability to customize the Server handling of this message, the *nx_dhcpv6_IP_address_declined_handler* is provided *.*</span></span> <span data-ttu-id="b0058-304">Detta återanrop är dock inte implementerat för närvarande.</span><span class="sxs-lookup"><span data-stu-id="b0058-304">However, this callback is not currently implemented.</span></span>

<span data-ttu-id="b0058-305">*nx_dhcpv6_server_option_request_handler*</span><span class="sxs-lookup"><span data-stu-id="b0058-305">*nx_dhcpv6_server_option_request_handler*</span></span>

<span data-ttu-id="b0058-306">När DHCPv6-klient meddelandet innehåller alternativ begär ande data, vidarebefordrar NetX Duo DHCPv6-servern varje alternativ kod för alternativ begär Ande till den här användaren, om den har definierats.</span><span class="sxs-lookup"><span data-stu-id="b0058-306">When the DHCPv6 Client message contains option request data, the NetX Duo DHCPv6 Server forwards each option request option code to this user callback, if defined.</span></span> <span data-ttu-id="b0058-307">Detta ger NetX Duo-servern möjlighet att låta användardefinierad motringning fylla i data.</span><span class="sxs-lookup"><span data-stu-id="b0058-307">This gives the NetX Duo Server the capability to let the user defined callback fill in the data.</span></span> <span data-ttu-id="b0058-308">Den här funktionen är dock inte implementerad för närvarande.</span><span class="sxs-lookup"><span data-stu-id="b0058-308">However this functionality is not currently implemented.</span></span>

## <a name="supported-dhcpv6-rfcs"></a><span data-ttu-id="b0058-309">DHCPv6-RFC: er som stöds</span><span class="sxs-lookup"><span data-stu-id="b0058-309">Supported DHCPv6 RFCs</span></span>

<span data-ttu-id="b0058-310">NetX Duo DHCPv6 är kompatibelt med RFC3315, RFC3646 och relaterade RFC: er.</span><span class="sxs-lookup"><span data-stu-id="b0058-310">NetX Duo DHCPv6 is compliant with RFC3315, RFC3646, and related RFCs.</span></span>