---
title: Kapitel 1 – Introduktion till Azure återställnings tider NetX Duo DHCPv6-klienten
description: I IPv6-nätverk ersätter DHCPv6 DHCP för dynamisk global IP-adresstilldelning från en DHCPv6-server och erbjuder de flesta av samma funktioner och många förbättringar.
author: philmea
ms.author: philmea
ms.date: 06/04/2020
ms.topic: article
ms.service: rtos
ms.openlocfilehash: 3bf3b52c53bb26e2c9c2c736ae35817eb967f609
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 03/22/2021
ms.locfileid: "104826097"
---
# <a name="chapter-1---introduction-to-azure-rtos-netx-duo-dhcpv6-client"></a><span data-ttu-id="7b5ef-103">Kapitel 1 – Introduktion till Azure återställnings tider NetX Duo DHCPv6-klienten</span><span class="sxs-lookup"><span data-stu-id="7b5ef-103">Chapter 1 - Introduction to Azure RTOS NetX Duo DHCPv6 Client</span></span>

<span data-ttu-id="7b5ef-104">I IPv6-nätverk ersätter DHCPv6 DHCP för dynamisk global IP-adresstilldelning från en DHCPv6-server och erbjuder de flesta av samma funktioner och många förbättringar.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-104">In IPv6 networks, DHCPv6 replaces DHCP for dynamic global IP address assignment from a DHCPv6 Server, and offers most of the same features as well as many enhancements.</span></span> <span data-ttu-id="7b5ef-105">Det här dokumentet beskriver i detalj hur Azure återställnings tider NetX Duo DHCPv6 client API används för att hämta IPv6-adresser.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-105">This document will explain in detail how the Azure RTOS NetX Duo DHCPv6 Client API is used to obtain IPv6 addresses.</span></span>

## <a name="dhcpv6-communication"></a><span data-ttu-id="7b5ef-106">DHCPv6-kommunikation</span><span class="sxs-lookup"><span data-stu-id="7b5ef-106">DHCPv6 Communication</span></span>

<span data-ttu-id="7b5ef-107">DHCPv6-protokollet använder UDP.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-107">The DHCPv6 protocol uses UDP.</span></span> <span data-ttu-id="7b5ef-108">Klienten använder port 546 och servern använder port 547 för att skicka DHCPv6-meddelanden.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-108">The Client uses port 546 and the Server uses port 547 to exchange DHCPv6 messages.</span></span> <span data-ttu-id="7b5ef-109">Klienten använder sin länk lokala adress för en käll adress för att initiera DHCPv6-begäranden till tillgängliga DHCPv6-servrar.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-109">The Client uses its link local address for a source address to initiate the DHCPv6 requests to the DHCPv6 server(s) available.</span></span> <span data-ttu-id="7b5ef-110">När klienten skickar meddelanden som är avsedda för alla DHCPv6-servrar i nätverket använder den *All_DHCP_Relay_Agents_and_Servers* multicast- *FF02:: 01:02*.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-110">When the Client sends messages intended for all DHCPv6 servers on the network it uses the *All_DHCP_Relay_Agents_and_Servers* multicast address *FF02::01:02*.</span></span> <span data-ttu-id="7b5ef-111">Detta är en reserverad, länkad multicast-adress.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-111">This is a reserved, link-scoped multicast address.</span></span>

## <a name="dhcpv6-process-of-requesting-an-ipv6-address"></a><span data-ttu-id="7b5ef-112">DHCPv6-process för att begära en IPv6-adress</span><span class="sxs-lookup"><span data-stu-id="7b5ef-112">DHCPv6 Process of Requesting an IPv6 Address</span></span>

<span data-ttu-id="7b5ef-113">För att starta processen med att begära en global IPv6-adress tilldelning skickar klienten först ett VÄRVNINGs meddelande med hjälp av tjänsten *nx_dhcpv6_send_solicit* :</span><span class="sxs-lookup"><span data-stu-id="7b5ef-113">To begin the process of requesting a global IPv6 address assignment, a Client first sends a SOLICIT message using the *nx_dhcpv6_send_solicit* service:</span></span>

<span data-ttu-id="7b5ef-114">**UINT nx_dhcpv6_request_solicit (NX_DHCPV6 \* dhcpv6_ptr)**</span><span class="sxs-lookup"><span data-stu-id="7b5ef-114">**UINT nx_dhcpv6_request_solicit(NX_DHCPV6 \*dhcpv6_ptr)**</span></span>

<span data-ttu-id="7b5ef-115">Det här meddelandet skickas till alla servrar som använder *All_DHCP_Relay_Agents_and_Servers* -adressen.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-115">This message is sent to all servers using the *All_DHCP_Relay_Agents_and_Servers* address.</span></span> <span data-ttu-id="7b5ef-116">Klienten kan begära tilldelningen av vissa IPv6-adresser som ett tips till-servern i begäran om begär Ande.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-116">In the SOLICIT request, the Client may request the assignment of specific IPv6 address(es) as a hint to the Server.</span></span> <span data-ttu-id="7b5ef-117">Den kan också begära annan konfigurations information för nätverket från-servern, till exempel DNS-server, NTP-server och andra alternativ i option-begäran i det EFTERFRÅGAde meddelandet.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-117">It can also request other network configuration information from the Server such as DNS server, NTP server and other options in the Option Request in the SOLICIT message.</span></span>

<span data-ttu-id="7b5ef-118">En DHCPv6-server som kan betjäna en klientbegäran svarar med ett ANNONSERINGs meddelande som innehåller de IPv6-adresser som kan tilldelas till klienten, IPv6-adressens låne tid och eventuell ytterligare information som begärs av klienten.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-118">A DHCPv6 Server that can service a Client request responds with an ADVERTISE message containing the IPv6 address(es) it can assign to the Client, the IPv6 address lease time and any additional information requested by the Client.</span></span> <span data-ttu-id="7b5ef-119">DHCPv6-klient protokollet kräver att klienten väntar under en tids period att ta emot ANNONSERINGs meddelanden från alla DHCPv6-servrar i nätverket.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-119">The DHCPv6 Client protocol requires the Client to wait for a period of time to receive ADVERTISE messages from all DHCPv6 Servers on the network.</span></span> <span data-ttu-id="7b5ef-120">Den förbearbetar varje ANNONSERINGs meddelande som ett giltigt meddelande och skannar alternativ data för olika DHCPv6-parametrar.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-120">It pre-processes each ADVERTISE message to be a valid message, and scans the option data for various DHCPv6 parameters.</span></span> <span data-ttu-id="7b5ef-121">Det kontrollerar också Preference-värdet i alternativet Preference, om det tillhandahålls av servern.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-121">It also checks the Preference value in the Preference Option, if supplied by the Server.</span></span> <span data-ttu-id="7b5ef-122">Om fler än ett ANNONSERINGs meddelande tas emot väljer DHCPv6-klienten NetX servern med det högsta preferens svärdet som togs emot i slutet av vänte perioden.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-122">If more than one ADVERTISE message is received, the NetX DHCPv6 Client chooses the Server with the highest preference value received by the end of the wait period.</span></span>

<span data-ttu-id="7b5ef-123">Undantaget är om klienten får ett ANNONSERINGs meddelande med Preference-värdet 255.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-123">The exception is if the Client receives an ADVERTISE message with a preference value of 255.</span></span> <span data-ttu-id="7b5ef-124">Detta meddelande accepteras omedelbart och alla efterföljande ANNONSERINGs meddelanden ignoreras.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-124">It accepts that message immediately and discards all subsequent ADVERTISE messages.</span></span>

<span data-ttu-id="7b5ef-125">Vänte tiden definieras som den återöverförings period som DHCPv6-klienten väntar innan ett annat EFTERFRÅGAt meddelande skickas, om den inte har fått något svar från någon server.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-125">The wait period is defined as the retransmission period that the DHCPv6 Client waits before sending another SOLICIT message if it has not received a response from any Server.</span></span> <span data-ttu-id="7b5ef-126">Den inledande tids gränsen för återöverföring i status för SOLICIT definieras av DHCPv6-protokollet som beskrivs i RFC 3315 som 1 sekund.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-126">The initial retransmission timeout in the SOLICIT state is defined by to the DHCPv6 protocol described in RFC 3315 to be 1 second.</span></span> <span data-ttu-id="7b5ef-127">Efterföljande återöverförings intervall, om DHCPv6-klienten Miss lyckas med att ta emot ett giltigt Server svar, dubbleras upp till högst 120 sekunder.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-127">Subsequent retransmission intervals, if the DHCPv6 Client fails to receive a valid Server response, are doubled up to a maximum of 120 seconds.</span></span>

<span data-ttu-id="7b5ef-128">När du har valt-servern extraherar klienten data från annons meddelandet och skickar ett meddelande tillbaka till servern för att acceptera den tilldelade adress informationen och låne tiderna.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-128">Having chosen the Server, the Client extracts data from the ADVERTISE message and sends a REQUEST message back to the Server to accept the assigned address information and lease times.</span></span> <span data-ttu-id="7b5ef-129">Servern svarar med ett SVARSMEDDELANDE för att bekräfta att klientens IPv6-adress (er) är registrerade med servern som tilldelades till klienten.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-129">The Server responds with a REPLY message to confirm the Client IPv6 address(es) are registered with the Server as assigned to the Client.</span></span>

<span data-ttu-id="7b5ef-130">DHCPv6-klienten registrerar de tilldelade IPv6-adresserna med IP-instansen (t. ex. NetX Duo).</span><span class="sxs-lookup"><span data-stu-id="7b5ef-130">The DHCPv6 Client registers the assigned IPv6 address(es) with the IP instance (e.g NetX Duo).</span></span> <span data-ttu-id="7b5ef-131">Om NetX Duo har kon figurer ATS för den duplicerade adress identifierings protokollet (pappa) kommer Duo automatiskt att skicka grann meddelanden för att verifiera att de tilldelade adresserna är unika i nätverket.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-131">If configured for the Duplicate Address Detection (DAD) protocol (enabled by default), NetX Duo will automatically send Neighbor Solicit messages to verify the assigned address(es) are unique on the network.</span></span> <span data-ttu-id="7b5ef-132">I så fall, meddelar den DHCPv6-klienten när varje tilldelad adress har höjts från PRELIMINÄRt till giltig.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-132">If so, it notifies the DHCPv6 Client when the each assigned address has been promoted from TENTATIVE to VALID.</span></span> <span data-ttu-id="7b5ef-133">DHCPv6-klienten befordras till ett begränsat tillstånd och enheten kan använda den IPv6-adressen för att skicka och skicka meddelanden.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-133">The DHCPv6 Client is promoted to the BOUND state and the device may use that IPv6 address to send and transmit messages.</span></span> <span data-ttu-id="7b5ef-134">Om pappa-protokollet Miss lyckas meddelar NetX Duo DHCPv6-klienten och DHCPv6-klienten skickar ett neka-meddelande för de IPv6-adresser som tilldelas tillbaka till servern och återställer DHCPv6-klient statusen till INITIERINGs statusen.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-134">If the DAD protocol fails, NetX Duo notifies the DHCPv6 Client and the DHCPv6 Client sends a DECLINE message for the IPv6 address(es) assigned back to the Server and resets the DHCPv6 Client state to the INIT state.</span></span>

### <a name="notification-of-successful-address-assignment-and-validation"></a><span data-ttu-id="7b5ef-135">Meddelande om lyckad adress tilldelning och verifiering</span><span class="sxs-lookup"><span data-stu-id="7b5ef-135">Notification of Successful Address Assignment and Validation</span></span>

<span data-ttu-id="7b5ef-136">Programmet kan bestämma resultatet av DHCPv6-klientens adress inbjudningar från tillstånds ändringar om DHCPv6-klienten är konfigurerad med motringningen för tillstånds ändring i *nx_dhcpv6_client_creates* tjänsten.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-136">The application can determine the result of the DHCPv6 Client address solicitation from the state changes if the DHCPv6 Client is configured with the state change callback in the *nx_dhcpv6_client_create* service.</span></span> <span data-ttu-id="7b5ef-137">Om den inte får något svar från servern kommer den status ändring som observerats från att begära att INITIERA.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-137">If it receives no response from the Server the state change observed is from SOLICIT to INIT.</span></span> <span data-ttu-id="7b5ef-138">Om det tog emot ett svar från servern men servern inte kan tilldela adressen, meddelas programmet av fel återanrop av DHCPv6-klient servern om den konfigureras med en (även i *nx_dhcpv6_client_create).*</span><span class="sxs-lookup"><span data-stu-id="7b5ef-138">If it received a response from the Server but the Server is unable to assign the address, the application will be notified by the DHCPv6 Client server error callback if configured with one (also in *nx_dhcpv6_client_create).*</span></span> <span data-ttu-id="7b5ef-139">Om klienten uppnått BINDNINGs tillstånd men sedan misslyckades pappa-kontrollen, ser den en tillstånds ändring från BINDNINGen till INIT.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-139">If the Client achieved the BOUND state but then failed the DAD check, it will see a state change from BOUND to INIT.</span></span> <span data-ttu-id="7b5ef-140">Tänk på att ett program som är aktiverat för pappa måste tillåta tid för pappa-kontrollen när du har startat processen för begäran.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-140">Note that an application that is enabled for DAD must allow time for the DAD check after starting the request process.</span></span> <span data-ttu-id="7b5ef-141">Detta är vanligt vis cirka 400-500 Tick (4-5 sekunder i de flesta fall).</span><span class="sxs-lookup"><span data-stu-id="7b5ef-141">Typically this is about 400-500 ticks (4-5 seconds in most cases).</span></span>

### <a name="relinquishing-an-ipv6-address"></a><span data-ttu-id="7b5ef-142">Lämna en IPv6-adress</span><span class="sxs-lookup"><span data-stu-id="7b5ef-142">Relinquishing an IPv6 Address</span></span>

<span data-ttu-id="7b5ef-143">Om och när klienten behöver släppa en tilldelad IPv6-adress informerar den DHCPv6-servern genom att anropa tjänsten *nx_dhcpv6_request_release* :</span><span class="sxs-lookup"><span data-stu-id="7b5ef-143">If and when the Client needs to release an assigned IPv6 address, it informs the DHCPv6 server by calling the *nx_dhcpv6_request_release* service:</span></span>

### <a name="uint-nx_dhcpv6_request_releasenx_dhcpv6-dhcpv6_ptr"></a><span data-ttu-id="7b5ef-144">UINT nx_dhcpv6_request_release (NX_DHCPV6 \* dhcpv6_ptr)</span><span class="sxs-lookup"><span data-stu-id="7b5ef-144">UINT nx_dhcpv6_request_release(NX_DHCPV6 \*dhcpv6_ptr)</span></span>

<span data-ttu-id="7b5ef-145">DHCPv6-klienten skickar ett Unicast-meddelande som innehåller de tilldelade adresserna till den server som tilldelade adressen och väntar på ett svar som bekräftar att servern tog emot meddelandet.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-145">The DHCPv6 Client sends a unicast RELEASE message containing the assigned addresses to the Server who assigned the address and waits for a REPLY confirming the Server received the message.</span></span>

<span data-ttu-id="7b5ef-146">Obs! det finns en annan process för klienten som stänger av, men planerar att fortsätta använda de tilldelade IPv6-adresserna vid omstart.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-146">Note: There is a different process for the Client that is powering down but plans to continue using the assigned IPv6 addresses on reboot.</span></span> <span data-ttu-id="7b5ef-147">Det skickar inte versions meddelandet vid inaktive om det inte planerar att begära en ny adress vid start.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-147">It does not send the RELEASE message on powering down unless it plans to request a new address on power up.</span></span> <span data-ttu-id="7b5ef-148">Se "krav på icke-flyktigt minne" för att få en förklaring till den här situationen.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-148">See “Non Volatile Memory Requirements” for explanation of this situation.</span></span>

### <a name="dhcpv6-lease-timeouts"></a><span data-ttu-id="7b5ef-149">Timeout för DHCPv6-lån</span><span class="sxs-lookup"><span data-stu-id="7b5ef-149">DHCPv6 Lease Timeouts</span></span>

<span data-ttu-id="7b5ef-150">IPv6-lånet som tilldelas av servern innehåller två timeout-parametrar, T1 och T2 i varje identitets Association – icke-temporära adresser (IANA)-block.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-150">The IPv6 lease assigned by the Server contains two timeout parameters, T1 and T2 in each Identity Association – Non Temporary Addresses (IANA) block.</span></span> <span data-ttu-id="7b5ef-151">En IANA beskrivs i någon annan i den här användar handboken.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-151">An IANA is described in elsewhere in this User Guide.</span></span> <span data-ttu-id="7b5ef-152">Om den förflutna tiden från när DHCPv6-klienten var kopplad till den tilldelade IPv6-adressen är lika med T1 börjar DHCPv6-klienten automatiskt förnya IPv6-adressen genom att skicka ett förnyelse meddelande.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-152">If the elapsed time from when the DHCPv6 Client was bound to the assigned IPv6 address equals T1, the DHCPv6 Client automatically starts renewing the IPv6 address by sending a RENEW message.</span></span> <span data-ttu-id="7b5ef-153">Om den förflutna tiden är lika med T2 skickar DHCPv6-klienten automatiskt ett rebind-meddelande om det inte fick några svar på sina FÖRNYAde begär Anden.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-153">If the elapsed time equals T2, DHCPv6 Client automatically sends a REBIND message if it received no responses to its RENEW requests.</span></span>

<span data-ttu-id="7b5ef-154">Två andra IPv6-låne parametrar, önskad och giltig livs längd, tilldelas till varje block med identitets associationer (IA) som finns i IANA-blocket.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-154">Two other IPv6 lease parameters, preferred and valid lifetime, are assigned with each Identity Association (IA) block contained in the IANA block.</span></span> <span data-ttu-id="7b5ef-155">De önskade och giltiga livs längderna är när den tilldelade IPv6-adressen är inaktuell eller ogiltig.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-155">The preferred and valid lifetimes are when the assigned IPv6 address is deprecated or invalid, respectively.</span></span> <span data-ttu-id="7b5ef-156">T1 måste vara mindre än den önskade livs längden.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-156">T1 must be less than the preferred lifetime.</span></span> <span data-ttu-id="7b5ef-157">T2 måste vara mindre än den giltiga livs längden.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-157">T2 must be less than the valid lifetime.</span></span>

### <a name="ip-thread-task-requirements"></a><span data-ttu-id="7b5ef-158">Aktivitets krav för IP-tråd</span><span class="sxs-lookup"><span data-stu-id="7b5ef-158">IP Thread Task Requirements</span></span>

<span data-ttu-id="7b5ef-159">NetX Duo DHCPv6-klienten måste skapa en NetX Duo-tjänstinstans som är tidigare för att kunna skapa DHCPv6-klienten för att använda DHCPv6-klient tjänster.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-159">The NetX Duo DHCPv6 Client requires creation of a NetX Duo IP instance previous to creating the DHCPv6 Client to use DHCPv6 Client services.</span></span>

<span data-ttu-id="7b5ef-160">UDP, IPv6 och ICMPv6 måste vara aktiverat på IP-instansen innan du använder DHCPv6-klienten.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-160">UDP, IPv6, and ICMPv6 must be enabled on the IP instance prior to the using DHCPv6 Client.</span></span>

  - <span data-ttu-id="7b5ef-161">*nx_udp_enable*</span><span class="sxs-lookup"><span data-stu-id="7b5ef-161">*nx_udp_enable*</span></span>

  - <span data-ttu-id="7b5ef-162">*nxd_ipv6_enable*</span><span class="sxs-lookup"><span data-stu-id="7b5ef-162">*nxd_ipv6_enable*</span></span>

  - <span data-ttu-id="7b5ef-163">*nxd_icmp_enable*</span><span class="sxs-lookup"><span data-stu-id="7b5ef-163">*nxd_icmp_enable*</span></span>

### <a name="packet-pool-requirements"></a><span data-ttu-id="7b5ef-164">Krav för paket pool</span><span class="sxs-lookup"><span data-stu-id="7b5ef-164">Packet Pool Requirements</span></span>

<span data-ttu-id="7b5ef-165">NetX Duo DHCPv6-klienten måste skapas en tidigare skapad modempool för att skicka DHCPv6-meddelanden.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-165">NetX Duo DHCPv6 Client creation requires a previously created packet pool for sending DHCPv6 messages.</span></span> <span data-ttu-id="7b5ef-166">Storleken på poolen med paketets nytto last och antalet tillgängliga paket är att användaren kan konfigureras och är beroende av den förväntade volymen av DHCPv6-meddelanden och andra sändningar som programmet ska skicka.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-166">The size of the packet pool in terms of packet payload and number of packets available is user configurable, and depends on the anticipated volume of DHCPv6 messages and other transmissions the application will be sending.</span></span>

<span data-ttu-id="7b5ef-167">Ett typiskt DHCPv6-meddelande är ungefär 200 byte beroende på antalet IA-adresser och DHCPv6-alternativ som begärs av klienten.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-167">A typical DHCPv6 message is about 200 bytes depending on the number of IA addresses and DHCPv6 options requested by the Client.</span></span>

### <a name="network-requirements"></a><span data-ttu-id="7b5ef-168">Nätverks krav</span><span class="sxs-lookup"><span data-stu-id="7b5ef-168">Network Requirements</span></span>

<span data-ttu-id="7b5ef-169">NetX Duo DHCPv6-klienten kräver att UDP-socketen som binds till port 546 skapas.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-169">The NetX Duo DHCPv6 Client requires the creation of UDP socket bound to port 546.</span></span> <span data-ttu-id="7b5ef-170">Socketen skapas när aktiviteten DHCPv6-klienten skapas.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-170">The socket is created when the DHCPv6 Client task is created.</span></span>

### <a name="non-volatile-memory-requirements"></a><span data-ttu-id="7b5ef-171">Krav för icke-flyktigt minne</span><span class="sxs-lookup"><span data-stu-id="7b5ef-171">Non Volatile Memory Requirements</span></span>

<span data-ttu-id="7b5ef-172">Om en DHCPv6-klient släpper sitt IPv6-lån med DHCPv6-servern vid avstängning och begär nya IPv6-adresser vid omstart, krävs inte icke-flyktig minnes lagring.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-172">If a DHCPv6 Client releases its IPv6 lease with the DHCPv6 Server when powering down, and requests new IPv6 address(es) on reboot, then non volatile memory storage is not required.</span></span> <span data-ttu-id="7b5ef-173">Om en klient vill fortsätta att använda sitt tilldelade lån måste den lagra viss information om DHCPv6-klienten till icke-flyktigt minne mellan omstarter.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-173">If a Client wishes to continue using its assigned lease, it must store certain information about the DHCPv6 Client to non volatile memory across reboots.</span></span>

<span data-ttu-id="7b5ef-174">Icke-flyktiga minnes krav och DHCPv6-klientens API beskrivs ytterligare i **använda netx Duo DHCPv6-klienten** i kapitel två.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-174">Non volatile memory requirements and the DHCPv6 Client API are discussed further in **Using the NetX Duo DHCPv6 Client** in Chapter Two.</span></span>

### <a name="netx-duo-dhcpv6-client-limitations"></a><span data-ttu-id="7b5ef-175">NetX Duo DHCPv6-klient begränsningar</span><span class="sxs-lookup"><span data-stu-id="7b5ef-175">NetX Duo DHCPv6 Client Limitations</span></span>

<span data-ttu-id="7b5ef-176">Den aktuella versionen av NetX Duo DHCPv6-klienten har följande begränsningar:</span><span class="sxs-lookup"><span data-stu-id="7b5ef-176">The current release of the NetX Duo DHCPv6 Client has the following limitations:</span></span>

  - <span data-ttu-id="7b5ef-177">NetX Duo DHCPv6-klienten har inte stöd för alternativet Server-unicast för att skicka unicast DHCPv6-meddelanden till DHCPv6-servern även om servern anger att detta är tillåtet.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-177">NetX Duo DHCPv6 Client does not support the Server Unicast option for sending unicast DHCPv6 messages to the DHCPv6 Server even if the Server indicates this is permitted.</span></span>

  - <span data-ttu-id="7b5ef-178">NetX Duo DHCPv6-klienten har inte stöd för den omkonfigurerande begäran där en server initierar IPv6-adress ändringar till klienter i nätverket.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-178">NetX Duo DHCPv6 Client does not support the Reconfigure request in which a Server initiates IPv6 address changes to the Clients on the network.</span></span>

  - <span data-ttu-id="7b5ef-179">NetX Duo DHCPv6-klienten har inte stöd för Enterprise-formatet för det unika ID-kontroll blocket för DHCPv6.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-179">NetX Duo DHCPv6 Client does not support the Enterprise format for the DHCPv6 Unique Identifier control block.</span></span> <span data-ttu-id="7b5ef-180">Det stöder endast länk lager och länk lager plus tids format.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-180">It only supports Link Layer and Link Layer Plus Time format.</span></span>

  - <span data-ttu-id="7b5ef-181">NetX Duo DHCPv6-klienten har inte stöd för tillfälliga associerings begär Anden (TA), men har stöd för icke-temporära (IANA) option-begär Anden.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-181">NetX Duo DHCPv6 Client does not support Temporary Association (TA) address requests, but does support Non Temporary (IANA) option requests.</span></span>

## <a name="multihome-and-multiple-address-support"></a><span data-ttu-id="7b5ef-182">Stöd för flera hem och flera adresser</span><span class="sxs-lookup"><span data-stu-id="7b5ef-182">Multihome and Multiple Address Support</span></span>

<span data-ttu-id="7b5ef-183">DHCPv6-klienten har stöd för flera gränssnitt och flera adresser per gränssnitt.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-183">The DHCPv6 Client supports multiple interfaces and multiple addresses per interface.</span></span> <span data-ttu-id="7b5ef-184">DHCPv6-klienttjänsten *nx_dhcpv6_client_set_interface* gör att klient programmet kan ange det nätverks gränssnitt som programmet ska kommunicera med DHCPv6-servern.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-184">The DHCPv6 Client service, *nx_dhcpv6_client_set_interface* enables the Client application to set the network interface on which the application will be communicating with the DHCPv6 Server.</span></span> <span data-ttu-id="7b5ef-185">DHCPv6-klienten som standard är det primära gränssnittet (index noll).</span><span class="sxs-lookup"><span data-stu-id="7b5ef-185">The DHCPv6 Client defaults to the primary interface (index zero).</span></span>

<span data-ttu-id="7b5ef-186">För flera adresser per gränssnitt behåller DHCPv6-klienten en intern lista med adresser som börjar vid indexet 0.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-186">For multiple addresses per interface, the DHCPv6 Client keeps an internal list of addresses starting at index 0.</span></span> <span data-ttu-id="7b5ef-187">Observera att samma adress som har registrerats med DHCPv6-klienten kanske inte nödvändigt vis finns i samma index i IP-tabellen för gränssnitts adresser.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-187">Note that the same address registered with the DHCPv6 Client may not necessarily be located at the same index in the IP table of interface addresses.</span></span>

<span data-ttu-id="7b5ef-188">Vissa kräver att ett adress index anges för DHCPv6-klient tjänster som hämtar information om klientens IPv6-adresslån.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-188">For DHCPv6 Client services that retrieve information about the Client IPv6 address lease, some require an address index to be specified.</span></span> <span data-ttu-id="7b5ef-189">Ett exempel på hur du hämtar önskade och giltiga livstider visas nedan:</span><span class="sxs-lookup"><span data-stu-id="7b5ef-189">An example for obtaining the preferred and valid lifetimes is shown below:</span></span>

```C
UINT nx_dhcpv6_get_valid_ip_address_lease_time(NX_DHCPV6 *dhcpv6_ptr, 
                                              UINT address_index, 
                                              NXD_ADDRESS *ip_address,
                                              ULONG preferred_lifetime, 
                                              ULONG *valid_lifetime)
```

<span data-ttu-id="7b5ef-190">Klient programmet kan också hämta antalet giltiga IPv6-adresser som tilldelats från tjänsten *nx_dhcpv6_get_valid_ip_address_count* :</span><span class="sxs-lookup"><span data-stu-id="7b5ef-190">The Client application can also retrieve the number of valid IPv6 addresses assigned from the *nx_dhcpv6_get_valid_ip_address_count* service:</span></span>

```C
UINT nx_dhcpv6_get_valid_ip_address_count(NX_DHCPV6 *dhcpv6_ptr, 
                                          UINT *address_count)
```

<span data-ttu-id="7b5ef-191">Äldre DHCPv6-klient tjänster som skapades innan flera adresser stöddes i NetX Duo tar inget adress index.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-191">Legacy DHCPv6 Client services which were created before multiple addresses were supported in NetX Duo do not take an address index.</span></span> <span data-ttu-id="7b5ef-192">Med dessa tjänster tas de data som efter frågas från den primära globala IA-adressen, oavsett hur många IA-adresser som tilldelas till klienten.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-192">Therefore, with these services, the data requested is taken from the primary global IA address, regardless how many IA addresses are assigned to the Client.</span></span> <span data-ttu-id="7b5ef-193">Ett exempel på detta visas nedan:</span><span class="sxs-lookup"><span data-stu-id="7b5ef-193">An example is shown below:</span></span>

```C
UINT nx_dhcpv6_get_IP_address(NX_DHCPV6 *dhcpv6_ptr, 
                              NXD_ADDRESS *ip_address)
```

## <a name="netx-duo-dhcpv6-client-callback-functions"></a><span data-ttu-id="7b5ef-194">NetX Duo DHCPv6 klienten motringning funktioner</span><span class="sxs-lookup"><span data-stu-id="7b5ef-194">NetX Duo DHCPv6 Client Callback Functions</span></span>

<span data-ttu-id="7b5ef-195">*nx_dhcpv6_state_change_callback*</span><span class="sxs-lookup"><span data-stu-id="7b5ef-195">*nx_dhcpv6_state_change_callback*</span></span>

<span data-ttu-id="7b5ef-196">När DHCPv6-klienten ändras till ett nytt DHCPv6-tillstånd som ett resultat av bearbetningen av en DHCPv6-begäran, meddelas programmet med denna motringnings funktion.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-196">When the DHCPv6 Client changes to a new DHCPv6 state as a result of processing a DHCPv6 request, it notifies the application with this callback function.</span></span>

<span data-ttu-id="7b5ef-197">*nx_dhcpv6_server_error_handler*</span><span class="sxs-lookup"><span data-stu-id="7b5ef-197">*nx_dhcpv6_server_error_handler*</span></span>

<span data-ttu-id="7b5ef-198">När DHCPv6-klienten får ett Server svar som innehåller ett *status* alternativ med en status som inte är noll (ej fungerande) meddelar den programmet med det här återanropet som innehåller status koden för Server fel.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-198">When the DHCPv6 Client receives a Server reply containing a *Status* option with a non-zero (non successful) status, it notifies the application with this callback which includes the Server error status code.</span></span>

<span data-ttu-id="7b5ef-199">Obs! eftersom dessa återanrops funktioner anropas från aktiviteten DHCPv6 klient tråd, får klient programmet inte anropa några NetX Duo DHCPv6-klient tjänster som kräver mutex-kontroll av DHCPv6-klienten, till exempel *nx_dhcpv6_start, nx_dhcpv6_stop* och alla API: er som skickar meddelanden direkt från återanropet, t. ex. *nx_dhcpv6_request_release*.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-199">Note: Since these callback functions are called from the DHCPv6 Client thread task, the Client application must NOT call any NetX Duo DHCPv6 Client services that require mutex control of the DHCPv6 Client such as *nx_dhcpv6_start, nx_dhcpv6_stop,* and any of the API that send messages directly from the callback e.g. *nx_dhcpv6_request_release*.</span></span>

## <a name="dhcpv6-rfcs"></a><span data-ttu-id="7b5ef-200">DHCPv6 RFC</span><span class="sxs-lookup"><span data-stu-id="7b5ef-200">DHCPv6 RFCs</span></span>

<span data-ttu-id="7b5ef-201">NetX Duo DHCP är kompatibel med RFC3315, RFC3646 och relaterade RFC: er.</span><span class="sxs-lookup"><span data-stu-id="7b5ef-201">NetX Duo DHCP is compliant with RFC3315, RFC3646, and related RFCs.</span></span>