---
title: Bilaga F-GUIX återställnings tider binding Services
description: Lär dig mer om GUIX återställnings tider binding Services.
author: philmea
ms.author: philmea
ms.date: 05/19/2020
ms.topic: article
ms.service: rtos
ms.openlocfilehash: 1d94dbb9d7d53ec3e1900188142974cc981dfea9
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 03/22/2021
ms.locfileid: "104827270"
---
# <a name="appendix-f---guix-rtos-binding-services"></a><span data-ttu-id="b3054-103">Bilaga F-GUIX återställnings tider binding Services</span><span class="sxs-lookup"><span data-stu-id="b3054-103">Appendix F - GUIX RTOS Binding Services</span></span>

<span data-ttu-id="b3054-104">GUIX kräver tråd-eller aktivitets tjänster, mutex, händ Els Queue och timing-tjänster som tillhandahålls av den underliggande återställnings tider.</span><span class="sxs-lookup"><span data-stu-id="b3054-104">GUIX requires thread or tasking services, mutex, event queue, and timing services providing by the underlying RTOS.</span></span> <span data-ttu-id="b3054-105">Som standard är GUIX konfigurerat för att använda det ThreadX real tids operativ systemet för att tillhandahålla dessa tjänster.</span><span class="sxs-lookup"><span data-stu-id="b3054-105">By default GUIX is configured to utilize the ThreadX real time operating system to provide these services.</span></span> <span data-ttu-id="b3054-106">Om du vill port GUIX till ett annat operativ system ska utvecklaren # definiera för hands versionen av direktivet GX_DISABLE_THREADX_BINDING och återskapa GUIX-biblioteket för att ta bort ThreadX-beroenden.</span><span class="sxs-lookup"><span data-stu-id="b3054-106">To port GUIX to another operating system, the developer should # define the pre-processor directive GX_DISABLE_THREADX_BINDING and rebuild the GUIX library to remove the ThreadX dependencies.</span></span> <span data-ttu-id="b3054-107">Dessutom måste utvecklaren tillhandahålla följande makro definitioner och stöd funktioner.</span><span class="sxs-lookup"><span data-stu-id="b3054-107">In addition, the developer will need to provide the following macro definitions and supporting functions.</span></span> <span data-ttu-id="b3054-108">Exempel på dessa makro definitioner och stöd funktioner finns i filerna gx_system_rtos_bind. h och gx_system_rtos_bind. c, som ger ett exempel på allmän återställnings tider-integrering.</span><span class="sxs-lookup"><span data-stu-id="b3054-108">Examples of these macro definitions and supporting functions can be found in the files gx_system_rtos_bind.h and gx_system_rtos_bind.c, which provide an example generic rtos integration.</span></span>

<span data-ttu-id="b3054-109">System integrerings makron:</span><span class="sxs-lookup"><span data-stu-id="b3054-109">System Integration macros:</span></span>

<span data-ttu-id="b3054-110">**GX_RTOS_BINDING_INITIALIZE**</span><span class="sxs-lookup"><span data-stu-id="b3054-110">**GX_RTOS_BINDING_INITIALIZE**</span></span>

<span data-ttu-id="b3054-111">Det här makrot anropas under system initiering.</span><span class="sxs-lookup"><span data-stu-id="b3054-111">This macro is invoked during system initialization.</span></span> <span data-ttu-id="b3054-112">Makrot bör definieras för att anropa alla funktioner som behövs för att förbereda dina återställnings tider system tjänster eller återställnings tider-resurser innan de används.</span><span class="sxs-lookup"><span data-stu-id="b3054-112">The macro should be defined to call any function needed to prepare your rtos system services or rtos resources prior to use.</span></span> <span data-ttu-id="b3054-113">Detta är bindningens möjlighet att förbereda de återställnings tider-resurser som GUIX kommer att använda.</span><span class="sxs-lookup"><span data-stu-id="b3054-113">This is the binding’s opportunity to prepare the rtos resources that GUIX will use.</span></span>

<span data-ttu-id="b3054-114">**GX_SYSTEM_THREAD_START**</span><span class="sxs-lookup"><span data-stu-id="b3054-114">**GX_SYSTEM_THREAD_START**</span></span>

<span data-ttu-id="b3054-115">Det här makrot anropas när GUIX-uppgiften eller-tråden ska börja köras.</span><span class="sxs-lookup"><span data-stu-id="b3054-115">This macro is invoked when the GUIX task or thread should start executing.</span></span> <span data-ttu-id="b3054-116">Det här makrot måste definieras för att anropa en funktion som startar GUIX-tråden som körs.</span><span class="sxs-lookup"><span data-stu-id="b3054-116">This macro should be defined to call a function which will start the GUIX thread running.</span></span> <span data-ttu-id="b3054-117">Start punkten för GUIX-tråden skickas till den anropade funktionen.</span><span class="sxs-lookup"><span data-stu-id="b3054-117">The entry point to the GUIX thread is passed to the called function.</span></span> <span data-ttu-id="b3054-118">Signaturen för den anropade funktionen måste vara</span><span class="sxs-lookup"><span data-stu-id="b3054-118">The signature of the called function must be</span></span>

<span data-ttu-id="b3054-119">**UINT *function_name*(void (thread_entry_point) (void));**</span><span class="sxs-lookup"><span data-stu-id="b3054-119">**UINT *function_name*(VOID (thread_entry_point)(VOID));**</span></span>

<span data-ttu-id="b3054-120">Den här funktionen ska returnera GX_SUCCESS om tråden har startats eller GX_FAILURE.</span><span class="sxs-lookup"><span data-stu-id="b3054-120">This function should return GX_SUCCESS if the thread is successfully started, or GX_FAILURE.</span></span>

<span data-ttu-id="b3054-121">**GX_EVENT_PUSH**</span><span class="sxs-lookup"><span data-stu-id="b3054-121">**GX_EVENT_PUSH**</span></span>

<span data-ttu-id="b3054-122">Det här makrot anropas för att skicka en händelse till den FIFO-händelselogg som används av GUIX.</span><span class="sxs-lookup"><span data-stu-id="b3054-122">This macro is invoked to push an event into the FIFO event queue used by GUIX.</span></span> <span data-ttu-id="b3054-123">När du hamnar i en ny återställnings tider är det ditt ansvar att implementera den här händelse kön på ett tråd säkert sätt.</span><span class="sxs-lookup"><span data-stu-id="b3054-123">When porting to a new rtos, it is your responsibility to implement this event queue in a thread-safe manner.</span></span> <span data-ttu-id="b3054-124">GX_EVENT strukturer måste kopieras till den här kön och kopieras från den här kön, dvs. en kö med GX_EVENT pekare fungerar inte, eftersom GUIX-händelser kan vara automatiska variabler från händelse producentens vy.</span><span class="sxs-lookup"><span data-stu-id="b3054-124">GX_EVENT structures must be copied into this queue and copied out of this queue, i.e. a queue of GX_EVENT pointers will not work, since GUIX events can be automatic variables from the view of the event producer.</span></span> <span data-ttu-id="b3054-125">Signaturen för funktionen som anropas av det här makrot måste vara:</span><span class="sxs-lookup"><span data-stu-id="b3054-125">The signature of the function called by this macro must be:</span></span>

<span data-ttu-id="b3054-126">\**UINT *function_name* (GX_EVENT *event_ptr);**</span><span class="sxs-lookup"><span data-stu-id="b3054-126">\**UINT *function_name* (GX_EVENT *event_ptr);**</span></span>

<span data-ttu-id="b3054-127">Den här funktionen bör returnera GX_SUCCESS om händelsen skickas till händelse kön, annars bör den returnera GX_FAILURE.</span><span class="sxs-lookup"><span data-stu-id="b3054-127">This function should return GX_SUCCESS if the event is pushed into the event queue, otherwise it should return GX_FAILURE.</span></span>

<span data-ttu-id="b3054-128">**GX_EVENT_POP**</span><span class="sxs-lookup"><span data-stu-id="b3054-128">**GX_EVENT_POP**</span></span>

<span data-ttu-id="b3054-129">Det här makrot anropas för att ta bort huvud händelsen (äldsta) från händelse kön GUIX och kopiera den till den begärda platsen.</span><span class="sxs-lookup"><span data-stu-id="b3054-129">This macro is invoked to remove the head (oldest) event from the GUIX event queue and copy it into the requested location.</span></span> <span data-ttu-id="b3054-130">Den här funktionen måste kunna blockera eller vänta på en händelse om inga händelser finns i händelse kön.</span><span class="sxs-lookup"><span data-stu-id="b3054-130">This function must be able to optionally block or wait for an event if no events are currently in the event queue.</span></span> <span data-ttu-id="b3054-131">Signaturen för funktionen som anropas av det här makrot måste vara</span><span class="sxs-lookup"><span data-stu-id="b3054-131">The signature of the function invoked by this macro must be</span></span>

<span data-ttu-id="b3054-132">UINT function_name (GX_EVENT \* put_event GX_BOOL vänta)</span><span class="sxs-lookup"><span data-stu-id="b3054-132">UINT function_name(GX_EVENT \*put_event, GX_BOOL wait)</span></span>

<span data-ttu-id="b3054-133">Om parametern wait = = GX_TRUE ska funktionen inte returneras förrän en händelse har angetts.</span><span class="sxs-lookup"><span data-stu-id="b3054-133">If the wait parameter == GX_TRUE, the function should not return until an event is provided.</span></span> <span data-ttu-id="b3054-134">Om parametern wait är GX_FALSE ska funktionen returnera omedelbart med eller utan en händelse.</span><span class="sxs-lookup"><span data-stu-id="b3054-134">If the wait parameter is GX_FALSE, the function should return immediately with or without an event.</span></span>

<span data-ttu-id="b3054-135">Om en händelse hämtas från kön bör den kopieras till put_event plats och retur status är GX_SUCCESS.</span><span class="sxs-lookup"><span data-stu-id="b3054-135">If an event is retrieved from the queue, it should copied into the put_event location and the return status is GX_SUCCESS.</span></span> <span data-ttu-id="b3054-136">Annars ska retur status vara GX_FAILURE.</span><span class="sxs-lookup"><span data-stu-id="b3054-136">Otherwise the return status should be GX_FAILURE.</span></span>

<span data-ttu-id="b3054-137">**GX_EVENT_FOLD**</span><span class="sxs-lookup"><span data-stu-id="b3054-137">**GX_EVENT_FOLD**</span></span>

<span data-ttu-id="b3054-138">Det här makrot anropas av GUIX för att vika en händelse till händelse kön för FIFO.</span><span class="sxs-lookup"><span data-stu-id="b3054-138">This macro is invoked by GUIX to fold an event into the FIFO event queue.</span></span> <span data-ttu-id="b3054-139">Vik en händelse innebär att om en händelse av samma typ redan finns i kön, uppdateras posten så att den innehåller den nya händelsens nytto Last.</span><span class="sxs-lookup"><span data-stu-id="b3054-139">Folding an event means that if an event of the same type already exists in the queue, that entry is update to contain the payload of the new event.</span></span> <span data-ttu-id="b3054-140">Om en befintlig händelse av samma typ inte hittas i kön, skickas en ny händelse till kön.</span><span class="sxs-lookup"><span data-stu-id="b3054-140">If an existing event of the same type is not found in the queue, a new event is pushed into the queue.</span></span> 

<span data-ttu-id="b3054-141">För bindningar som inte kan implementera Event viknings funktionen, är det acceptabelt att bara anropa GX_EVENT_PUSH.</span><span class="sxs-lookup"><span data-stu-id="b3054-141">For bindings that cannot implement the event fold feature, it is acceptable to simply invoke the GX_EVENT_PUSH.</span></span>

<span data-ttu-id="b3054-142">**GX_TIMER_START**</span><span class="sxs-lookup"><span data-stu-id="b3054-142">**GX_TIMER_START**</span></span>

<span data-ttu-id="b3054-143">Det här makrot anropas när GUIX måste ta emot regelbunden timer-indatamängd.</span><span class="sxs-lookup"><span data-stu-id="b3054-143">This macro is invoked when GUIX needs to receive periodic timer input.</span></span> <span data-ttu-id="b3054-144">Det här makrot ska anropa en tjänst som startar den periodiska tids tjänsten på låg nivå återställnings tider.</span><span class="sxs-lookup"><span data-stu-id="b3054-144">This macro should invoke a service that starts the low-level RTOS periodic timer service.</span></span> <span data-ttu-id="b3054-145">Om återställnings tider timer-tjänsten inte kan stoppas och startas, är det acceptabelt men det är mindre effektivt att låta den här tjänsten köras hela tiden.</span><span class="sxs-lookup"><span data-stu-id="b3054-145">If the RTOS timer service cannot be easily stopped and started, it is acceptable but less efficient to leave this service running at all times.</span></span>

<span data-ttu-id="b3054-146">När återställnings tider timer-tjänsten med låg nivå upphör att gälla regelbundet, måste bindningen anropa systemfunktionen GUIX _gx_system_timer_expiration (0). Att anropa den här funktionen är med jämna mellanrum det som driver GUIX timer-tjänster på hög nivå.</span><span class="sxs-lookup"><span data-stu-id="b3054-146">When the low-level RTOS timer service periodically expires, the binding must call the GUIX system function _gx_system_timer_expiration(0); Calling this function periodically is what drives the high-level GUIX timer widget timer services.</span></span>

<span data-ttu-id="b3054-147">**GX_TIMER_STOP**</span><span class="sxs-lookup"><span data-stu-id="b3054-147">**GX_TIMER_STOP**</span></span>

<span data-ttu-id="b3054-148">Det här makrot anropas när GUIX inte längre behöver en periodisk timer (dvs. inga aktiva GUIX-timers körs).</span><span class="sxs-lookup"><span data-stu-id="b3054-148">This macro is invoked when GUIX no longer needs a periodic timer (i.e. there are no active GUIX timers running).</span></span> <span data-ttu-id="b3054-149">Om återställnings tider timer-tjänsten inte kan stoppas och startas, är det acceptabelt men är mindre effektivt att låta den här tjänsten köras hela tiden och definiera det här makrot för att göra ingenting.</span><span class="sxs-lookup"><span data-stu-id="b3054-149">If the RTOS timer service cannot be easily stopped and started, it is acceptable but less efficient to leave this service running at all times and define this macro to do nothing.</span></span>

<span data-ttu-id="b3054-150">**GX_SYSTEM_MUTEX_LOCK**</span><span class="sxs-lookup"><span data-stu-id="b3054-150">**GX_SYSTEM_MUTEX_LOCK**</span></span>

<span data-ttu-id="b3054-151">Det här makrot anropas av GUIX under kritiska kod avsnitt för att förhindra att en annan aktivitet än empting och ändrar gemensamma data strukturer, vilket kan orsaka skada.</span><span class="sxs-lookup"><span data-stu-id="b3054-151">This macro is invoked by GUIX during critical code sections to prevent another task from  pre-empting and modifying common data structures, potentially causing corruption.</span></span> <span data-ttu-id="b3054-152">Det här makrot ska anropa en funktion som implementerar lämplig resurs låsnings tjänst för återställnings tider.</span><span class="sxs-lookup"><span data-stu-id="b3054-152">This macro should call a function that implements the suitable RTOS resource locking service.</span></span>

<span data-ttu-id="b3054-153">Om du aldrig använder några GUIX-API-tjänster utanför GUIX-tråden kan du definiera det här makrot för att göra ingenting.</span><span class="sxs-lookup"><span data-stu-id="b3054-153">If you never utilize any GUIX API services outside of the GUIX thread, you can define this macro to do nothing.</span></span>

<span data-ttu-id="b3054-154">**GX_SYSTEM_MUTEX_UNLOCK**</span><span class="sxs-lookup"><span data-stu-id="b3054-154">**GX_SYSTEM_MUTEX_UNLOCK**</span></span>

<span data-ttu-id="b3054-155">Det här makrot anropas i slutet av kritiska kod avsnitt och bör låsa upp GUIX-resursen med lämplig underliggande återställnings tider-tjänst.</span><span class="sxs-lookup"><span data-stu-id="b3054-155">This macro is invoked at the end of critical code sections, and should unlock the GUIX resource using the suitable underlying RTOS service.</span></span> <span data-ttu-id="b3054-156">Om du aldrig använder några GUIX-API-tjänster utanför GUIX-tråden kan du definiera det här makrot för att göra ingenting.</span><span class="sxs-lookup"><span data-stu-id="b3054-156">If you never utilize any GUIX API services outside of the GUIX thread, you can define this macro to do nothing.</span></span>

<span data-ttu-id="b3054-157">**GX_SYSTEM_TIME_GET**</span><span class="sxs-lookup"><span data-stu-id="b3054-157">**GX_SYSTEM_TIME_GET**</span></span>

<span data-ttu-id="b3054-158">Det här makrot ska anropa en funktion som returnerar den aktuella system tiden är "system tickes", vilket vanligt vis är antalet timer-avbrott på låg nivå som har inträffat sedan systemet startades.</span><span class="sxs-lookup"><span data-stu-id="b3054-158">This macro should call a function that returns the current system time is “system ticks”, which is usually the number of low-level timer interrupts that have occurred since system startup.</span></span> <span data-ttu-id="b3054-159">Den här tjänsten används för att beräkna touch-pennans hastighet för gester för touch-ingångar.</span><span class="sxs-lookup"><span data-stu-id="b3054-159">This service is used to calculate touch event pen speed for touch input gestures.</span></span> <span data-ttu-id="b3054-160">Signaturen för funktionen som anropas av det här makrot måste vara:</span><span class="sxs-lookup"><span data-stu-id="b3054-160">The signature of the function invoked by this macro must be:</span></span>

<span data-ttu-id="b3054-161">**ULONG *function_name*(void);**</span><span class="sxs-lookup"><span data-stu-id="b3054-161">**ULONG *function_name*(VOID);**</span></span>

<span data-ttu-id="b3054-162">**GX_CURRENT_THREAD**</span><span class="sxs-lookup"><span data-stu-id="b3054-162">**GX_CURRENT_THREAD**</span></span>

<span data-ttu-id="b3054-163">Det här makrot anropas för att identifiera den tråd som körs för tillfället.</span><span class="sxs-lookup"><span data-stu-id="b3054-163">This macro is invoked to identify the currently executing thread.</span></span> <span data-ttu-id="b3054-164">Tjänsten som anropas av det här makrot måste returnera en Void \*, vilket innebär att den datatyp som används av operativ systemet för att identifiera den aktuella körnings tråden måste omvandlas till void \* för att returneras till GUX.</span><span class="sxs-lookup"><span data-stu-id="b3054-164">The service called by this macro must return a void \*, meaning that the data type used by your operating system to identify the current execution thread must be cast to a void \* to be returned to GUX.</span></span>

<span data-ttu-id="b3054-165">Ett fullständigt exempel på en allmän återställnings tider-bindning implementeras i det arkiverade gx_system_rtos_bind. h och gx_system_rtos_bind. c</span><span class="sxs-lookup"><span data-stu-id="b3054-165">A complete example of a generic RTOS binding is implemented in the filed gx_system_rtos_bind.h and gx_system_rtos_bind.c</span></span>