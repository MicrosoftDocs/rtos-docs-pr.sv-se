---
title: Kapitel 1 – Introduktion till Azure återställnings tider NetX FTP
description: FTP (File Transfer Protocol) är ett protokoll som är utformat för fil överföringar. FTP använder Reliable Transmission Control Protocol-tjänster (TCP) för att utföra sin fil överförings funktion.
author: philmea
ms.author: philmea
ms.date: 06/04/2020
ms.topic: article
ms.service: rtos
ms.openlocfilehash: 86e132daf96f9039631234f10c8e239b61ad5126
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 03/22/2021
ms.locfileid: "104826733"
---
# <a name="chapter-1---introduction-to-azure-rtos-netx-ftp"></a><span data-ttu-id="1dcba-104">Kapitel 1 – Introduktion till Azure återställnings tider NetX FTP</span><span class="sxs-lookup"><span data-stu-id="1dcba-104">Chapter 1 - Introduction to Azure RTOS NetX FTP</span></span>

<span data-ttu-id="1dcba-105">FTP (File Transfer Protocol) är ett protokoll som är utformat för fil överföringar.</span><span class="sxs-lookup"><span data-stu-id="1dcba-105">The File Transfer Protocol (FTP) is a protocol designed for file transfers.</span></span> <span data-ttu-id="1dcba-106">FTP använder Reliable Transmission Control Protocol-tjänster (TCP) för att utföra sin fil överförings funktion.</span><span class="sxs-lookup"><span data-stu-id="1dcba-106">FTP utilizes reliable Transmission Control Protocol (TCP) services to perform its file transfer function.</span></span> <span data-ttu-id="1dcba-107">Därför är FTP ett mycket tillförlitligt fil överförings protokoll.</span><span class="sxs-lookup"><span data-stu-id="1dcba-107">Because of this, FTP is a highly reliable file transfer protocol.</span></span> <span data-ttu-id="1dcba-108">FTP är också hög prestanda.</span><span class="sxs-lookup"><span data-stu-id="1dcba-108">FTP is also high-performance.</span></span> <span data-ttu-id="1dcba-109">Den faktiska FTP-filöverföringen utförs på en dedikerad FTP-anslutning.</span><span class="sxs-lookup"><span data-stu-id="1dcba-109">The actual FTP file transfer is performed on a dedicated FTP connection.</span></span>

## <a name="ftp-requirements"></a><span data-ttu-id="1dcba-110">FTP-krav</span><span class="sxs-lookup"><span data-stu-id="1dcba-110">FTP Requirements</span></span>

<span data-ttu-id="1dcba-111">För att kunna fungera korrekt måste en NetX-återställnings tider redan ha skapats av Azure NetX FTP-paketet.</span><span class="sxs-lookup"><span data-stu-id="1dcba-111">In order to function properly, the Azure RTOS NetX FTP package requires that a NetX IP instance has already been created.</span></span> <span data-ttu-id="1dcba-112">Dessutom måste TCP vara aktiverat på samma IP-instans.</span><span class="sxs-lookup"><span data-stu-id="1dcba-112">In addition, TCP must be enabled on that same IP instance.</span></span> <span data-ttu-id="1dcba-113">FTP-klienttjänsten i NetX FTP-paketet har inga ytterligare krav.</span><span class="sxs-lookup"><span data-stu-id="1dcba-113">The FTP Client portion of the NetX FTP package has no further requirements.</span></span>

<span data-ttu-id="1dcba-114">FTP-server delen av FTP-paketet NetX har flera ytterligare krav.</span><span class="sxs-lookup"><span data-stu-id="1dcba-114">The FTP Server portion of the NetX FTP package has several additional requirements.</span></span> <span data-ttu-id="1dcba-115">Först måste du ha fullständig åtkomst till den *välkända TCP-porten 21* för att hantera alla KLIENTERs FTP-kommandon och *välkända port 20* för hantering av alla klient-FTP-dataöverföringar.</span><span class="sxs-lookup"><span data-stu-id="1dcba-115">First, it requires complete access to TCP *well-known port 21* for handling all Client FTP command requests and *well-known port 20* for handling all Client FTP data transfers.</span></span> <span data-ttu-id="1dcba-116">FTP-servern är också avsedd att användas med det inbäddade fil systemet FileX.</span><span class="sxs-lookup"><span data-stu-id="1dcba-116">The FTP Server is also designed for use with the FileX embedded file system.</span></span> <span data-ttu-id="1dcba-117">Om FileX inte är tillgängligt kan användaren hamna i de delar av FileX som används i sin egen miljö.</span><span class="sxs-lookup"><span data-stu-id="1dcba-117">If FileX is not available, the user may port the portions of FileX used to their own environment.</span></span> <span data-ttu-id="1dcba-118">Detta beskrivs i senare avsnitt i den här hand boken.</span><span class="sxs-lookup"><span data-stu-id="1dcba-118">This is discussed in later sections of this guide.</span></span>

## <a name="ftp-constraints"></a><span data-ttu-id="1dcba-119">FTP-begränsningar</span><span class="sxs-lookup"><span data-stu-id="1dcba-119">FTP Constraints</span></span>

<span data-ttu-id="1dcba-120">FTP-standarden har många alternativ för åter givning av fildata.</span><span class="sxs-lookup"><span data-stu-id="1dcba-120">The FTP standard has many options regarding the representation of file data.</span></span> <span data-ttu-id="1dcba-121">I likhet med UNIX-implementeringar antar NetX FTP följande fil formats begränsningar:</span><span class="sxs-lookup"><span data-stu-id="1dcba-121">Similar to Unix implementations, NetX FTP assumes the following file format constraints:</span></span>

- <span data-ttu-id="1dcba-122">Filtyp: **binär**</span><span class="sxs-lookup"><span data-stu-id="1dcba-122">File Type: **Binary**</span></span>
- <span data-ttu-id="1dcba-123">Fil format: **endast icke-skriva ut**</span><span class="sxs-lookup"><span data-stu-id="1dcba-123">File Format: **Nonprint Only**</span></span>
- <span data-ttu-id="1dcba-124">Fil struktur: **endast fil struktur**</span><span class="sxs-lookup"><span data-stu-id="1dcba-124">File Structure: **File Structure Only**</span></span>
- <span data-ttu-id="1dcba-125">Överförings läge: **endast ström läge**</span><span class="sxs-lookup"><span data-stu-id="1dcba-125">Transmission Mode: **Stream Mode Only**</span></span>

## <a name="ftp-file-names"></a><span data-ttu-id="1dcba-126">FTP-filnamn</span><span class="sxs-lookup"><span data-stu-id="1dcba-126">FTP File Names</span></span>

<span data-ttu-id="1dcba-127">FTP-filnamn ska vara i formatet för mål fil systemet (vanligt vis FileX).</span><span class="sxs-lookup"><span data-stu-id="1dcba-127">FTP file names should be in the format of the target file system (usually FileX).</span></span> <span data-ttu-id="1dcba-128">De ska vara NULL-terminerade ASCII-strängar, med fullständig Sök vägs information vid behov.</span><span class="sxs-lookup"><span data-stu-id="1dcba-128">They should be NULL terminated ASCII strings, with full path information if necessary.</span></span> <span data-ttu-id="1dcba-129">Det finns ingen angiven gräns för storleken på FTP-filnamn i FTP-implementeringen NetX.</span><span class="sxs-lookup"><span data-stu-id="1dcba-129">There is no specified limit for the size of FTP file names in the NetX FTP implementation.</span></span> <span data-ttu-id="1dcba-130">Paket poolens nytto Last storlek bör dock kunna hantera den maximala sökvägen och/eller fil namnet.</span><span class="sxs-lookup"><span data-stu-id="1dcba-130">However, the packet pool payload size should be able to accommodate the maximum path and/or file name.</span></span>

## <a name="ftp-client-commands"></a><span data-ttu-id="1dcba-131">Kommandon för FTP-klient</span><span class="sxs-lookup"><span data-stu-id="1dcba-131">FTP Client Commands</span></span>

<span data-ttu-id="1dcba-132">FTP har en enkel mekanism för att öppna anslutningar och utföra fil-och katalog åtgärder.</span><span class="sxs-lookup"><span data-stu-id="1dcba-132">The FTP has a simple mechanism for opening connections and performing file and directory operations.</span></span> <span data-ttu-id="1dcba-133">Det finns i princip en uppsättning standard-FTP-kommandon som utfärdas av klienten när en anslutning har upprättats på den *välkända TCP-porten 21*.</span><span class="sxs-lookup"><span data-stu-id="1dcba-133">There is basically a set of standard FTP commands that are issued by the Client after a connection has been successfully established on the TCP *well-known port 21*.</span></span> <span data-ttu-id="1dcba-134">Nedan visas några av de grundläggande FTP-kommandona:</span><span class="sxs-lookup"><span data-stu-id="1dcba-134">The following shows some of the basic FTP commands:</span></span>

### <a name="ftp-command-and-meaning"></a><span data-ttu-id="1dcba-135">FTP-kommando och betydelse</span><span class="sxs-lookup"><span data-stu-id="1dcba-135">FTP Command and Meaning</span></span>

- <span data-ttu-id="1dcba-136">**CWD sökväg**: *ändra arbets katalog*</span><span class="sxs-lookup"><span data-stu-id="1dcba-136">**CWD path**: *Change working directory*</span></span>
- <span data-ttu-id="1dcba-137">**&-Fil** namn: *ta bort det angivna fil namnet*</span><span class="sxs-lookup"><span data-stu-id="1dcba-137">**DELE filename**: *Delete specified file name*</span></span>
- <span data-ttu-id="1dcba-138">**List katalog**: *Hämta katalog lista*</span><span class="sxs-lookup"><span data-stu-id="1dcba-138">**LIST directory**: *Get directory listing*</span></span>
- <span data-ttu-id="1dcba-139">**MKD-katalog**: *Skapa ny katalog*</span><span class="sxs-lookup"><span data-stu-id="1dcba-139">**MKD directory**: *Make new directory*</span></span>
- <span data-ttu-id="1dcba-140">**NLST katalog**: *Hämta katalog lista*</span><span class="sxs-lookup"><span data-stu-id="1dcba-140">**NLST directory**: *Get directory listing*</span></span>
- <span data-ttu-id="1dcba-141">**Noop**: *Ingen åtgärd, returnerar lyckade*</span><span class="sxs-lookup"><span data-stu-id="1dcba-141">**NOOP**: *No operation, returns success*</span></span>
- <span data-ttu-id="1dcba-142">Lösen **ord**: *Ange lösen ord för inloggning*</span><span class="sxs-lookup"><span data-stu-id="1dcba-142">**PASS password**: *Provide password for login*</span></span>
- <span data-ttu-id="1dcba-143">**Pasv**: *begär passivt överförings läge*</span><span class="sxs-lookup"><span data-stu-id="1dcba-143">**PASV**: *Request passive transfer mode*</span></span>
- <span data-ttu-id="1dcba-144">**PWD-sökväg**: *pickup aktuell katalog Sök väg*</span><span class="sxs-lookup"><span data-stu-id="1dcba-144">**PWD path**: *Pickup current directory path*</span></span>
- <span data-ttu-id="1dcba-145">**Avsluta**: *Avsluta klient anslutning*</span><span class="sxs-lookup"><span data-stu-id="1dcba-145">**QUIT**: *Terminate Client connection*</span></span>
- <span data-ttu-id="1dcba-146">**Retr fil namn**: *Läs angiven fil*</span><span class="sxs-lookup"><span data-stu-id="1dcba-146">**RETR filename**: *Read specified file*</span></span>
- <span data-ttu-id="1dcba-147">**RMD-katalog**: *ta bort angiven katalog*</span><span class="sxs-lookup"><span data-stu-id="1dcba-147">**RMD directory**: *Delete specified directory*</span></span>
- <span data-ttu-id="1dcba-148">**RNFR oldfilename**: *Ange fil att byta namn på*</span><span class="sxs-lookup"><span data-stu-id="1dcba-148">**RNFR oldfilename**: *Specify file to rename*</span></span>
- <span data-ttu-id="1dcba-149">**RNTO newfilename**: *Byt namn på filen till det angivna fil namnet*</span><span class="sxs-lookup"><span data-stu-id="1dcba-149">**RNTO newfilename**: *Rename file to supplied file name*</span></span>
- <span data-ttu-id="1dcba-150">**Lagr fil namn**: *Skriv angiven fil*</span><span class="sxs-lookup"><span data-stu-id="1dcba-150">**STOR filename**: *Write specified file*</span></span>
- <span data-ttu-id="1dcba-151">**Skriv I**: *Välj avbildning av binär fil*</span><span class="sxs-lookup"><span data-stu-id="1dcba-151">**TYPE I**: *Select binary file image*</span></span>
- <span data-ttu-id="1dcba-152">**Användar namn**: *Ange användar namn för inloggning*</span><span class="sxs-lookup"><span data-stu-id="1dcba-152">**USER username**: *Provide username for login*</span></span>
- <span data-ttu-id="1dcba-153">**Port ip_address, Port**: *Ange IP-adress och klient data port*</span><span class="sxs-lookup"><span data-stu-id="1dcba-153">**PORT ip_address,port**: *Provide IP address and Client data port*</span></span>

<span data-ttu-id="1dcba-154">Dessa ASCII-kommandon används internt av NetX FTP-klientprogrammet för att utföra FTP-åtgärder med FTP-servern.</span><span class="sxs-lookup"><span data-stu-id="1dcba-154">These ASCII commands are used internally by the NetX FTP Client software to perform FTP operations with the FTP Server.</span></span>

## <a name="ftp-server-responses"></a><span data-ttu-id="1dcba-155">Svar på FTP-servern</span><span class="sxs-lookup"><span data-stu-id="1dcba-155">FTP Server Responses</span></span>

<span data-ttu-id="1dcba-156">FTP-servern använder sig av en *VÄLKÄND TCP-port 21* för att fält begär Anden om klient kommandon.</span><span class="sxs-lookup"><span data-stu-id="1dcba-156">The FTP Server utilizes the *well-known TCP port 21* to field Client command requests.</span></span> <span data-ttu-id="1dcba-157">När FTP-servern bearbetar klient kommandot returneras ett fyrsiffrigt numeriskt svar i ASCII följt av en valfri ASCII-sträng.</span><span class="sxs-lookup"><span data-stu-id="1dcba-157">Once the FTP Server processes the Client command, it returns a 3-digit numeric response in ASCII followed by an optional ASCII string.</span></span> <span data-ttu-id="1dcba-158">Det numeriska svaret används av FTP-klientprogramvaran för att avgöra om åtgärden lyckades eller misslyckades.</span><span class="sxs-lookup"><span data-stu-id="1dcba-158">The numeric response is used by the FTP Client software to determine whether the operation succeeded or failed.</span></span> <span data-ttu-id="1dcba-159">Här följer en lista över olika FTP-servrars svar på klient kommandon:</span><span class="sxs-lookup"><span data-stu-id="1dcba-159">The following lists various FTP Server responses to Client commands:</span></span>

### <a name="first-numeric-field-and-meaning"></a><span data-ttu-id="1dcba-160">Första numeriska fältet och innebörden</span><span class="sxs-lookup"><span data-stu-id="1dcba-160">First Numeric Field and Meaning</span></span>

- <span data-ttu-id="1dcba-161">**1xx**: *positiv preliminär status – ett annat svar kommer*.</span><span class="sxs-lookup"><span data-stu-id="1dcba-161">**1xx**: *Positive preliminary status – another reply coming*.</span></span>
- <span data-ttu-id="1dcba-162">**2xx**: *positiv slut för ande status*.</span><span class="sxs-lookup"><span data-stu-id="1dcba-162">**2xx**: *Positive completion status*.</span></span>
- <span data-ttu-id="1dcba-163">**3xx**: *positiv preliminär status – ett annat kommando måste skickas*.</span><span class="sxs-lookup"><span data-stu-id="1dcba-163">**3xx**: *Positive preliminary status – another command must be sent*.</span></span>
- <span data-ttu-id="1dcba-164">**4xx**: *tillfälligt fel tillstånd*.</span><span class="sxs-lookup"><span data-stu-id="1dcba-164">**4xx**: *Temporary error condition*.</span></span>
- <span data-ttu-id="1dcba-165">**5xx**: *fel villkor.*</span><span class="sxs-lookup"><span data-stu-id="1dcba-165">**5xx**: *Error condition.*</span></span>

### <a name="second-numeric-field-and-meaning"></a><span data-ttu-id="1dcba-166">Andra numeriska fältet och betydelsen</span><span class="sxs-lookup"><span data-stu-id="1dcba-166">Second Numeric Field and Meaning</span></span>

- <span data-ttu-id="1dcba-167">**X0X**: syntaxfel i kommandot.</span><span class="sxs-lookup"><span data-stu-id="1dcba-167">**x0x**: Syntax error in command.</span></span>
- <span data-ttu-id="1dcba-168">**x1x**: informations meddelande.</span><span class="sxs-lookup"><span data-stu-id="1dcba-168">**x1x**: Informational message.</span></span>
- <span data-ttu-id="1dcba-169">**x2x**: anslutning relaterad.</span><span class="sxs-lookup"><span data-stu-id="1dcba-169">**x2x**: Connection related.</span></span>
- <span data-ttu-id="1dcba-170">**x3x**: autentisering relaterad.</span><span class="sxs-lookup"><span data-stu-id="1dcba-170">**x3x**: Authentication related.</span></span>
- <span data-ttu-id="1dcba-171">**x4x**: ospecificerad.</span><span class="sxs-lookup"><span data-stu-id="1dcba-171">**x4x**: Unspecified.</span></span>
- <span data-ttu-id="1dcba-172">**x5x**: fil system relaterat.</span><span class="sxs-lookup"><span data-stu-id="1dcba-172">**x5x**: File system related.</span></span>

<span data-ttu-id="1dcba-173">Till exempel kommer en klientbegäran att koppla från en FTP-anslutning med kommandot QUIT att svara med en "221"-kod från servern – om från kopplingen lyckas.</span><span class="sxs-lookup"><span data-stu-id="1dcba-173">For example, a Client request to disconnect an FTP connection with the QUIT command will typically be responded with a "221" code from the Server – if the disconnect is successful.</span></span>

## <a name="ftp-passive-transfer-mode"></a><span data-ttu-id="1dcba-174">Läge för passiv FTP-överföring</span><span class="sxs-lookup"><span data-stu-id="1dcba-174">FTP Passive Transfer Mode</span></span>

<span data-ttu-id="1dcba-175">Som standard använder FTP-klienten för NetX det aktiva transport läget för att utbyta data via datasocketen med FTP-servern.</span><span class="sxs-lookup"><span data-stu-id="1dcba-175">By default, the NetX FTP Client uses the active transport mode to exchange data over the data socket with the FTP server.</span></span> <span data-ttu-id="1dcba-176">Problemet med den här överenskommelsen är att det krävs att FTP-klienten öppnar en TCP-servers socket för att FTP-servern ska kunna ansluta till den.</span><span class="sxs-lookup"><span data-stu-id="1dcba-176">The problem with this arrangement is that it requires the FTP Client to open a TCP server socket for the FTP Server to connect to.</span></span> <span data-ttu-id="1dcba-177">Detta innebär en möjlig säkerhets risk och kan blockeras av klient brand väggen.</span><span class="sxs-lookup"><span data-stu-id="1dcba-177">This represents a possible security risk and may be blocked by the Client firewall.</span></span> <span data-ttu-id="1dcba-178">Passivt överförings läge skiljer sig från aktivt transport läge genom att låta FTP-servern skapa TCP-serverns socket på data anslutningen.</span><span class="sxs-lookup"><span data-stu-id="1dcba-178">Passive transfer mode differs from active transport mode by having the FTP server create the TCP server socket on the data connection.</span></span> <span data-ttu-id="1dcba-179">Detta eliminerar säkerhets risken (för FTP-klienten).</span><span class="sxs-lookup"><span data-stu-id="1dcba-179">This eliminates the security risk (for the FTP Client).</span></span>

<span data-ttu-id="1dcba-180">Om du vill aktivera passiv data överföring anropar programmet *nx_ftp_client_passive_mode_set* på en tidigare skapad FTP-klient med det andra argumentet inställt på NX_TRUE.</span><span class="sxs-lookup"><span data-stu-id="1dcba-180">To enable passive data transfer, the application calls *nx_ftp_client_passive_mode_set* on a previously created FTP Client with the second argument set to NX_TRUE.</span></span> <span data-ttu-id="1dcba-181">Därefter försöker alla efterföljande NetX FTP-klienter för överföring av data (NLST, RETR, lagr) i passivt transport läge.</span><span class="sxs-lookup"><span data-stu-id="1dcba-181">Thereafter, all subsequent NetX FTP Client services for transferring data (NLST, RETR, STOR) are attempted in the passive transport mode.</span></span>

<span data-ttu-id="1dcba-182">FTP-klienten skickar först kommandot PASV (inga argument).</span><span class="sxs-lookup"><span data-stu-id="1dcba-182">The FTP Client first sends the PASV command (no arguments).</span></span> <span data-ttu-id="1dcba-183">Om FTP-servern har stöd för denna begäran returnerar den 227 "OK"-svaret.</span><span class="sxs-lookup"><span data-stu-id="1dcba-183">If the FTP server supports this request it will return the 227 "OK" response.</span></span> <span data-ttu-id="1dcba-184">Klienten skickar sedan begäran till RETR.</span><span class="sxs-lookup"><span data-stu-id="1dcba-184">Then the Client sends the request e.g. RETR.</span></span> <span data-ttu-id="1dcba-185">Om servern vägrar passivt överförings läge returnerar NetX FTP-klienttjänsten en fel status.</span><span class="sxs-lookup"><span data-stu-id="1dcba-185">If the server refuses passive transfer mode, the NetX FTP Client service returns an error status.</span></span>

<span data-ttu-id="1dcba-186">Om du vill inaktivera passivt transport läge och återgå till aktivt transport läge, anropar programmet *nx_ftp_client_passive_mode_set* med det andra argumentet inställt på NX_FALSE.</span><span class="sxs-lookup"><span data-stu-id="1dcba-186">To disable passive transport mode and return to active transport mode, the application calls *nx_ftp_client_passive_mode_set* with the second argument set to NX_FALSE.</span></span>

## <a name="ftp-communication"></a><span data-ttu-id="1dcba-187">FTP-kommunikation</span><span class="sxs-lookup"><span data-stu-id="1dcba-187">FTP Communication</span></span>

<span data-ttu-id="1dcba-188">FTP-servern använder sig av en *VÄLKÄND TCP-port 21* för att fält klient begär Anden.</span><span class="sxs-lookup"><span data-stu-id="1dcba-188">The FTP Server utilizes the *well-known TCP port 21* to field Client requests.</span></span> <span data-ttu-id="1dcba-189">FTP-klienter kan använda alla tillgängliga TCP-portar.</span><span class="sxs-lookup"><span data-stu-id="1dcba-189">FTP Clients may use any available TCP port.</span></span> <span data-ttu-id="1dcba-190">Den allmänna sekvensen av FTP-händelser är följande:</span><span class="sxs-lookup"><span data-stu-id="1dcba-190">The general sequence of FTP events is as follows:</span></span>

### <a name="ftp-read-file-requests"></a><span data-ttu-id="1dcba-191">Begäran om läsning av FTP-fil</span><span class="sxs-lookup"><span data-stu-id="1dcba-191">FTP Read File Requests</span></span>

1. <span data-ttu-id="1dcba-192">Klient problem TCP Anslut till server port 21.</span><span class="sxs-lookup"><span data-stu-id="1dcba-192">Client issues TCP connect to Server port 21.</span></span>
1. <span data-ttu-id="1dcba-193">Servern skickar "220"-svar till signalen lyckades.</span><span class="sxs-lookup"><span data-stu-id="1dcba-193">Server sends "220" response to signal success.</span></span>
1. <span data-ttu-id="1dcba-194">Klienten skickar meddelandet "användare" med "username."</span><span class="sxs-lookup"><span data-stu-id="1dcba-194">Client sends "USER" message with "username."</span></span>
1. <span data-ttu-id="1dcba-195">Servern skickar "331"-svar till signalen lyckades.</span><span class="sxs-lookup"><span data-stu-id="1dcba-195">Server sends "331" response to signal success.</span></span>
1. <span data-ttu-id="1dcba-196">Klienten skickar "PASS"-meddelandet med "Password".</span><span class="sxs-lookup"><span data-stu-id="1dcba-196">Client sends "PASS" message with "password."</span></span>
1. <span data-ttu-id="1dcba-197">Servern skickar "230"-svar till signalen lyckades.</span><span class="sxs-lookup"><span data-stu-id="1dcba-197">Server sends "230" response to signal success.</span></span>
1. <span data-ttu-id="1dcba-198">Klienten skickar meddelandet "typ I" för binär överföring.</span><span class="sxs-lookup"><span data-stu-id="1dcba-198">Client sends "TYPE I" message for binary transfer.</span></span>
1. <span data-ttu-id="1dcba-199">Servern skickar "200"-svar till signalen lyckades.</span><span class="sxs-lookup"><span data-stu-id="1dcba-199">Server sends "200" response to signal success.</span></span>
1. <span data-ttu-id="1dcba-200">Klienten skickar meddelandet "PORT" med IP-adress och port.</span><span class="sxs-lookup"><span data-stu-id="1dcba-200">Client sends "PORT" message with IP address and port.</span></span>
1. <span data-ttu-id="1dcba-201">Servern skickar "200"-svar till signalen lyckades.</span><span class="sxs-lookup"><span data-stu-id="1dcba-201">Server sends "200" response to signal success.</span></span>
1. <span data-ttu-id="1dcba-202">Klienten skickar meddelandet "RETR" med fil namnet att läsa.</span><span class="sxs-lookup"><span data-stu-id="1dcba-202">Client sends "RETR" message with file name to read.</span></span>
1. <span data-ttu-id="1dcba-203">Servern skapar datasocket och ansluter med den klient data port som anges i "PORT"-kommandot.</span><span class="sxs-lookup"><span data-stu-id="1dcba-203">Server creates data socket and connects with client data port specified in the "PORT" command.</span></span>
1. <span data-ttu-id="1dcba-204">Servern skickar "125"-svaret till signal filen Read har startats.</span><span class="sxs-lookup"><span data-stu-id="1dcba-204">Server sends "125" response to signal file read has started.</span></span>
1. <span data-ttu-id="1dcba-205">Servern skickar innehållet i filen via data anslutningen.</span><span class="sxs-lookup"><span data-stu-id="1dcba-205">Server sends contents of file through the data connection.</span></span> <span data-ttu-id="1dcba-206">Den här processen fortsätter tills filen har överförts fullständigt.</span><span class="sxs-lookup"><span data-stu-id="1dcba-206">This process continues until file is completely transferred.</span></span>
1. <span data-ttu-id="1dcba-207">När det är klart kopplar servern från data anslutningen.</span><span class="sxs-lookup"><span data-stu-id="1dcba-207">When finished, Server disconnects data connection.</span></span>
1. <span data-ttu-id="1dcba-208">Servern skickar "250"-svaret till signal filen Read har slutförts.</span><span class="sxs-lookup"><span data-stu-id="1dcba-208">Server sends "250" response to signal file read is successful.</span></span>
1. <span data-ttu-id="1dcba-209">Klienter skickar "avsluta" för att avsluta FTP-anslutningen.</span><span class="sxs-lookup"><span data-stu-id="1dcba-209">Clients sends "QUIT" to terminate FTP connection.</span></span>
1. <span data-ttu-id="1dcba-210">Servern skickar "221"-svaret till signal-från koppling lyckades.</span><span class="sxs-lookup"><span data-stu-id="1dcba-210">Server sends "221" response to signal disconnect is successful.</span></span>
1. <span data-ttu-id="1dcba-211">Servern kopplar från FTP-anslutningen.</span><span class="sxs-lookup"><span data-stu-id="1dcba-211">Server disconnects FTP connection.</span></span>

<span data-ttu-id="1dcba-212">Som tidigare nämnts är den enda skillnaden mellan FTP som körs via IPv4 och IPv6 att PORT kommandot ersätts med kommandot EPRT för IPv6</span><span class="sxs-lookup"><span data-stu-id="1dcba-212">As mentioned previously, the only difference between FTP running over IPv4 and IPv6 is the PORT command is replaced with the EPRT command for IPv6</span></span>

<span data-ttu-id="1dcba-213">Om FTP-klienten gör en läsbegäran i passivt överförings läge är kommando ordningen enligt följande (**fetstilta** linjer indikerar ett annat steg från aktivt överförings läge):</span><span class="sxs-lookup"><span data-stu-id="1dcba-213">If the FTP Client makes a read request in the passive transfer mode, the command sequence is as follows (**bolded** lines indicates a different step from active transfer mode):</span></span>

1. <span data-ttu-id="1dcba-214">Klient problem TCP Anslut till server port 21.</span><span class="sxs-lookup"><span data-stu-id="1dcba-214">Client issues TCP connect to Server port 21.</span></span>
1. <span data-ttu-id="1dcba-215">Servern skickar "220"-svar till signalen lyckades.</span><span class="sxs-lookup"><span data-stu-id="1dcba-215">Server sends "220" response to signal success.</span></span>
1. <span data-ttu-id="1dcba-216">Klienten skickar meddelandet "användare" med "username."</span><span class="sxs-lookup"><span data-stu-id="1dcba-216">Client sends "USER" message with "username."</span></span>
1. <span data-ttu-id="1dcba-217">Servern skickar "331"-svar till signalen lyckades.</span><span class="sxs-lookup"><span data-stu-id="1dcba-217">Server sends "331" response to signal success.</span></span>
1. <span data-ttu-id="1dcba-218">Klienten skickar "PASS"-meddelandet med "Password".</span><span class="sxs-lookup"><span data-stu-id="1dcba-218">Client sends "PASS" message with "password."</span></span>
1. <span data-ttu-id="1dcba-219">Servern skickar "230"-svar till signalen lyckades.</span><span class="sxs-lookup"><span data-stu-id="1dcba-219">Server sends "230" response to signal success.</span></span>
1. <span data-ttu-id="1dcba-220">Klienten skickar meddelandet "typ I" för binär överföring.</span><span class="sxs-lookup"><span data-stu-id="1dcba-220">Client sends "TYPE I" message for binary transfer.</span></span>
1. <span data-ttu-id="1dcba-221">Servern skickar "200"-svar till signalen lyckades.</span><span class="sxs-lookup"><span data-stu-id="1dcba-221">Server sends "200" response to signal success.</span></span>
1. <span data-ttu-id="1dcba-222">**Klienten skickar meddelandet "PASV".**</span><span class="sxs-lookup"><span data-stu-id="1dcba-222">**Client sends "PASV" message.**</span></span>
1. <span data-ttu-id="1dcba-223">**Servern skickar "227"-svar, och IP-adressen och porten som klienten ska ansluta till, för att signalera lyckas.**</span><span class="sxs-lookup"><span data-stu-id="1dcba-223">**Server sends "227" response, and IP address and port for the Client to connect to, to signal success.**</span></span>
1. <span data-ttu-id="1dcba-224">Klienten skickar meddelandet "RETR" med fil namnet att läsa.</span><span class="sxs-lookup"><span data-stu-id="1dcba-224">Client sends "RETR" message with file name to read.</span></span>
1. <span data-ttu-id="1dcba-225">**Servern skapar dataserver-socket och lyssnar efter klient anslutnings förfrågan på denna socket med den port som anges i svaret "227".**</span><span class="sxs-lookup"><span data-stu-id="1dcba-225">**Server creates data server socket and listens for the Client connect request on this socket using the port specified in the "227" response.**</span></span>
1. <span data-ttu-id="1dcba-226">**Servern skickar "150"-svaret på kontrollens socket till signal filens läsning har påbörjats.**</span><span class="sxs-lookup"><span data-stu-id="1dcba-226">**Server sends "150" response on the control socket to signal file read has started.**</span></span>
1. <span data-ttu-id="1dcba-227">Servern skickar innehållet i filen via data anslutningen.</span><span class="sxs-lookup"><span data-stu-id="1dcba-227">Server sends contents of file through the data connection.</span></span> <span data-ttu-id="1dcba-228">Den här processen fortsätter tills filen har överförts fullständigt.</span><span class="sxs-lookup"><span data-stu-id="1dcba-228">This process continues until file is completely transferred.</span></span>
1. <span data-ttu-id="1dcba-229">När det är klart kopplar servern från data anslutningen.</span><span class="sxs-lookup"><span data-stu-id="1dcba-229">When finished, Server disconnects data connection.</span></span>
1. <span data-ttu-id="1dcba-230">**Servern skickar "226"-svaret på kontroll-socketen till signal filens läsning har slutförts.**</span><span class="sxs-lookup"><span data-stu-id="1dcba-230">**Server sends "226" response on the control socket to signal file read is successful.**</span></span>
1. <span data-ttu-id="1dcba-231">Klienten skickar "QUIT" för att avsluta FTP-anslutningen.</span><span class="sxs-lookup"><span data-stu-id="1dcba-231">Client sends "QUIT" to terminate FTP connection.</span></span>
1. <span data-ttu-id="1dcba-232">Servern skickar "221"-svaret till signal-från koppling lyckades.</span><span class="sxs-lookup"><span data-stu-id="1dcba-232">Server sends "221" response to signal disconnect is successful.</span></span>
1. <span data-ttu-id="1dcba-233">Servern kopplar från FTP-anslutningen.</span><span class="sxs-lookup"><span data-stu-id="1dcba-233">Server disconnects FTP connection.</span></span>

### <a name="ftp-write-requests"></a><span data-ttu-id="1dcba-234">FTP-Write-begäranden</span><span class="sxs-lookup"><span data-stu-id="1dcba-234">FTP Write Requests</span></span>

1. <span data-ttu-id="1dcba-235">Klient problem TCP Anslut till server port 21.</span><span class="sxs-lookup"><span data-stu-id="1dcba-235">Client issues TCP connect to Server port 21.</span></span>
1. <span data-ttu-id="1dcba-236">Servern skickar "220"-svar till signalen lyckades.</span><span class="sxs-lookup"><span data-stu-id="1dcba-236">Server sends "220" response to signal success.</span></span>
1. <span data-ttu-id="1dcba-237">Klienten skickar meddelandet "användare" med "username."</span><span class="sxs-lookup"><span data-stu-id="1dcba-237">Client sends "USER" message with "username."</span></span>
1. <span data-ttu-id="1dcba-238">Servern skickar "331"-svar till signalen lyckades.</span><span class="sxs-lookup"><span data-stu-id="1dcba-238">Server sends "331" response to signal success.</span></span>
1. <span data-ttu-id="1dcba-239">Klienten skickar "PASS"-meddelandet med "Password".</span><span class="sxs-lookup"><span data-stu-id="1dcba-239">Client sends "PASS" message with "password."</span></span>
1. <span data-ttu-id="1dcba-240">Servern skickar "230"-svar till signalen lyckades.</span><span class="sxs-lookup"><span data-stu-id="1dcba-240">Server sends "230" response to signal success.</span></span>
1. <span data-ttu-id="1dcba-241">Klienten skickar meddelandet "typ I" för binär överföring.</span><span class="sxs-lookup"><span data-stu-id="1dcba-241">Client sends "TYPE I" message for binary transfer.</span></span>
1. <span data-ttu-id="1dcba-242">Servern skickar "200"-svar till signalen lyckades.</span><span class="sxs-lookup"><span data-stu-id="1dcba-242">Server sends "200" response to signal success.</span></span>
1. <span data-ttu-id="1dcba-243">Klienten skickar meddelandet "PORT" med IP-adress och port.</span><span class="sxs-lookup"><span data-stu-id="1dcba-243">Client sends "PORT" message with IP address and port.</span></span>
1. <span data-ttu-id="1dcba-244">Servern skickar "200"-svar till signalen lyckades.</span><span class="sxs-lookup"><span data-stu-id="1dcba-244">Server sends "200" response to signal success.</span></span>
1. <span data-ttu-id="1dcba-245">Klienten skickar meddelandet "lagr" med fil namnet att skriva.</span><span class="sxs-lookup"><span data-stu-id="1dcba-245">Client sends "STOR" message with file name to write.</span></span>
1. <span data-ttu-id="1dcba-246">Servern skapar datasocket och ansluter med den klient data port som anges i "PORT"-kommandot.</span><span class="sxs-lookup"><span data-stu-id="1dcba-246">Server creates data socket and connects with client data port specified in the "PORT" command.</span></span>
1. <span data-ttu-id="1dcba-247">Servern skickar "125"-svar till signal filen som skrivs har startats.</span><span class="sxs-lookup"><span data-stu-id="1dcba-247">Server sends "125" response to signal file write has started.</span></span>
1. <span data-ttu-id="1dcba-248">Klienten skickar innehållet i filen via data anslutningen.</span><span class="sxs-lookup"><span data-stu-id="1dcba-248">Client sends contents of file through the data connection.</span></span> <span data-ttu-id="1dcba-249">Den här processen fortsätter tills filen har överförts fullständigt.</span><span class="sxs-lookup"><span data-stu-id="1dcba-249">This process continues until file is completely transferred.</span></span>
1. <span data-ttu-id="1dcba-250">När det är klart kopplar klienten från data anslutningen.</span><span class="sxs-lookup"><span data-stu-id="1dcba-250">When finished, Client disconnects data connection.</span></span>
1. <span data-ttu-id="1dcba-251">Servern skickar "250"-svar till signal filens skrivning har slutförts.</span><span class="sxs-lookup"><span data-stu-id="1dcba-251">Server sends "250" response to signal file write is successful.</span></span>
1. <span data-ttu-id="1dcba-252">Klienter skickar "avsluta" för att avsluta FTP-anslutningen.</span><span class="sxs-lookup"><span data-stu-id="1dcba-252">Clients sends "QUIT" to terminate FTP connection.</span></span>
1. <span data-ttu-id="1dcba-253">Servern skickar "221"-svaret till signal-från koppling lyckades.</span><span class="sxs-lookup"><span data-stu-id="1dcba-253">Server sends "221" response to signal disconnect is successful.</span></span>
1. <span data-ttu-id="1dcba-254">Servern kopplar från FTP-anslutningen.</span><span class="sxs-lookup"><span data-stu-id="1dcba-254">Server disconnects FTP connection.</span></span>

<span data-ttu-id="1dcba-255">Om FTP-klienten gör en skrivbegäran i passivt överförings läge är kommando ordningen enligt följande (**fetstilta** rader visar ett annat steg från aktivt överförings läge):</span><span class="sxs-lookup"><span data-stu-id="1dcba-255">If the FTP Client makes a write request in the passive transfer mode, the command sequence is as follows (**bolded** lines indicates a different step from active transfer mode):</span></span>

1. <span data-ttu-id="1dcba-256">Klient problem TCP Anslut till server port 21.</span><span class="sxs-lookup"><span data-stu-id="1dcba-256">Client issues TCP connect to Server port 21.</span></span>
1. <span data-ttu-id="1dcba-257">Servern skickar "220"-svar till signalen lyckades.</span><span class="sxs-lookup"><span data-stu-id="1dcba-257">Server sends "220" response to signal success.</span></span>
1. <span data-ttu-id="1dcba-258">Klienten skickar meddelandet "användare" med "username."</span><span class="sxs-lookup"><span data-stu-id="1dcba-258">Client sends "USER" message with "username."</span></span>
1. <span data-ttu-id="1dcba-259">Servern skickar "331"-svar till signalen lyckades.</span><span class="sxs-lookup"><span data-stu-id="1dcba-259">Server sends "331" response to signal success.</span></span>
1. <span data-ttu-id="1dcba-260">Klienten skickar "PASS"-meddelandet med "Password".</span><span class="sxs-lookup"><span data-stu-id="1dcba-260">Client sends "PASS" message with "password."</span></span>
1. <span data-ttu-id="1dcba-261">Servern skickar "230"-svar till signalen lyckades.</span><span class="sxs-lookup"><span data-stu-id="1dcba-261">Server sends "230" response to signal success.</span></span>
1. <span data-ttu-id="1dcba-262">Klienten skickar meddelandet "typ I" för binär överföring.</span><span class="sxs-lookup"><span data-stu-id="1dcba-262">Client sends "TYPE I" message for binary transfer.</span></span>
1. <span data-ttu-id="1dcba-263">Servern skickar "200"-svar till signalen lyckades.</span><span class="sxs-lookup"><span data-stu-id="1dcba-263">Server sends "200" response to signal success.</span></span>
1. <span data-ttu-id="1dcba-264">**Klienten skickar meddelandet "PASV".**</span><span class="sxs-lookup"><span data-stu-id="1dcba-264">**Client sends "PASV" message.**</span></span>
1. <span data-ttu-id="1dcba-265">**Servern skickar "227"-svar, och IP-adressen och porten som klienten ska ansluta till, för att signalera lyckas.**</span><span class="sxs-lookup"><span data-stu-id="1dcba-265">**Server sends "227" response, and IP address and port for the Client to connect to, to signal success.**</span></span>
1. <span data-ttu-id="1dcba-266">Klienten skickar meddelandet "lagr" med fil namnet att skriva.</span><span class="sxs-lookup"><span data-stu-id="1dcba-266">Client sends "STOR" message with file name to write.</span></span>
1. <span data-ttu-id="1dcba-267">**Servern skapar dataserver-socket och lyssnar efter klient anslutnings förfrågan på denna socket med den port som anges i svaret "227".**</span><span class="sxs-lookup"><span data-stu-id="1dcba-267">**Server creates data server socket and listens for the Client connect request on this socket using the port specified in the "227" response.**</span></span>
1. <span data-ttu-id="1dcba-268">**Servern skickar "150"-svaret på kontroll-socketen till signal fils skrivning har startats.**</span><span class="sxs-lookup"><span data-stu-id="1dcba-268">**Server sends "150" response on the control socket to signal file write has started.**</span></span>
1. <span data-ttu-id="1dcba-269">Klienten skickar innehållet i filen via data anslutningen.</span><span class="sxs-lookup"><span data-stu-id="1dcba-269">Client sends contents of file through the data connection.</span></span> <span data-ttu-id="1dcba-270">Den här processen fortsätter tills filen har överförts fullständigt.</span><span class="sxs-lookup"><span data-stu-id="1dcba-270">This process continues until file is completely transferred.</span></span>
1. <span data-ttu-id="1dcba-271">När det är klart kopplar klienten från data anslutningen.</span><span class="sxs-lookup"><span data-stu-id="1dcba-271">When finished, Client disconnects data connection.</span></span>
1. <span data-ttu-id="1dcba-272">**Servern skickar "226"-svar på kontroll-socketen till signal fils skrivningen lyckades.**</span><span class="sxs-lookup"><span data-stu-id="1dcba-272">**Server sends "226" response on the control socket to signal file write is successful.**</span></span>
1. <span data-ttu-id="1dcba-273">Klienten skickar "QUIT" för att avsluta FTP-anslutningen.</span><span class="sxs-lookup"><span data-stu-id="1dcba-273">Client sends "QUIT" to terminate FTP connection.</span></span>
1. <span data-ttu-id="1dcba-274">Servern skickar "221"-svaret till signal-från koppling lyckades.</span><span class="sxs-lookup"><span data-stu-id="1dcba-274">Server sends "221" response to signal disconnect is successful.</span></span>
1. <span data-ttu-id="1dcba-275">Servern kopplar från FTP-anslutningen.</span><span class="sxs-lookup"><span data-stu-id="1dcba-275">Server disconnects FTP connection.</span></span>

## <a name="ftp-authentication"></a><span data-ttu-id="1dcba-276">FTP-autentisering</span><span class="sxs-lookup"><span data-stu-id="1dcba-276">FTP Authentication</span></span>

<span data-ttu-id="1dcba-277">När en FTP-anslutning sker måste klienten förse servern med ett *användar namn* och *lösen ord*.</span><span class="sxs-lookup"><span data-stu-id="1dcba-277">Whenever an FTP connection takes place, the Client must provide the Server with a *username* and *password*.</span></span> <span data-ttu-id="1dcba-278">Vissa FTP-platser tillåter vad som kallas *Anonym FTP*, vilket tillåter FTP-åtkomst utan ett visst användar namn och lösen ord.</span><span class="sxs-lookup"><span data-stu-id="1dcba-278">Some FTP sites allow what is called *Anonymous FTP*, which allows FTP access without a specific username and password.</span></span> <span data-ttu-id="1dcba-279">För den här typen av anslutning ska "Anonym" anges för användar namn och lösen ordet ska vara en fullständig e-postadress.</span><span class="sxs-lookup"><span data-stu-id="1dcba-279">For this type of connection, "anonymous" should be supplied for username and the password should be a complete e-mail address.</span></span>

<span data-ttu-id="1dcba-280">Användaren ansvarar för att tillhandahålla NetX FTP med inloggnings-och utloggnings rutiner för autentisering.</span><span class="sxs-lookup"><span data-stu-id="1dcba-280">The user is responsible for supplying NetX FTP with login and logout authentication routines.</span></span> <span data-ttu-id="1dcba-281">De anges under \***nx_ftp_server_create** _-funktionen och anropas från lösen ords bearbetningen.</span><span class="sxs-lookup"><span data-stu-id="1dcba-281">These are supplied during the \***nx_ftp_server_create** _ function and called from the password processing.</span></span> <span data-ttu-id="1dcba-282">Om funktionen _login \* returnerar NX_SUCCESS, är anslutningen autentiserad och FTP-åtgärder tillåts.</span><span class="sxs-lookup"><span data-stu-id="1dcba-282">If the _login\* function returns NX_SUCCESS, the connection is authenticated and FTP operations are allowed.</span></span> <span data-ttu-id="1dcba-283">Om *inloggnings* funktionen annars returnerar något annat än NX_SUCCESS avvisas anslutnings försöket.</span><span class="sxs-lookup"><span data-stu-id="1dcba-283">Otherwise, if the *login* function returns something other than NX_SUCCESS, the connection attempt is rejected.</span></span>

## <a name="ftp-multi-thread-support"></a><span data-ttu-id="1dcba-284">Stöd för FTP multi-Thread</span><span class="sxs-lookup"><span data-stu-id="1dcba-284">FTP Multi-Thread Support</span></span>

<span data-ttu-id="1dcba-285">NetX FTP Client Services kan anropas från flera trådar samtidigt.</span><span class="sxs-lookup"><span data-stu-id="1dcba-285">The NetX FTP Client services can be called from multiple threads simultaneously.</span></span> <span data-ttu-id="1dcba-286">Läs-eller Skriv begär Anden för en viss FTP-serverinstans bör dock göras i följd från samma tråd.</span><span class="sxs-lookup"><span data-stu-id="1dcba-286">However, read or write requests for a particular FTP Client instance should be done in sequence from the same thread.</span></span>

## <a name="ftp-rfcs"></a><span data-ttu-id="1dcba-287">FTP RFC</span><span class="sxs-lookup"><span data-stu-id="1dcba-287">FTP RFCs</span></span>

<span data-ttu-id="1dcba-288">NetX FTP är kompatibel med RFC959 och relaterade RFC: er.</span><span class="sxs-lookup"><span data-stu-id="1dcba-288">NetX FTP is compliant with RFC959 and related RFCs.</span></span>