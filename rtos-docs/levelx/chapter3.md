---
title: Stöd för Azure återställnings tider LevelX-NAND
description: NAND Flash-minne används ofta i LevelX för stor data lagring, vilket är typiskt för fil system.
author: philmea
ms.author: philmea
ms.date: 05/19/2020
ms.topic: article
ms.service: rtos
ms.openlocfilehash: 3286e4ea7f16b28ff55fc95a87a1e0c313ec4240
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 03/22/2021
ms.locfileid: "104826268"
---
# <a name="chapter-3---azure-rtos-levelx-nand-support"></a><span data-ttu-id="8862e-103">Kapitel 3 – Azure återställnings tider LevelX NAND support</span><span class="sxs-lookup"><span data-stu-id="8862e-103">Chapter 3 - Azure RTOS LevelX NAND support</span></span>

<span data-ttu-id="8862e-104">NAND Flash-minne används ofta för stor data lagring, vilket är typiskt för fil system.</span><span class="sxs-lookup"><span data-stu-id="8862e-104">NAND flash memory is commonly utilized for large data storage, which is typical of file systems.</span></span> <span data-ttu-id="8862e-105">NAND-minnet består av *block*.</span><span class="sxs-lookup"><span data-stu-id="8862e-105">NAND memory consists of *blocks*.</span></span> <span data-ttu-id="8862e-106">I varje NAND-block finns en serie *sidor*.</span><span class="sxs-lookup"><span data-stu-id="8862e-106">Within each NAND block is a series of *pages*.</span></span> <span data-ttu-id="8862e-107">NAND-block kan raderas, vilket innebär att alla sidor i NAND-blocket raderas (inställda på alla).</span><span class="sxs-lookup"><span data-stu-id="8862e-107">NAND blocks are erasable, which means that all pages within the NAND block are erased (set to all ones).</span></span> <span data-ttu-id="8862e-108">Varje NAND block-sida har en uppsättning med *extra byte* som används av Azure återställnings tider-LevelX för bokföring, felaktig block hantering och fel identifiering.</span><span class="sxs-lookup"><span data-stu-id="8862e-108">Each NAND block page has a set of *spare bytes* that are utilized by Azure RTOS LevelX for bookkeeping, bad block management, and error detection.</span></span> <span data-ttu-id="8862e-109">NAND block Pages är tillgängliga i olika storlekar.</span><span class="sxs-lookup"><span data-stu-id="8862e-109">NAND block pages are available in a variety of sizes.</span></span> <span data-ttu-id="8862e-110">De vanligaste sid storlekarna är:</span><span class="sxs-lookup"><span data-stu-id="8862e-110">The most common page sizes are:</span></span> 

| <span data-ttu-id="8862e-111">**Sid storlek**</span><span class="sxs-lookup"><span data-stu-id="8862e-111">**Page Size**</span></span> | <span data-ttu-id="8862e-112">**Lediga byte**</span><span class="sxs-lookup"><span data-stu-id="8862e-112">**Spare Bytes**</span></span> |
| ------------- | --------------- |
| <span data-ttu-id="8862e-113">256</span><span class="sxs-lookup"><span data-stu-id="8862e-113">256</span></span>           | <span data-ttu-id="8862e-114">8</span><span class="sxs-lookup"><span data-stu-id="8862e-114">8</span></span>               |
| <span data-ttu-id="8862e-115">512</span><span class="sxs-lookup"><span data-stu-id="8862e-115">512</span></span>           | <span data-ttu-id="8862e-116">16</span><span class="sxs-lookup"><span data-stu-id="8862e-116">16</span></span>              |
| <span data-ttu-id="8862e-117">2048</span><span class="sxs-lookup"><span data-stu-id="8862e-117">2048</span></span>          | <span data-ttu-id="8862e-118">64</span><span class="sxs-lookup"><span data-stu-id="8862e-118">64</span></span>              |

<span data-ttu-id="8862e-119">NAND-minnet skiljer sig från eller minne eftersom det inte finns någon direkt åtkomst, d.v.s. NAND-minnet kan inte läsas direkt från processorn som eller minne.</span><span class="sxs-lookup"><span data-stu-id="8862e-119">NAND memory differs from NOR memory in that there is no direct access, i.e., NAND memory cannot be read directly from the processor like NOR memory.</span></span> <span data-ttu-id="8862e-120">NAND-minne kan bara skrivas till efter en radering av ett begränsat antal gånger.</span><span class="sxs-lookup"><span data-stu-id="8862e-120">NAND memory can only be written to after an erase a limited number of times.</span></span> <span data-ttu-id="8862e-121">Återigen skiljer detta sig från eller minne som kan skrivas ett obegränsat antal gånger som ger skrivbegäran att ta bort uppsättnings bitar.</span><span class="sxs-lookup"><span data-stu-id="8862e-121">Again, this differs from NOR memory that can be written an unlimited number of times providing the write request is clearing set bits.</span></span> <span data-ttu-id="8862e-122">Slutligen är de extra byte som är kopplade till varje sida unika för NAND Flash.</span><span class="sxs-lookup"><span data-stu-id="8862e-122">Finally, the spare bytes associated with each page are unique to NAND flash.</span></span> <span data-ttu-id="8862e-123">Vanliga konfigurationer för extra byte är som visas i tabellen nedan.</span><span class="sxs-lookup"><span data-stu-id="8862e-123">Typical spare byte configurations are as shown in the table below.</span></span>

| <span data-ttu-id="8862e-124">**Lediga byte**</span><span class="sxs-lookup"><span data-stu-id="8862e-124">**Spare Bytes**</span></span> | <span data-ttu-id="8862e-125">**Byte-nummer**</span><span class="sxs-lookup"><span data-stu-id="8862e-125">**Byte numbers**</span></span> | <span data-ttu-id="8862e-126">**Konfiguration**</span><span class="sxs-lookup"><span data-stu-id="8862e-126">**Configuration**</span></span>     |
| ------------------------- | -------------- | --------------------- |
| <span data-ttu-id="8862e-127">8</span><span class="sxs-lookup"><span data-stu-id="8862e-127">8</span></span>                         | <span data-ttu-id="8862e-128">Byte 0-2:</span><span class="sxs-lookup"><span data-stu-id="8862e-128">Bytes 0-2:</span></span>     | <span data-ttu-id="8862e-129">ECC-byte</span><span class="sxs-lookup"><span data-stu-id="8862e-129">ECC bytes</span></span>             |
|                           | <span data-ttu-id="8862e-130">Byte 3, 4, 6, 7:</span><span class="sxs-lookup"><span data-stu-id="8862e-130">Bytes 3,4,6,7:</span></span> | <span data-ttu-id="8862e-131">LevelX sektor mappning</span><span class="sxs-lookup"><span data-stu-id="8862e-131">LevelX Sector Mapping</span></span> |
|                           | <span data-ttu-id="8862e-132">Byte 5:</span><span class="sxs-lookup"><span data-stu-id="8862e-132">Byte 5:</span></span>        | <span data-ttu-id="8862e-133">Felaktig block flagga</span><span class="sxs-lookup"><span data-stu-id="8862e-133">Bad block flag</span></span>        |
| <span data-ttu-id="8862e-134">16</span><span class="sxs-lookup"><span data-stu-id="8862e-134">16</span></span>                        | <span data-ttu-id="8862e-135">Byte 0-3, 6-7:</span><span class="sxs-lookup"><span data-stu-id="8862e-135">Bytes 0-3,6-7:</span></span> | <span data-ttu-id="8862e-136">ECC-byte</span><span class="sxs-lookup"><span data-stu-id="8862e-136">ECC bytes</span></span>             |
|                           | <span data-ttu-id="8862e-137">Byte 8-11:</span><span class="sxs-lookup"><span data-stu-id="8862e-137">Bytes 8-11:</span></span>    | <span data-ttu-id="8862e-138">LevelX sektor mappning</span><span class="sxs-lookup"><span data-stu-id="8862e-138">LevelX Sector Mapping</span></span> |
|                           | <span data-ttu-id="8862e-139">Byte 12-15:</span><span class="sxs-lookup"><span data-stu-id="8862e-139">Bytes 12-15:</span></span>   | <span data-ttu-id="8862e-140">Outnyttja</span><span class="sxs-lookup"><span data-stu-id="8862e-140">Unused</span></span>                |
|                           | <span data-ttu-id="8862e-141">Byte 5:</span><span class="sxs-lookup"><span data-stu-id="8862e-141">Byte 5:</span></span>        | <span data-ttu-id="8862e-142">Felaktig block flagga</span><span class="sxs-lookup"><span data-stu-id="8862e-142">Bad block flag</span></span>        |
| <span data-ttu-id="8862e-143">64</span><span class="sxs-lookup"><span data-stu-id="8862e-143">64</span></span>                        | <span data-ttu-id="8862e-144">Byte 0:</span><span class="sxs-lookup"><span data-stu-id="8862e-144">Byte 0:</span></span>        | <span data-ttu-id="8862e-145">Felaktig block flagga</span><span class="sxs-lookup"><span data-stu-id="8862e-145">Bad block flag</span></span>        |
|                           | <span data-ttu-id="8862e-146">Byte 2-5:</span><span class="sxs-lookup"><span data-stu-id="8862e-146">Bytes 2-5:</span></span>     | <span data-ttu-id="8862e-147">LevelX sektor mappning</span><span class="sxs-lookup"><span data-stu-id="8862e-147">LevelX Sector Mapping</span></span> |
|                           | <span data-ttu-id="8862e-148">Byte 6-39:</span><span class="sxs-lookup"><span data-stu-id="8862e-148">Bytes 6-39:</span></span>    | <span data-ttu-id="8862e-149">Outnyttja</span><span class="sxs-lookup"><span data-stu-id="8862e-149">Unused</span></span>                |
|                           | <span data-ttu-id="8862e-150">Byte 40-63:</span><span class="sxs-lookup"><span data-stu-id="8862e-150">Bytes 40-63:</span></span>   | <span data-ttu-id="8862e-151">ECC-byte</span><span class="sxs-lookup"><span data-stu-id="8862e-151">ECC bytes</span></span>             |

<span data-ttu-id="8862e-152">LevelX använder 4 av de extra bytena på varje NAND-sida för att hålla reda på den logiska sektor som är mappad till den fysiska NAND-sidan.</span><span class="sxs-lookup"><span data-stu-id="8862e-152">LevelX Utilizes 4 of the spare bytes of each NAND page for keeping track of the logical sector mapped to the physical NAND page.</span></span> <span data-ttu-id="8862e-153">Dessa 4 byte används för att implementera ett 32-bitars heltal utan tecken med ett LevelX-patentskyddat format.</span><span class="sxs-lookup"><span data-stu-id="8862e-153">These 4 bytes are used to implement a 32-bit unsigned integer with a LevelX proprietary format.</span></span> <span data-ttu-id="8862e-154">Den övre biten i 32-bitars fältet (bit 31) används för att ange att den logiska sektor-till-sidan-mappningen är giltig.</span><span class="sxs-lookup"><span data-stu-id="8862e-154">The upper bit of the 32-bit field (bit 31) is used to indicate the logical sector-to-page mapping is valid.</span></span> <span data-ttu-id="8862e-155">Om den här biten är 0 är informationen på den här sidan inte längre giltig.</span><span class="sxs-lookup"><span data-stu-id="8862e-155">If this bit is 0, the information in this page is no longer valid.</span></span> <span data-ttu-id="8862e-156">Nästa bit – bit 30 – används för att ange att den här sidan håller på att bli föråldrad och att en ny sektor skrivs.</span><span class="sxs-lookup"><span data-stu-id="8862e-156">The next bit—bit 30—is used to indicate this page is in the process of becoming obsolete and a new sector is being written.</span></span> <span data-ttu-id="8862e-157">Bit 29 används för att ange när mappnings post skrivningen är klar.</span><span class="sxs-lookup"><span data-stu-id="8862e-157">Bit 29 is used to indicate when the mapping entry write is complete.</span></span> <span data-ttu-id="8862e-158">Om bit 29 är 0, skrivs mappnings posten som färdig.</span><span class="sxs-lookup"><span data-stu-id="8862e-158">If bit 29 is 0, the mapping entry write is complete.</span></span> <span data-ttu-id="8862e-159">Om bit 29 anges beskrevs mappnings posten under processen.</span><span class="sxs-lookup"><span data-stu-id="8862e-159">If bit 29 is set, the mapping entry was in the process of being written.</span></span> <span data-ttu-id="8862e-160">BITS 30 och 29 används för återställning från en potentiell ström förlust när en ny Flash-sida uppdateras.</span><span class="sxs-lookup"><span data-stu-id="8862e-160">Bits 30 and 29 are used in recovering from a potential power loss while updating a new flash page.</span></span> <span data-ttu-id="8862e-161">Slutligen innehåller de lägre 29 bitarna (28-0) det logiska sektor numret för sidan.</span><span class="sxs-lookup"><span data-stu-id="8862e-161">Finally, the lower 29-bits (28-0) contain the logical sector number for the page.</span></span>

<span data-ttu-id="8862e-162">**Mappnings post för LevelX**</span><span class="sxs-lookup"><span data-stu-id="8862e-162">**LevelX Mapping Entry**</span></span>

| <span data-ttu-id="8862e-163">Bitar</span><span class="sxs-lookup"><span data-stu-id="8862e-163">Bit(s)</span></span> | <span data-ttu-id="8862e-164">Innebörd</span><span class="sxs-lookup"><span data-stu-id="8862e-164">Meaning</span></span> |
| ------ | ------- |
| <span data-ttu-id="8862e-165">31</span><span class="sxs-lookup"><span data-stu-id="8862e-165">31</span></span>     | <span data-ttu-id="8862e-166">Giltig flagga.</span><span class="sxs-lookup"><span data-stu-id="8862e-166">Valid flag.</span></span> <span data-ttu-id="8862e-167">Om uppsättningen och den logiska sektorn inte är alla anger att mappning är giltig</span><span class="sxs-lookup"><span data-stu-id="8862e-167">When set and logical sector is not all ones indicates mapping is valid</span></span> |
| <span data-ttu-id="8862e-168">30</span><span class="sxs-lookup"><span data-stu-id="8862e-168">30</span></span>     | <span data-ttu-id="8862e-169">Föråldrad flagga.</span><span class="sxs-lookup"><span data-stu-id="8862e-169">Obsolete flag.</span></span> <span data-ttu-id="8862e-170">När det är klart är den här mappningen antingen föråldrad eller håller på att bli föråldrad.</span><span class="sxs-lookup"><span data-stu-id="8862e-170">When clear, this mapping is either obsolete or is in the process of becoming obsolete.</span></span> |
| <span data-ttu-id="8862e-171">29</span><span class="sxs-lookup"><span data-stu-id="8862e-171">29</span></span>     | <span data-ttu-id="8862e-172">Skrivning av mappnings post är slutförd när denna bit är 0</span><span class="sxs-lookup"><span data-stu-id="8862e-172">Mapping entry write is complete when this bit is 0</span></span> |
| <span data-ttu-id="8862e-173">0-28</span><span class="sxs-lookup"><span data-stu-id="8862e-173">0-28</span></span>   | <span data-ttu-id="8862e-174">Logisk sektor som är mappad till den här fysiska sidan – om de inte är alla.</span><span class="sxs-lookup"><span data-stu-id="8862e-174">Logical sector mapped to this physical page—when not all ones.</span></span> |

<span data-ttu-id="8862e-175">LevelX använder också den första sidan i varje NAND-block för antalet block radering och listan över mappade sidor när blocket är full.</span><span class="sxs-lookup"><span data-stu-id="8862e-175">LevelX also utilizes the first page of each NAND block for the block erase count as well as the list of mapped pages when the block is full.</span></span> <span data-ttu-id="8862e-176">Formatet på den första sidan i ett NAND-block i LevelX visas nedan:</span><span class="sxs-lookup"><span data-stu-id="8862e-176">The format of the first page of a NAND block in LevelX is shown below:</span></span>

| <span data-ttu-id="8862e-177">LevelX block sid 0-format</span><span class="sxs-lookup"><span data-stu-id="8862e-177">LevelX Block Page 0 Format</span></span> |
|:--------------------------:|
| <span data-ttu-id="8862e-178">[Antal block rader]</span><span class="sxs-lookup"><span data-stu-id="8862e-178">[Block Erase Count]</span></span>        |
| <span data-ttu-id="8862e-179">[Mappning av sida 1-sektor]</span><span class="sxs-lookup"><span data-stu-id="8862e-179">[Page 1 Sector Mapping]</span></span>    |
| <span data-ttu-id="8862e-180">...</span><span class="sxs-lookup"><span data-stu-id="8862e-180">...</span></span>                        |
| <span data-ttu-id="8862e-181">[Sida "n" sektor mappning]</span><span class="sxs-lookup"><span data-stu-id="8862e-181">[Page "n" Sector Mapping]</span></span>  |
| <span data-ttu-id="8862e-182">[0xF0F0F0F0]</span><span class="sxs-lookup"><span data-stu-id="8862e-182">[0xF0F0F0F0]</span></span>               |

> [!NOTE]
> <span data-ttu-id="8862e-183">Sid mappnings informationen skrivs bara när blocket är full, d.v.s. alla sidor i blocket har skrivits till.</span><span class="sxs-lookup"><span data-stu-id="8862e-183">The page mapping information is only written when the block is full, i.e., all the pages of the block have been written to.</span></span> <span data-ttu-id="8862e-184">Detta möjliggör snabbare sökning efter kostnads fria sidor och logisk sektor mappning under körnings tid.</span><span class="sxs-lookup"><span data-stu-id="8862e-184">This enables faster search for free pages and logical sector mapping during run-time.</span></span>

## <a name="nand-bad-block-support"></a><span data-ttu-id="8862e-185">NAND-stöd för dåligt block</span><span class="sxs-lookup"><span data-stu-id="8862e-185">NAND Bad Block Support</span></span>

<span data-ttu-id="8862e-186">NAND-minnet är också mer troligt för skadade block än eller minne.</span><span class="sxs-lookup"><span data-stu-id="8862e-186">NAND memory is also more likely to have bad blocks than NOR memory.</span></span> <span data-ttu-id="8862e-187">Detta beror på stora orsaker till att NAND-tillverkare kan öka kapaciteten genom att tillåta dåliga block och kräva att program varan fungerar runt sådana dåliga block.</span><span class="sxs-lookup"><span data-stu-id="8862e-187">This is largely because NAND manufacturers can increase yield by allowing bad blocks and requiring software to work-around such bad blocks.</span></span> <span data-ttu-id="8862e-188">LevelX hanterar NAND felaktig block hantering genom att helt enkelt mappa runt felaktiga block.</span><span class="sxs-lookup"><span data-stu-id="8862e-188">LevelX handles NAND bad block management by simply mapping around bad blocks.</span></span>

<span data-ttu-id="8862e-189">LevelX innehåller också API: er för 256-byte Hamming fel korrigerings koder (ECC) för den underliggande LevelX-drivrutinen som används för att beräkna nya ECC-koder eller utföra 1-bitars fel korrigering på sid läsning i varje 256-byte-avsnitt på sidan.</span><span class="sxs-lookup"><span data-stu-id="8862e-189">LevelX also provides APIs for 256-byte Hamming Error Correction Codes (ECC) for the underlying LevelX driver to utilize for calculating new ECC codes or to perform 1-bit error correction on page reading within each 256-byte section of the page.</span></span>

## <a name="nand-driver-requirements"></a><span data-ttu-id="8862e-190">NAND driv Rutins krav</span><span class="sxs-lookup"><span data-stu-id="8862e-190">NAND Driver Requirements</span></span>

<span data-ttu-id="8862e-191">LevelX kräver en underliggande NAND-Flash-drivrutin som är speciell för underliggande Flash-del och maskin varu implementering.</span><span class="sxs-lookup"><span data-stu-id="8862e-191">LevelX requires an underlying NAND flash driver that is specific to the underlying flash part and hardware implementation.</span></span> <span data-ttu-id="8862e-192">Driv rutinen anges för LevelX vid initiering via API- ***lx_nand_flash_open***.</span><span class="sxs-lookup"><span data-stu-id="8862e-192">The driver is specified to LevelX during initialization via the API ***lx_nand_flash_open***.</span></span> <span data-ttu-id="8862e-193">Prototypen av LevelX-drivrutinen är följande.</span><span class="sxs-lookup"><span data-stu-id="8862e-193">The prototype of the LevelX driver is as follows.</span></span>

```c
INT nand_driver_initialize(LX_NAND_FLASH *instance);
```

<span data-ttu-id="8862e-194">*Instans* parametern anger kontroll blocket LevelX NAND.</span><span class="sxs-lookup"><span data-stu-id="8862e-194">The *instance* parameter specifies the LevelX NAND control block.</span></span> <span data-ttu-id="8862e-195">Driv Rutinens initierings funktion ansvarar för att konfigurera alla andra tjänster på driv rutins nivå för den associerade LevelX-instansen.</span><span class="sxs-lookup"><span data-stu-id="8862e-195">The driver initialization function is responsible for setting up all the other driver-level services for the associated LevelX instance.</span></span> <span data-ttu-id="8862e-196">De tjänster som krävs för varje LevelX NAND-instans visas i listan nedan.</span><span class="sxs-lookup"><span data-stu-id="8862e-196">The services required for each LevelX NAND instance are shown in the list below.</span></span>

- <span data-ttu-id="8862e-197">Läs sida</span><span class="sxs-lookup"><span data-stu-id="8862e-197">Read Page</span></span>
- <span data-ttu-id="8862e-198">Skriv sida</span><span class="sxs-lookup"><span data-stu-id="8862e-198">Write Page</span></span>
- <span data-ttu-id="8862e-199">Blockera radering</span><span class="sxs-lookup"><span data-stu-id="8862e-199">Block Erase</span></span>
- <span data-ttu-id="8862e-200">Blockera raderad verifiering</span><span class="sxs-lookup"><span data-stu-id="8862e-200">Block Erased Verify</span></span>
- <span data-ttu-id="8862e-201">Sidan togs bort, verifiera</span><span class="sxs-lookup"><span data-stu-id="8862e-201">Page Erased Verify</span></span>
- <span data-ttu-id="8862e-202">Blockera status Hämta</span><span class="sxs-lookup"><span data-stu-id="8862e-202">Block Status Get</span></span>
- <span data-ttu-id="8862e-203">Blockera status uppsättning</span><span class="sxs-lookup"><span data-stu-id="8862e-203">Block Status Set</span></span>
- <span data-ttu-id="8862e-204">Blockera extra byte Hämta</span><span class="sxs-lookup"><span data-stu-id="8862e-204">Block Extra Bytes Get</span></span>
- <span data-ttu-id="8862e-205">Blockera extra byte, uppsättning</span><span class="sxs-lookup"><span data-stu-id="8862e-205">Block Extra Bytes Set</span></span>
- <span data-ttu-id="8862e-206">System fel hanterare</span><span class="sxs-lookup"><span data-stu-id="8862e-206">System Error Handler</span></span>

## <a name="driver-initialization"></a><span data-ttu-id="8862e-207">Driv rutins initiering</span><span class="sxs-lookup"><span data-stu-id="8862e-207">Driver Initialization</span></span>

<span data-ttu-id="8862e-208">Dessa tjänster konfigureras genom att ställa in funktions pekare i **LX_NAND_FLASH** instansen i driv Rutinens initierings funktion.</span><span class="sxs-lookup"><span data-stu-id="8862e-208">These services are setup via setting function pointers in the **LX_NAND_FLASH** instance within the driver's initialization function.</span></span> <span data-ttu-id="8862e-209">Driv Rutinens initierings funktion anger även det totala antalet block, sidor per block, byte per sida och ett RAM-utrymme som är tillräckligt stort för att läsa en sida i minnet.</span><span class="sxs-lookup"><span data-stu-id="8862e-209">The driver initialization function also specifies the total number of block, pages per block, bytes per page, and a RAM area large enough to read one page into memory.</span></span> <span data-ttu-id="8862e-210">Initierings funktionen för driv rutiner utför troligen även ytterligare ytterligare enhets-och/eller implementerings åtgärder innan du returnerar **LX_SUCCESS**.</span><span class="sxs-lookup"><span data-stu-id="8862e-210">The driver initialization function likely also performs additional device and/or implementation-specific initialization duties before returning **LX_SUCCESS**.</span></span>

## <a name="driver-read-page"></a><span data-ttu-id="8862e-211">Sidan driv rutins läsning</span><span class="sxs-lookup"><span data-stu-id="8862e-211">Driver Read Page</span></span>

<span data-ttu-id="8862e-212">Tjänsten LevelX NAND driver "Read Page" ansvarar för att läsa en speciell sida i ett särskilt block i NAND-Flash.</span><span class="sxs-lookup"><span data-stu-id="8862e-212">The LevelX NAND driver "read page" service is responsible for reading a specific page in a specific block of the NAND flash.</span></span> <span data-ttu-id="8862e-213">All fel kontroll och korrigerings logik är ansvaret för driv rutins tjänsten.</span><span class="sxs-lookup"><span data-stu-id="8862e-213">All error checking and correcting logic is the responsibility of the driver service.</span></span> <span data-ttu-id="8862e-214">Om det lyckas returnerar driv rutinen LevelX NAND **LX_SUCCESS**.</span><span class="sxs-lookup"><span data-stu-id="8862e-214">If successful, the LevelX NAND driver returns **LX_SUCCESS**.</span></span> <span data-ttu-id="8862e-215">Om det inte lyckas returnerar driv rutinen LevelX NAND **LX_ERROR**.</span><span class="sxs-lookup"><span data-stu-id="8862e-215">If not successful, the LevelX NAND driver returns **LX_ERROR**.</span></span> <span data-ttu-id="8862e-216">Prototypen av LevelX NAND-drivrutinen "Read Page" anges nedan.</span><span class="sxs-lookup"><span data-stu-id="8862e-216">The prototype of the LevelX NAND driver "read page" service is given below.</span></span>

```c
INT nand_driver_read_page(
    ULONG block,
    ULONG page,
    ULONG *destination, 
    ULONG words);
```

<span data-ttu-id="8862e-217">Där *block* och *sida* identifierar vilken sida som ska läsas *och anges* var du ska placera sid *innehållet och hur* många 32-bitars ord som ska läsas.</span><span class="sxs-lookup"><span data-stu-id="8862e-217">Where *block* and *page* identify which page to read and *destination* and *words* specify where to place the page contents and how many 32-bit words to read.</span></span>

## <a name="driver-write-page"></a><span data-ttu-id="8862e-218">Sidan driv rutins skrivning</span><span class="sxs-lookup"><span data-stu-id="8862e-218">Driver Write Page</span></span>

<span data-ttu-id="8862e-219">LevelX NAND-driv rutinen "Skriv Page" ansvarar för att skriva en specifik sida till det angivna blocket av NAND-Flash.</span><span class="sxs-lookup"><span data-stu-id="8862e-219">The LevelX NAND driver "write page" service is responsible for writing a specific page into the specified block of the NAND flash.</span></span> <span data-ttu-id="8862e-220">All fel kontroll och ECC-beräkning är ansvaret för driv rutins tjänsten.</span><span class="sxs-lookup"><span data-stu-id="8862e-220">All error checking and ECC computation is the responsibility of the driver service.</span></span> <span data-ttu-id="8862e-221">Om det lyckas returnerar driv rutinen LevelX NAND **LX_SUCCESS**.</span><span class="sxs-lookup"><span data-stu-id="8862e-221">If successful, the LevelX NAND driver returns **LX_SUCCESS**.</span></span> <span data-ttu-id="8862e-222">Om det inte lyckas returnerar driv rutinen LevelX NAND **LX_ERROR**.</span><span class="sxs-lookup"><span data-stu-id="8862e-222">If not successful, the LevelX NAND driver returns **LX_ERROR**.</span></span> <span data-ttu-id="8862e-223">Prototypen av tjänsten LevelX NAND driver "Skriv Page" visas nedan.</span><span class="sxs-lookup"><span data-stu-id="8862e-223">The prototype of the LevelX NAND driver "write page" service is shown below.</span></span>

```c
INT nand_driver_write_page(
    ULONG block, 
    ULONG page,
    ULONG *source, 
    ULONG words);
```

<span data-ttu-id="8862e-224">Där *block* och *sida* identifierar vilken sida som ska skrivas och *källa* och *ord* anger källan för skrivning och hur många 32-bitars ord som ska skrivas.</span><span class="sxs-lookup"><span data-stu-id="8862e-224">Where *block* and *page* identify which page to write and *source* and *words* specify the source of the write and how many 32-bit words to write.</span></span>

> [!NOTE]
> <span data-ttu-id="8862e-225">LevelX förlitar sig på driv rutinen för identifiering av fel på låg nivå vid skrivning till Flash-sidan, vilket vanligt vis innebär att läsa sidan och jämföra med Write buffer för att säkerställa att skrivningen lyckades.</span><span class="sxs-lookup"><span data-stu-id="8862e-225">LevelX relies on the driver for low-level error detection when writing to the flash page, which typically involves reading back the page and comparing with the write buffer to ensure the write was successful.</span></span>

## <a name="driver-block-erase"></a><span data-ttu-id="8862e-226">Radera driv rutins block</span><span class="sxs-lookup"><span data-stu-id="8862e-226">Driver Block Erase</span></span>

<span data-ttu-id="8862e-227">LevelX NAND-driv rutinen "blockera radering" ansvarar för att radera det angivna blocket av NAND-Flash.</span><span class="sxs-lookup"><span data-stu-id="8862e-227">The LevelX NAND driver "block erase" service is responsible for erasing the specified block of the NAND flash.</span></span> <span data-ttu-id="8862e-228">Om det lyckas returnerar driv rutinen LevelX NAND **LX_SUCCESS**.</span><span class="sxs-lookup"><span data-stu-id="8862e-228">If successful, the LevelX NAND driver returns **LX_SUCCESS**.</span></span> <span data-ttu-id="8862e-229">Om det inte lyckas returnerar driv rutinen LevelX NAND **LX_ERROR**.</span><span class="sxs-lookup"><span data-stu-id="8862e-229">If not successful, the LevelX NAND driver returns **LX_ERROR**.</span></span> <span data-ttu-id="8862e-230">Prototypen av tjänsten LevelX NAND driv rutin "blockera radering" är följande.</span><span class="sxs-lookup"><span data-stu-id="8862e-230">The prototype of the LevelX NAND driver "block erase" service is as follows.</span></span>

```c
INT nand_driver_block_erase(ULONG block,  
    ULONG erase_count);
```

<span data-ttu-id="8862e-231">Där *block* identifierar vilket block som ska raderas.</span><span class="sxs-lookup"><span data-stu-id="8862e-231">Where *block* identifies which block to erase.</span></span> <span data-ttu-id="8862e-232">Parametern *erase_count* anges i diagnostiskt syfte.</span><span class="sxs-lookup"><span data-stu-id="8862e-232">The parameter *erase_count* is provided for diagnostic purposes.</span></span> <span data-ttu-id="8862e-233">Driv rutinen kan till exempel vilja varna en annan del av program varan när antalet rader överskrider ett angivet tröskelvärde.</span><span class="sxs-lookup"><span data-stu-id="8862e-233">For example, the driver may want to alert another portion of the application software when the erase count exceeds a specific threshold.</span></span>

> [!NOTE]
> <span data-ttu-id="8862e-234">LevelX förlitar sig på driv rutinen för fel avkänning på låg nivå när blocket raderas, vilket vanligt vis innebär att alla sidor i blocket är alla.</span><span class="sxs-lookup"><span data-stu-id="8862e-234">LevelX relies on the driver for low-level error detection when the block is erased, which typically involves ensuring that all pages of the block are all ones.</span></span>

## <a name="driver-block-erased-verify"></a><span data-ttu-id="8862e-235">Borttagning av driv rutins block</span><span class="sxs-lookup"><span data-stu-id="8862e-235">Driver Block Erased Verify</span></span>

<span data-ttu-id="8862e-236">LevelX NAND-driv rutinen "blockera raderad verifiering" ansvarar för att verifiera att det angivna blocket av NAND-blixten raderas.</span><span class="sxs-lookup"><span data-stu-id="8862e-236">The LevelX NAND driver "block erased verify" service is responsible for verifying that the specified block of the NAND flash is erased.</span></span> <span data-ttu-id="8862e-237">Om den raderas returnerar driv rutinen LevelX NAND **LX_SUCCESS**.</span><span class="sxs-lookup"><span data-stu-id="8862e-237">If it is erased, the LevelX NAND driver returns **LX_SUCCESS**.</span></span> <span data-ttu-id="8862e-238">Om blocket inte raderas returnerar driv rutinen LevelX NAND **LX_ERROR**.</span><span class="sxs-lookup"><span data-stu-id="8862e-238">If the block is not erased, the LevelX NAND driver returns **LX_ERROR**.</span></span> <span data-ttu-id="8862e-239">Prototypen av LevelX NAND-drivrutinen "blockera raderad verifiering" är:</span><span class="sxs-lookup"><span data-stu-id="8862e-239">The prototype of the LevelX NAND driver "block erased verify" service is:</span></span>

```c
INT nand_driver_block_erased_verify(ULONG block);
```

<span data-ttu-id="8862e-240">Where- *block* anger vilket block som ska kontrol lera att den raderas.</span><span class="sxs-lookup"><span data-stu-id="8862e-240">Where *block* specifies which block to verify that it is erased.</span></span>

> [!NOTE]
> <span data-ttu-id="8862e-241">LevelX förlitar sig på driv rutinen för att undersöka alla sidor och alla byte på varje sida, inklusive reserv-och data byte – så att de raderas (innehåller alla).</span><span class="sxs-lookup"><span data-stu-id="8862e-241">LevelX relies on the driver to examine all pages and all bytes of each page – including spare and data bytes – to ensure they are erased (contain all ones).</span></span>

## <a name="driver-page-erased-verify"></a><span data-ttu-id="8862e-242">Kontrollen av driv rutins sidan har raderats</span><span class="sxs-lookup"><span data-stu-id="8862e-242">Driver Page Erased Verify</span></span>

<span data-ttu-id="8862e-243">Sidan LevelX NAND-driv rutinen är inte ansvarig för att verifiera att den angivna sidan i det angivna blocket av NAND-Flash raderas.</span><span class="sxs-lookup"><span data-stu-id="8862e-243">The LevelX NAND driver "page erased verify" service is responsible for verifying that the specified page of the specified block of the NAND flash is erased.</span></span> <span data-ttu-id="8862e-244">Om den raderas returnerar driv rutinen LevelX NAND **LX_SUCCESS**.</span><span class="sxs-lookup"><span data-stu-id="8862e-244">If it is erased, the LevelX NAND driver returns **LX_SUCCESS**.</span></span> <span data-ttu-id="8862e-245">Om sidan inte raderas returnerar driv rutinen LevelX NAND **LX_ERROR**.</span><span class="sxs-lookup"><span data-stu-id="8862e-245">If the page is not erased, the LevelX NAND driver returns **LX_ERROR**.</span></span> <span data-ttu-id="8862e-246">Prototypen av LevelX NAND-driv rutinen "sida som rensats" är:</span><span class="sxs-lookup"><span data-stu-id="8862e-246">The prototype of the LevelX NAND driver "page erased verify" service is:</span></span>

```c
INT nand_driver_page_erased_verify(
    ULONG block,  
    ULONG page);
```
<span data-ttu-id="8862e-247">Where- *block* anger vilket block och vilken *sida* som anger sidan för att kontrol lera att den raderas.</span><span class="sxs-lookup"><span data-stu-id="8862e-247">Where *block* specifies which block and *page* specifies the page to verify that it is erased.</span></span>

> [!NOTE]
> <span data-ttu-id="8862e-248">LevelX förlitar sig på driv rutinen för att undersöka alla byte på den angivna sidan, inklusive reserv-och data byte, för att se till att de raderas (innehåller alla).</span><span class="sxs-lookup"><span data-stu-id="8862e-248">LevelX relies on the driver to examine all bytes of the specified page – including spare and data bytes – to ensure they are erased (contain all ones).</span></span>

## <a name="driver-block-status-get"></a><span data-ttu-id="8862e-249">Status för driv rutins block</span><span class="sxs-lookup"><span data-stu-id="8862e-249">Driver Block Status Get</span></span>

<span data-ttu-id="8862e-250">LevelX NAND-drivrutin för "blockera status" är ansvarig för att hämta den felaktiga block flaggan för det angivna blocket av NAND-Flash.</span><span class="sxs-lookup"><span data-stu-id="8862e-250">The LevelX NAND driver "block status get" service is responsible for retrieving the bad block flag of the specified block of the NAND flash.</span></span> <span data-ttu-id="8862e-251">Om det lyckas returnerar driv rutinen LevelX NAND **LX_SUCCESS**.</span><span class="sxs-lookup"><span data-stu-id="8862e-251">If it is successful, the LevelX NAND driver returns **LX_SUCCESS**.</span></span> <span data-ttu-id="8862e-252">Om det inte lyckas returnerar driv rutinen LevelX NAND **LX_ERROR**.</span><span class="sxs-lookup"><span data-stu-id="8862e-252">If it is not successful, the LevelX NAND driver returns **LX_ERROR**.</span></span> <span data-ttu-id="8862e-253">Prototypen av tjänsten LevelX NAND driver "Get" är: visas nedan.</span><span class="sxs-lookup"><span data-stu-id="8862e-253">The prototype of the LevelX NAND driver "block status get" service is: shown below.</span></span>

```c
INT nand_driver_block_status_get(
    ULONG block,  
    UCHAR *bad_block_byte);
```

<span data-ttu-id="8862e-254">Where- *block* anger vilka block och *bad_block_byte* anger målet för den felaktiga block flaggan.</span><span class="sxs-lookup"><span data-stu-id="8862e-254">Where *block* specifies which block and *bad_block_byte* specifies the destination for the bad block flag.</span></span>

## <a name="driver-block-status-set"></a><span data-ttu-id="8862e-255">Status uppsättning för driv rutins block</span><span class="sxs-lookup"><span data-stu-id="8862e-255">Driver Block Status Set</span></span>

<span data-ttu-id="8862e-256">Tjänsten LevelX NAND driver "block status uppsättning" ansvarar för att ställa in flaggan för felaktig block för det angivna blocket av NAND-Flash.</span><span class="sxs-lookup"><span data-stu-id="8862e-256">The LevelX NAND driver "block status set" service is responsible for setting the bad block flag of the specified block of the NAND flash.</span></span> <span data-ttu-id="8862e-257">Om det lyckas returnerar driv rutinen LevelX NAND **LX_SUCCESS**.</span><span class="sxs-lookup"><span data-stu-id="8862e-257">If it is successful, the LevelX NAND driver returns **LX_SUCCESS**.</span></span> <span data-ttu-id="8862e-258">Om det inte lyckas returnerar driv rutinen LevelX NAND **LX_ERROR**.</span><span class="sxs-lookup"><span data-stu-id="8862e-258">If it is not successful, the LevelX NAND driver returns **LX_ERROR**.</span></span> <span data-ttu-id="8862e-259">Prototypen av tjänsten LevelX NAND driver "block status uppsättning" är:</span><span class="sxs-lookup"><span data-stu-id="8862e-259">The prototype of the LevelX NAND driver "block status set" service is:</span></span>

```c
INT nand_driver_block_status_set(
    ULONG block,
    UCHAR bad_block_byte);
```

<span data-ttu-id="8862e-260">Where- *block* anger vilka block och *bad_block_byte* anger värdet för den felaktiga block flaggan.</span><span class="sxs-lookup"><span data-stu-id="8862e-260">Where *block* specifies which block and *bad_block_byte* specifies the value of the bad block flag.</span></span>

## <a name="driver-block-extra-bytes-get"></a><span data-ttu-id="8862e-261">Extra byte Hämta driv rutins block</span><span class="sxs-lookup"><span data-stu-id="8862e-261">Driver Block Extra Bytes Get</span></span>

<span data-ttu-id="8862e-262">LevelX NAND driv rutinen "blockera extra bytes get" ansvarar för att hämta extra byte som är kopplade till en speciell sida i ett särskilt block i NAND-Flash.</span><span class="sxs-lookup"><span data-stu-id="8862e-262">The LevelX NAND driver "block extra bytes get" service is responsible for retrieving extra bytes associated with a specific page of a specific block of the NAND flash.</span></span> <span data-ttu-id="8862e-263">Om det lyckas returnerar driv rutinen LevelX NAND **LX_SUCCESS**.</span><span class="sxs-lookup"><span data-stu-id="8862e-263">If it is successful, the LevelX NAND driver returns **LX_SUCCESS**.</span></span> <span data-ttu-id="8862e-264">Om det inte lyckas returnerar driv rutinen LevelX NAND **LX_ERROR**.</span><span class="sxs-lookup"><span data-stu-id="8862e-264">If it is not successful, the LevelX NAND driver returns **LX_ERROR**.</span></span> <span data-ttu-id="8862e-265">Prototypen av tjänsten LevelX NAND driver "blockera extra bytes get" är:</span><span class="sxs-lookup"><span data-stu-id="8862e-265">The prototype of the LevelX NAND driver "block extra bytes get" service is:</span></span>

```c
INT nand_driver_block_extra_bytes_get(
    ULONG block,  
    ULONG page, 
    UCHAR *destination, 
    UINT size);
```

<span data-ttu-id="8862e-266">Where- *block* anger vilket block, *sidan* anger den särskilda sidan och *målet* anger målet för extra byte.</span><span class="sxs-lookup"><span data-stu-id="8862e-266">Where *block* specifies which block, *page* specifies the specific page and *destination* specifies the destination for the extra bytes.</span></span> <span data-ttu-id="8862e-267">Parameter *storleken* anger hur många extra byte som ska hämtas.</span><span class="sxs-lookup"><span data-stu-id="8862e-267">The parameter *size* specifies how many extra bytes to get.</span></span>

## <a name="driver-block-extra-bytes-set"></a><span data-ttu-id="8862e-268">Extra byte som har angetts för driv rutins block</span><span class="sxs-lookup"><span data-stu-id="8862e-268">Driver Block Extra Bytes Set</span></span>

<span data-ttu-id="8862e-269">LevelX NAND driv rutinen "blockera extra bytes set" ansvarar för att ställa in extra byte på en speciell sida i ett särskilt block av NAND-Flash.</span><span class="sxs-lookup"><span data-stu-id="8862e-269">The LevelX NAND driver "block extra bytes set" service is responsible for setting extra bytes in a specific page of a specific block of the NAND flash.</span></span> <span data-ttu-id="8862e-270">Om det lyckas returnerar driv rutinen LevelX NAND **LX_SUCCESS**.</span><span class="sxs-lookup"><span data-stu-id="8862e-270">If it is successful, the LevelX NAND driver returns **LX_SUCCESS**.</span></span> <span data-ttu-id="8862e-271">Om det inte lyckas returnerar driv rutinen LevelX NAND **LX_ERROR**.</span><span class="sxs-lookup"><span data-stu-id="8862e-271">If it is not successful, the LevelX NAND driver returns **LX_ERROR**.</span></span> <span data-ttu-id="8862e-272">Prototypen av tjänsten LevelX NAND driv rutin "blockera extra byte uppsättning" är:</span><span class="sxs-lookup"><span data-stu-id="8862e-272">The prototype of the LevelX NAND driver "block extra bytes set" service is:</span></span>

```c
INT nand_driver_block_extra_bytes_set(
    ULONG block,  
    ULONG page, 
    UCHAR *source, 
    UINT size);
```

<span data-ttu-id="8862e-273">Where- *block* anger vilket block, *sidan* anger den särskilda sidan och *källan* anger källan för de extra byte.</span><span class="sxs-lookup"><span data-stu-id="8862e-273">Where *block* specifies which block, *page* specifies the specific page and *source* specifies the source of the extra bytes.</span></span> <span data-ttu-id="8862e-274">Parameter *storleken* anger hur många extra byte som ska anges.</span><span class="sxs-lookup"><span data-stu-id="8862e-274">The parameter *size* specifies how many extra bytes to set.</span></span>

## <a name="driver-system-error"></a><span data-ttu-id="8862e-275">Driv rutins system fel</span><span class="sxs-lookup"><span data-stu-id="8862e-275">Driver System Error</span></span>

<span data-ttu-id="8862e-276">LevelX NAND-drivrutinen för system fel hanterare ansvarar för att ställa in hantering av systemfel som upptäckts av LevelX.</span><span class="sxs-lookup"><span data-stu-id="8862e-276">The LevelX NAND driver "system error handler" service is responsible for setting handling system errors detected by LevelX.</span></span> <span data-ttu-id="8862e-277">Bearbetningen i den här rutinen är beroende av program.</span><span class="sxs-lookup"><span data-stu-id="8862e-277">The processing in this routine is application dependent.</span></span> <span data-ttu-id="8862e-278">Om det lyckas returnerar driv rutinen LevelX NAND **LX_SUCCESS**.</span><span class="sxs-lookup"><span data-stu-id="8862e-278">If it is successful, the LevelX NAND driver returns **LX_SUCCESS**.</span></span> <span data-ttu-id="8862e-279">Om det inte lyckas returnerar driv rutinen LevelX NAND **LX_ERROR**.</span><span class="sxs-lookup"><span data-stu-id="8862e-279">If it is not successful, the LevelX NAND driver returns **LX_ERROR**.</span></span> <span data-ttu-id="8862e-280">Prototypen av tjänsten System Error för LevelX NAND-drivrutinen är:</span><span class="sxs-lookup"><span data-stu-id="8862e-280">The prototype of the LevelX NAND driver "system error" service is:</span></span>

```c
INT nand_driver_system_error(
    UINT error_code,  
    ULONG block, 
    ULONG page);
```

<span data-ttu-id="8862e-281">Where- *block* anger vilket block, och *sidan* anger den sida som felet representeras av *error_code* uppstod.</span><span class="sxs-lookup"><span data-stu-id="8862e-281">Where *block* specifies which block, and *page* specifies the specific page the error represented by *error_code* occurred.</span></span>

## <a name="nand-simulated-driver"></a><span data-ttu-id="8862e-282">NAND-simulerad driv rutin</span><span class="sxs-lookup"><span data-stu-id="8862e-282">NAND Simulated Driver</span></span>

<span data-ttu-id="8862e-283">LevelX tillhandahåller en simulerad NAND-Flash-drivrutin som bara använder RAM för att simulera åtgärden för en NAND-Flash-del.</span><span class="sxs-lookup"><span data-stu-id="8862e-283">LevelX provides a simulated NAND flash driver that simply uses RAM to simulate the operation of a NAND flash part.</span></span> <span data-ttu-id="8862e-284">Som standard tillhandahåller den NAND simulerade driv rutinen 8 NAND Flash-block med 16 sidor per block och 2048 byte per sida.</span><span class="sxs-lookup"><span data-stu-id="8862e-284">By default, the NAND simulated driver provides 8 NAND flash blocks with 16 pages per block and 2048 bytes per page.</span></span>

<span data-ttu-id="8862e-285">Initierings funktionen för den simulerade NAND-Flash-drivrutinen är \***lx_nand_flash_simulator_initialize** _ och definieras i _ *_lx_nand_flash_simulator. c_* \*.</span><span class="sxs-lookup"><span data-stu-id="8862e-285">The simulated NAND flash driver initialization function is ***lx_nand_flash_simulator_initialize** _ and is defined in _*_lx_nand_flash_simulator.c_\*\*.</span></span> <span data-ttu-id="8862e-286">Den här driv rutinen innehåller också en lämplig mall för att skriva vissa Flash-drivrutiner för NAND.</span><span class="sxs-lookup"><span data-stu-id="8862e-286">This driver also provides a good template for writing specific NAND flash drivers.</span></span>

## <a name="nand-filex-integration"></a><span data-ttu-id="8862e-287">NAND FileX-integrering</span><span class="sxs-lookup"><span data-stu-id="8862e-287">NAND FileX Integration</span></span>

<span data-ttu-id="8862e-288">Som tidigare nämnts förlitar sig LevelX inte på FileX för åtgärd.</span><span class="sxs-lookup"><span data-stu-id="8862e-288">As mentioned earlier, LevelX does not rely on FileX for operation.</span></span> <span data-ttu-id="8862e-289">Alla LevelX-API: er kan anropas direkt av program varan för att lagra/Hämta rå data till de logiska sektorerna som tillhandahålls av LevelX.</span><span class="sxs-lookup"><span data-stu-id="8862e-289">All the LevelX APIs may be called directly by the application software to store/retrieve raw data to the logical sectors provided by LevelX.</span></span> <span data-ttu-id="8862e-290">LevelX stöder dock också FileX.</span><span class="sxs-lookup"><span data-stu-id="8862e-290">However, LevelX also supports FileX.</span></span>

<span data-ttu-id="8862e-291">Filen ***fx_nand_flash_simulated_driver. c*** innehåller ett exempel på en FileX-drivrutin för användning med Flash-simuleringen NAND.</span><span class="sxs-lookup"><span data-stu-id="8862e-291">The file ***fx_nand_flash_simulated_driver.c*** contains an example FileX driver for use with the NAND flash simulation.</span></span> <span data-ttu-id="8862e-292">En intressant aspekt av den här driv rutinen är att den kombinerar 512 bytes logiska sektorer som vanligt vis används av FileX i en enda logisk sektor Läs-/skriv förfrågningar till LevelX-simulatorn med hjälp av 2048 byte-sidor.</span><span class="sxs-lookup"><span data-stu-id="8862e-292">An interesting aspect of this driver is that it combines 512-byte logical sectors typically used by FileX into single logical sector read/write requests to the LevelX simulator using 2048-byte pages.</span></span> <span data-ttu-id="8862e-293">Detta ger en mer effektiv användning av NAND Flash-minnet.</span><span class="sxs-lookup"><span data-stu-id="8862e-293">This results in more efficient use of the NAND flash memory.</span></span> <span data-ttu-id="8862e-294">NAND Flash FileX-drivrutinen för LevelX är en välstarts punkt för att skriva anpassade FileX-drivrutiner.</span><span class="sxs-lookup"><span data-stu-id="8862e-294">The NAND flash FileX driver for LevelX provides a good starting point for writing custom FileX drivers.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="8862e-295">FileX NAND Flash-formatet bör vara en fullständig block storlek på sektorer som är mindre än NAND Flash.</span><span class="sxs-lookup"><span data-stu-id="8862e-295">The FileX NAND flash format should be one full block size of sectors less than the NAND flash provides.</span></span> <span data-ttu-id="8862e-296">Detta bidrar till att garantera bästa prestanda under belastnings nivån för slitage.</span><span class="sxs-lookup"><span data-stu-id="8862e-296">This will help ensure best performance during the wear level processing.</span></span> <span data-ttu-id="8862e-297">Ytterligare metoder för att förbättra skriv prestanda i LevelX-slitage är följande.</span><span class="sxs-lookup"><span data-stu-id="8862e-297">Additional techniques to improve write performance in the LevelX wear leveling algorithm include the following.</span></span>

1. <span data-ttu-id="8862e-298">Se till att alla skrivningar är exakt ett eller flera kluster i storlek och starta på exakta kluster gränser.</span><span class="sxs-lookup"><span data-stu-id="8862e-298">Ensure that all writes are exactly one or more clusters in size and start on exact cluster boundaries.</span></span>
1. <span data-ttu-id="8862e-299">Förallokera kluster innan du utför stora fil skrivnings åtgärder via FileX ***fx_file_allocate*** -klassen för API: er.</span><span class="sxs-lookup"><span data-stu-id="8862e-299">Pre-allocate clusters before performing large file write operations via the FileX ***fx_file_allocate*** class of APIs.</span></span>
1. <span data-ttu-id="8862e-300">Se till att FileX-drivrutinen är aktive rad för att ta emot information om versions sektorn och förfrågningar som görs till driv rutinen för att frigöra sektorer i driv rutinen genom att anropa ***lx_nor_flash_sector_release***.</span><span class="sxs-lookup"><span data-stu-id="8862e-300">Ensure the FileX driver is enabled to receive release sector information and requests made to the driver to release sectors are handled in the driver by calling ***lx_nor_flash_sector_release***.</span></span>
1. <span data-ttu-id="8862e-301">Regelbunden användning av ***lx_nand_flash_defragment*** för att frigöra så många NAND block som möjligt och därmed förbättra skriv prestanda.</span><span class="sxs-lookup"><span data-stu-id="8862e-301">Periodic use of ***lx_nand_flash_defragment*** to free up as many NAND blocks as possible and thus improve write performance.</span></span>
1. <span data-ttu-id="8862e-302">Använd ***lx_nand_flash_extended_cache_enable*** API för att tillhandahålla en ram-cache med olika NAND-block resurser för snabbare prestanda.</span><span class="sxs-lookup"><span data-stu-id="8862e-302">Utilize the ***lx_nand_flash_extended_cache_enable*** API to provide a RAM cache of various NAND block resources for faster performance.</span></span>
